{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/Daily/source/css/style.scss","path":"css/style.scss","modified":1,"renderable":1},{"_id":"themes/Daily/source/images/arrow-left.svg","path":"images/arrow-left.svg","modified":1,"renderable":1},{"_id":"themes/Daily/source/images/arrow-right.svg","path":"images/arrow-right.svg","modified":1,"renderable":1},{"_id":"themes/Daily/source/images/github.svg","path":"images/github.svg","modified":1,"renderable":1},{"_id":"themes/Daily/source/images/mail.svg","path":"images/mail.svg","modified":1,"renderable":1},{"_id":"themes/Daily/source/images/menu.svg","path":"images/menu.svg","modified":1,"renderable":1},{"_id":"themes/Daily/source/images/twitter.svg","path":"images/twitter.svg","modified":1,"renderable":1},{"_id":"themes/Daily/source/images/weibo.svg","path":"images/weibo.svg","modified":1,"renderable":1},{"_id":"themes/Daily/source/js/app.js","path":"js/app.js","modified":1,"renderable":1},{"_id":"source/img/webSocket/WechatIMG10.jpeg","path":"img/webSocket/WechatIMG10.jpeg","modified":1,"renderable":0},{"_id":"source/img/webSocket/wechat.JPG","path":"img/webSocket/wechat.JPG","modified":1,"renderable":0}],"Cache":[{"_id":"source/.DS_Store","hash":"8a165c27092ce6ef5941b605a31ef06365392663","modified":1525181623237},{"_id":"themes/Daily/.DS_Store","hash":"d6c1ae8b6b452f7a1940e4f5c342a9f50aeb944c","modified":1522891613801},{"_id":"themes/Daily/README.md","hash":"91f3b2a4eb7a734cd98a9358923a243f4f096f6b","modified":1508339180000},{"_id":"themes/Daily/_config.yml","hash":"5c5b886064c5b4883f2e1fd0af143d56313aa4e8","modified":1508339180000},{"_id":"source/_posts/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1522637173069},{"_id":"source/_posts/css.md","hash":"b19fd5f5952f24ff45677a7b57c47eb7c9918c27","modified":1525177480084},{"_id":"source/_posts/debounce_throttle.md","hash":"8dcc52c8288d6e38a9e59f3d78e9d30e487e23d2","modified":1525159717245},{"_id":"source/_posts/git.md","hash":"1be227a082076a061c7496266a11394c3d4ae408","modified":1525181434057},{"_id":"source/_posts/npm.md","hash":"29560cbe7922af168011c31ceaed7c7a6eb0125c","modified":1525149140062},{"_id":"source/_posts/guide.md","hash":"c4870fd48aa74b3d20162ed2c1b7c411c40e9d35","modified":1525155536270},{"_id":"source/_posts/recursion.md","hash":"005bbb06b03897ace81c43221f5e9706c76e8818","modified":1525162188977},{"_id":"source/_posts/websocket.md","hash":"f7b5ca3731a3e18c562955d5202aba74655a29d8","modified":1525146630726},{"_id":"source/img/.DS_Store","hash":"1a0af4029ace0256c5eff66401dffc2f54101353","modified":1522889920793},{"_id":"themes/Daily/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1508339180000},{"_id":"themes/Daily/.git/config","hash":"467640de6727b8ed5b5df138bc007186dc6dfda0","modified":1508339180000},{"_id":"themes/Daily/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1508339176000},{"_id":"themes/Daily/.git/index","hash":"29b5884c41417a1d396ecca6af1f66b7b07d353e","modified":1525181512892},{"_id":"themes/Daily/.git/packed-refs","hash":"8be9e24240e9e5e546fab745be3afc5881c0a0b3","modified":1508339180000},{"_id":"themes/Daily/languages/default.yml","hash":"2df42359e6646c0c2903ada8411100a8f1d15134","modified":1508339180000},{"_id":"themes/Daily/languages/en.yml","hash":"2df42359e6646c0c2903ada8411100a8f1d15134","modified":1508339180000},{"_id":"themes/Daily/languages/zh-CN.yml","hash":"3e28e97eaf0e172ddee96b2d6f8ba604d90ff24d","modified":1508339180000},{"_id":"themes/Daily/languages/zh-TW.yml","hash":"c727b3550a12ad6f99b13e1b320466f8238f4b54","modified":1508339180000},{"_id":"themes/Daily/layout/.DS_Store","hash":"7c0c72c2064734af89160faddfbaa23cd428c6a3","modified":1522891608792},{"_id":"themes/Daily/layout/archive.ejs","hash":"5afa6387ae87e15a4562822850806c51f471cbe8","modified":1508339180000},{"_id":"themes/Daily/layout/index.ejs","hash":"3317310e01719dd58878fb4b7bd1b41d495800af","modified":1508339180000},{"_id":"themes/Daily/layout/layout.ejs","hash":"c673e9ca69477f985a421682722fc91c5c72c986","modified":1508339180000},{"_id":"themes/Daily/layout/post.ejs","hash":"d1d048e00ae60ab8219c56a9bae7e84bfbee1103","modified":1508339180000},{"_id":"themes/Daily/layout/tag.ejs","hash":"f13f991cdd2d462cfaff2ead0a110504e10d1d2f","modified":1508339180000},{"_id":"source/img/webSocket/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1509377314000},{"_id":"themes/Daily/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1508339176000},{"_id":"themes/Daily/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1508339176000},{"_id":"themes/Daily/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1508339176000},{"_id":"themes/Daily/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1508339176000},{"_id":"themes/Daily/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1508339176000},{"_id":"themes/Daily/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1508339176000},{"_id":"themes/Daily/.git/hooks/pre-rebase.sample","hash":"5885a56ab4fca8075a05a562d005e922cde9853b","modified":1508339176000},{"_id":"themes/Daily/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1508339176000},{"_id":"themes/Daily/.git/hooks/prepare-commit-msg.sample","hash":"2b6275eda365cad50d167fe3a387c9bc9fedd54f","modified":1508339176000},{"_id":"themes/Daily/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1508339176000},{"_id":"themes/Daily/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1508339176000},{"_id":"themes/Daily/.git/logs/HEAD","hash":"fa1cd416190ca4d16df70c9050f75a61ae3654ca","modified":1508339180000},{"_id":"themes/Daily/layout/_partial/after-footer.ejs","hash":"00588b4db6aeec2d1f7951ee96980764a15e7f4f","modified":1508339180000},{"_id":"themes/Daily/layout/_partial/article-archive.ejs","hash":"32e6d38ac9074922f958126da4eb5cde0ae98da4","modified":1508339180000},{"_id":"themes/Daily/layout/_partial/article-index.ejs","hash":"e93ceb6e15352967381da651f73dab0c702a4f64","modified":1508339180000},{"_id":"themes/Daily/layout/_partial/comment.ejs","hash":"9c8975d87fe1a1aad63cd74affa68f42ec3334e1","modified":1508339180000},{"_id":"themes/Daily/layout/_partial/footer.ejs","hash":"5f190a7233be1322e744fecd2759b8e8f7042be5","modified":1508339180000},{"_id":"themes/Daily/layout/_partial/head.ejs","hash":"9338cdc926aae79a50733e014e82471202b8fa07","modified":1508339180000},{"_id":"themes/Daily/layout/_partial/nav.ejs","hash":"cb5cb6371ad98a3fafb9d138a4f05b0b13a83edc","modified":1508339180000},{"_id":"themes/Daily/layout/_partial/pagination.ejs","hash":"98af75b95859dc6aae946497f27d7e51f753e5f6","modified":1508339180000},{"_id":"themes/Daily/source/css/_archive.scss","hash":"698f914f037079d1a25b9d86923eac4775b2ec7a","modified":1508339180000},{"_id":"themes/Daily/source/css/_comment.scss","hash":"8f92712c08489332c824d13e9e3d11bd2a0f1fd0","modified":1508339180000},{"_id":"themes/Daily/source/css/_daily.scss","hash":"e4261421d6c6af5b20c8e2b36353ea95cadb4eef","modified":1508339180000},{"_id":"themes/Daily/source/css/_highlight.scss","hash":"e991c7ebb595557d35c45e3fa4c557882942905c","modified":1508339180000},{"_id":"themes/Daily/source/css/_mobile.scss","hash":"2b7297a4539e6ae803fe459ef411aa4149b24fcf","modified":1508339180000},{"_id":"themes/Daily/source/css/_nav.scss","hash":"410e959a334b38957060f73d40910aa5ce9cb513","modified":1508339180000},{"_id":"themes/Daily/source/css/_normalize.scss","hash":"59fff706bed3120e3d9d6d0092a0372c172ee537","modified":1508339180000},{"_id":"themes/Daily/source/css/_post.scss","hash":"64d31b9a7a16e9fd1b2604053ff7ff9b2bd8279c","modified":1508339180000},{"_id":"themes/Daily/source/css/_variables.scss","hash":"44e76284cf3f70c6c914586132b2e51307439cd9","modified":1508339180000},{"_id":"themes/Daily/source/css/style.scss","hash":"163cde007c7fb3debf9f53594c72d6536242f688","modified":1508339180000},{"_id":"themes/Daily/source/images/arrow-left.svg","hash":"4230dcb796a40d7a0f54c68e1ffb1f325ad962a5","modified":1508339180000},{"_id":"themes/Daily/source/images/arrow-right.svg","hash":"98c04bf1be3ca657f1e9697dc63219ade0a5616c","modified":1508339180000},{"_id":"themes/Daily/source/images/github.svg","hash":"bc2e3f2e54c354acfe64899482f6379d25f04792","modified":1508339180000},{"_id":"themes/Daily/source/images/mail.svg","hash":"18b3549b0447d605ca252fefcaa4d8e11179ce21","modified":1508339180000},{"_id":"themes/Daily/source/images/menu.svg","hash":"a1837ac76bc3e2aaf30450941bfefcb29ba16411","modified":1508339180000},{"_id":"themes/Daily/source/images/twitter.svg","hash":"2bef6c843de0113721c6c5d1676385897a22a446","modified":1508339180000},{"_id":"themes/Daily/source/images/weibo.svg","hash":"ffd43d8ae9f9ec4f5ae8b97cafa9023ac2a4e59b","modified":1508339180000},{"_id":"themes/Daily/source/js/app.js","hash":"b74710d1dd7b7d1407b4fcfc9499bc37de69b21e","modified":1508339180000},{"_id":"source/img/webSocket/WechatIMG10.jpeg","hash":"3035306fbae441c148944438b27782d5b8100cc1","modified":1509377275000},{"_id":"themes/Daily/.git/objects/pack/pack-b37eaafe2a81c5b68be9f92db2faee9ce540c640.idx","hash":"124b0bb5ac388b9b06135c2bd5868bdcaab4cdf0","modified":1508339180000},{"_id":"themes/Daily/.git/refs/heads/master","hash":"cb4aac74b14d4a0407b1461469b320ce23d2bc0d","modified":1508339180000},{"_id":"source/img/webSocket/wechat.JPG","hash":"763451cce239d8058c1932f27235e9d05559803c","modified":1509362286000},{"_id":"themes/Daily/.git/logs/refs/heads/master","hash":"fa1cd416190ca4d16df70c9050f75a61ae3654ca","modified":1508339180000},{"_id":"themes/Daily/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1508339180000},{"_id":"themes/Daily/.git/objects/pack/pack-b37eaafe2a81c5b68be9f92db2faee9ce540c640.pack","hash":"34d03e85327062e9e938e66705955cecf985fcf2","modified":1508339180000},{"_id":"themes/Daily/.git/logs/refs/remotes/origin/HEAD","hash":"fa1cd416190ca4d16df70c9050f75a61ae3654ca","modified":1508339180000},{"_id":"public/2018/04/28/git/index.html","hash":"c096dadb3fd3d0291e76261fbfdbcc4ddb911a52","modified":1525181721131},{"_id":"public/2018/02/27/recursion/index.html","hash":"42767af97527d93622cb72a73af4e7b980346cf3","modified":1525181721134},{"_id":"public/2018/01/26/debounce-throttle/index.html","hash":"eb176b531f92513a708cd96808e8d2a6b38f1069","modified":1525181721134},{"_id":"public/2017/10/31/websocket/index.html","hash":"4b0b249a971666e554f3d93e98da822e6f2064d3","modified":1525181721134},{"_id":"public/archives/index.html","hash":"721bbf6229028fec622e7a78f9b4148015f6549a","modified":1525181721134},{"_id":"public/archives/2017/index.html","hash":"7cfce2c78b053b5d34935c9f6bc09ee36e3b6e77","modified":1525181721134},{"_id":"public/archives/2017/10/index.html","hash":"3f2d8720b890d2d7a04d5dfd4277872273d7d59d","modified":1525181721135},{"_id":"public/archives/2017/11/index.html","hash":"4711d3349944870446888d6b8a47b5f33b1050d3","modified":1525181721135},{"_id":"public/archives/2017/12/index.html","hash":"9460df1158b5e862e4a47f60937453056ef4a471","modified":1525181721135},{"_id":"public/archives/2018/index.html","hash":"474e5754b6b159f2546041d7c6e00703f317f947","modified":1525181721135},{"_id":"public/archives/2018/01/index.html","hash":"d38ace30eb5c1c164796553358093b54c693e15b","modified":1525181721135},{"_id":"public/archives/2018/02/index.html","hash":"c416299ddb8ffa12726a999457f3d9d81675fa5d","modified":1525181721135},{"_id":"public/archives/2018/03/index.html","hash":"52a811c428504e7f56879f7cc876e3d76633aac7","modified":1525181721135},{"_id":"public/archives/2018/04/index.html","hash":"7bbe528ec4103f907be96c5468cf4ae1ac464742","modified":1525181721135},{"_id":"public/2018/03/28/css/index.html","hash":"b8a521f76cbb3aae048b1cb28767cfae5b57f260","modified":1525181721135},{"_id":"public/2017/12/28/guide/index.html","hash":"9aae4f9e1203af847b3e68008b0c01fd99e006c0","modified":1525181721135},{"_id":"public/2017/11/23/npm/index.html","hash":"606aa0c2167a0c52fe938630a7b0ace3ae66e54a","modified":1525181721135},{"_id":"public/index.html","hash":"037d50e5404849265223b9737ef5959d992f638c","modified":1525181721137},{"_id":"public/images/arrow-right.svg","hash":"98c04bf1be3ca657f1e9697dc63219ade0a5616c","modified":1525181721137},{"_id":"public/images/arrow-left.svg","hash":"4230dcb796a40d7a0f54c68e1ffb1f325ad962a5","modified":1525181721138},{"_id":"public/images/github.svg","hash":"bc2e3f2e54c354acfe64899482f6379d25f04792","modified":1525181721138},{"_id":"public/images/mail.svg","hash":"18b3549b0447d605ca252fefcaa4d8e11179ce21","modified":1525181721138},{"_id":"public/images/menu.svg","hash":"a1837ac76bc3e2aaf30450941bfefcb29ba16411","modified":1525181721138},{"_id":"public/images/twitter.svg","hash":"2bef6c843de0113721c6c5d1676385897a22a446","modified":1525181721138},{"_id":"public/images/weibo.svg","hash":"ffd43d8ae9f9ec4f5ae8b97cafa9023ac2a4e59b","modified":1525181721138},{"_id":"public/img/webSocket/WechatIMG10.jpeg","hash":"3035306fbae441c148944438b27782d5b8100cc1","modified":1525181721158},{"_id":"public/js/app.js","hash":"b74710d1dd7b7d1407b4fcfc9499bc37de69b21e","modified":1525181721160},{"_id":"public/css/style.css","hash":"ce7d2b36385f47327b4dc46bbd939d64ac175d06","modified":1525181721160},{"_id":"public/img/webSocket/wechat.JPG","hash":"763451cce239d8058c1932f27235e9d05559803c","modified":1525181721163}],"Category":[],"Data":[],"Page":[],"Post":[{"title":"重拾那些逐渐退化的CSS能力","date":"2018-03-28T00:00:00.000Z","_content":"\n在这个js当道的前端届里，号称要用js写操作系统，js真的牛逼啊，写得了前端，做得了后台，码得了客户端桌面应用，不管是小程序还是新出的快应用统统都离不开js,谁还记得曾经的那个页面仔。与一个像素去较真，写了不知道多少牛逼哄哄的hack，多少个日与夜在做IE兼容。如今你有多久没有关注过html、css的更新，你的css能力退化了吗？\n\n<!--more-->\n\n### 源起\nspan元素是否可以用padding撑开宽高，”不能啊”！真的吗，确定没有记错吗，来，实验是检验真理的唯一标准。\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n\t<title></title>\n</head>\n<style type=\"text/css\">\n\tbody{margin: 0;padding: 0}\n\tdiv{\n\t\tcolor: #000;\n\t\t/*margin-bottom: 30px;*/ /*取消注释第二步，运行看效果*/\n\t}\n\tspan{\n\t\tpadding:20px;\n\t\tbackground-color: #000;\n\t\tcolor: #fff;\n\t\ttext-align: center;\n\t\tfont-size: 20px;\n\t\tmargin:20px;\n\t}\n\t\n</style>\n<body>\n\t<!-- <div>神奇啊</div> --> <!-- 取消注释第一步，运行看效果 -->\n\t<span>我是span</span>\t\n</div>\n</body>\n</html>\n```\n由此我们可以得出：\n\n```\nspan设置内外边距问题\n1、margin：\nspan标签设置margin-left/right均好使，margin-top/bottom不好使；\n2、padding： \nspan标签设置padding好使，但span标签上面无元素时，padding-top 不好使；span标签上面有元素时，padding-top会把上面的元素盖住.\n```\n天啊，太神奇了！太神奇了！为什么，为什么啊？？？？\n等等，我还有疑问，那span可以设置line-height撑开里面的高度吗？\n### html元素的标签分类\n曾经我的字典里只有行内元素和块级元素，inline & block，事实上：\n![GitHub set up](https://shuangmuyingzi.github.io/img/cssTu.png)\nHTML5中，元素主要分为7类：\nMetadata\nFlow\nSectioning\nHeading\nPhrasing\nEmbedded\nInteractive\n这些分类集合互相之间也存在一定的交集(一个元素可以同时属于多个分类)\n#### Metadata（元数据元素）\n顾名思义，Metadata元素意指那些定义文档元数据信息的元素 — 其作用包括：影响文档中其它节点的展现与行为、定义文档与其它外部资源之间的关系等。\n\n```\nbase, link, meta, noscript, script, style, template, title\n```\n#### Flow（流式元素）\n所有可以放在body标签内，构成文档内容的元素均属于Flow元素。因此，除了base, link, meta, style, title等只能放在head标签内的元素外，剩下的所有元素均属于Flow元素。\n\n```\na， abbr， address， area（如果它是map元素的后裔）， article， aside， audio， b， bdi， bdo， blockquote， br， button， canvas， cite， code， command， datalist， del， details， dfn， div， dl，em， embed， fieldset， figure， footer， form， h1， h2， h3， h4， h5， h6， header， hgroup， hr， i， iframe， img， input， ins， kbd， keygen， label， map， mark， math， menu， meter，nav， noscript， object， ol， output， p， pre， progress， q， ruby， s， samp， script， section， select， small， span， strong， style（如果该元素设置了scoped属性）， sub， sup， svg， table，textarea， time， u， ul， var， video， wbr， text\n```\n#### Sectioning（章节元素）\nSectioning意指定义页面结构的元素\n\n```\narticle, aside, nav, section\n```\n#### Heading（标题元素）\n所有标题元素属于Heading\n\n```\nh1, h2, h3, h4, h5, h6\n```\n\n#### Phrasing（段落元素）\n所有可以放在p标签内，构成段落内容的元素均属于Phrasing元素。因此，所有Phrasing元素均属于Flow元素。在HTML5标准文档中，关于Phrasing元素的原始定义为：\n\n```\nPhrasing content is the text of the document, as well as elements that mark up that text at the intra-paragraph level. Runs of phrasing content form paragraphs.\n```\n对于这一定义，个人认为不应当使用“text”这一容易引起误解的词，事实上，一个元素即使不是文本，只要能包含在p标签中成为段落内容的一部分，就可以称之为Phrasing元素。\n\n```\na（如果其只包含段落式元素）， abbr， area（如果它是map元素的后裔）， audio， b， bdi， bdo， br， button， canvas， cite， code， command， datalist， del（如果其只包含段落式元素）， dfn， em， embed， i，iframe， img， input， ins（如果其只包含段落式元素）， kbd， keygen， label， map（如果其只包含段落式元素）， mark， math， meter， noscript， object， output， progress， q， ruby， s， samp， script，select， small， span， strong， sub， sup， svg， textarea， time， u， var， video， wbr， text\n```\n#### Embedded（嵌入元素）\n所有用于在网页中嵌入外部资源的元素均属于Embedded元素\n\n```\naudio, video, img, canvas, svg, iframe, embed, object, math\n```\n#### Interactive（交互元素）\n所有与用户交互有关的元素均属于Interactive元素。\n\n```\na， audio（如果设置了controls属性）， button， details， embed， iframe， img（如果设置了usemap属性）， input（如果type属性不为hidden状态）， keygen， label， menu（如果type属性为toolbar状态），object（如果设置了usemap属性）， select， textarea， video（如果设置了controls属性）\n```\n#### Palpable\n所有应当拥有子元素的元素称之为Palpable元素。比如，br元素因不需要子元素，因此也就不属于Palpable。\n\nScript-supporting\n自身不做任何页面展现，但与页面脚本相关的元素\n\n```\nscript, template\n```\n其实这是非规范的，所以不是强求的，新的分类定义了元素的内容模型(Content Model),关键还是要清楚这些元素的特性以及各大浏览器是如何渲染解析的，包括有哪些默认的样式,从而正确嵌套标签以及设置reset.css。\nhttps://html.spec.whatwg.org/multipage/indices.html#element-content-categories\n### W3C 标准盒模型 & IE 怪异盒模型\n页面上显示的每个元素（包括内联元素）都可以看作一个盒子，即盒模型(box model) 盒模型由 4 部分组成，从内到外分别是：`content` `padding` `border` `margin`\n\n![GitHub set up](https://shuangmuyingzi.github.io/img/box-sizing.png)\n`W3C标准盒模型`一个元素的宽度（高度以此类推）应该这样计算：\n\n```\n一个元素的宽度 =  content\n盒子总宽度 = margin-left + border-left + padding-left + width + padding-right + border-right + margin-right\n```\n`而IE 怪异盒模型`一个元素的宽度（高度以此类推）却是这样计算的：\n\n```\n一个元素的宽度 =  content + padding + border\n盒子总宽度 = margin-left + width + margin-right\n```\n#### 解决方案 box-sizing\n```\n// W3C 标准盒模型（浏览器默认）\nbox-sizing: content-box;\n// IE 怪异盒模型\nbox-sizing: border-box;\n```\n当我们设置 box-sizing: border-box; 时，border 和 padding 就被包含在了宽高之内,和IE在非标准的模式下是一致的。\n然而好像看到很多网站为了避免同一份 css 在不同浏览器下表现不同，基本会加上：\n\n```\n*, *:before, *:after {\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n```\n#### 文档类型（Doctype）\n亲测了下，发现其实当头部设置了html5的头部声明<!DOCTYPE html>，在IE下也全是标准的盒模型了，估计除了历史遗留下的网站，新的全是html5的声明，HTML5 不基于 SGML，所以不需要引用 DTD。可能也就只有一些老家伙才经历过图下的历史：\n![GitHub set up](https://shuangmuyingzi.github.io/img/doctype.png)\n如果有兴趣推荐看这篇关于声明的具体元素意思，毕竟其实很多医院系统，学校系统，政府系统之类可能还是会有旧的，了解下也好。\nhttps://www.jianshu.com/p/c3dcdad42e6d\n\n#### 理解CSS布局和BFC\nCSS布局中有一些概念，一旦理解了这些概念，就能真正的提高你的CSS能力。这篇文章主要介绍的是关于块格式化上下文（Block Formatting Context），也就是大家俗称的BFC。\n\n它是W3C CSS2.1规范中的一个概念。它是页面中的一块渲染区域，并且有一套渲染规则，它决定了其子元素将如何定位，以及和其他元素的关系和相互作用。也就是说我们平时在布局的时候，它默默地提供了一个环境，使得HTML元素在这个环境中按照一定规则进行布局。\n\n最常见的formatting context有Block Formatting Context(BFC)和Inline Formatting Context(IFC)，CSS3中还增加了GridLayout Formatting Context(GFC)和Flex Formatting Context(FFC)。\n\nBFC的布局规则与触发规则\n刚才我们说到BFC中的元素有一套规定的布局规则：\n\n```\n内部的元素会在垂直方向一个接一个地放置\n元素垂直方向的距离由margin决定，属于同一个BFC的两个相邻元素的margin会发生重叠\n每个元素的左外边距与包含块的左边界相接触(对于从左往右，否则相反)，即使存在浮动也是如此\nBFC的区域不会与float元素重叠\n计算BFC的高度时，浮动元素也参与计算\nBFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素，反之也如此\n```\n刚才我们又提到BFC是一块渲染区域，那这块渲染区域到底在哪，它又是有多大，这些由生成BFC的元素来决定，CSS2.1中规定满足下列CSS声明的元素便会生成BFC（触发规则）：\n\n```\n根元素\nfloat的值不为none\noverflow的值不为visible\nposition的值为absolute或fixed\ndisplay的值为inline-block, table-cell, table-caption, flex, inline-flex, grid\n注：display: table也认为可以生成BFC，主要原因是table会默认生成一个匿名的table-cell，正是这个匿名的table-cell生成了BFC\n```\n上面这些CSS声明的元素生成了BFC，而它们本身并不是BFC，这一点需要区分。\n#### 防止垂直margin重叠\n有点布局经验的朋友都知道margin collapse，也就是相邻的垂直元素同时设置了margin后，实际margin值会塌陷到其中较大的那个值。其根本原理就是它们处于同一个BFC，符合“属于同一个BFC的两个相邻元素的margin会发生重叠”的规则。\n\n我们可以在其中一个元素外面包裹一层容器，并触发该容器生成一个BFC。那么两个元素便属于不同的BFC，就不会发生margin重叠了：\n\n```\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n\t<meta charset=\"UTF-8\">\n\t<title>防止垂直margin重叠</title>\n</head>\n<style>\n    /*.wrap{\n        overflow: hidden;\n    }\n    p{\n        width: 200px;\n        line-height: 100px;\n        margin: 100px;\n        background: #000;\n        color: #fff;\n        text-align: center;\n    }*/\n    .outer { background-color: #ccc; margin: 0 0 40px 0; /*overflow: auto;*/} \n    p { padding: 0; margin: 20px 0 20px 0; background-color: rgb(233,78,119); color: #fff; }\n</style>\n<body>\n    <!-- <p>我属于一个BFC</p>\n    <div class=\"wrap\">\n        <p>我属于另一个BFC</p>\n    </div> -->\n    <div class=\"outer\">\n        <p>我是P</p>\n        <p>我是另一个P</p>\n    </div>\n</body>\n</html>\n\n```\n防止浮动子元素高度塌陷\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n\t<meta charset=\"UTF-8\">\n\t<title>防止浮动子元素高度塌陷</title>\n</head>\n<style>\n    .outer { border: 5px dotted rgb(214,129,137); border-radius: 5px; width: 450px; padding: 10px; margin-bottom: 40px;/*overflow: hidden;*/ } \n    .float { padding: 10px; border: 5px solid rgba(214,129,137,.4); border-radius: 5px; background-color: rgba(233,78,119,.4); color: #fff; float: left; width: 200px; margin: 0 20px 0 0; }\n</style>\n<body>\n    <div class=\"outer\"> \n    \t<div class=\"float\">我是浮动</div> \n    \t我会包裹着浮动\n    </div>\n</body>\n</html>\n```\n如果我们将.outer元素的overflow: hidden去掉，那么.outer元素就获取不到浮动元素的高度了。但是加上overflow属性后触发了BFC，计算BFC的高度时，浮动元素也参与了计算。\n\n防止文字（或其他元素）环绕\n\n```\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n\t<meta charset=\"UTF-8\">\n\t<title>防止文字（或其他元素）环绕</title>\n</head>\n<style>\n    .parent{\n        width: 300px;\n        border: 3px solid #000;\n    }\n    .child{\n        float: left;\n        width: 100px;\n        height: 100px;\n        border: 3px solid #f00;\n        color: #f00;\n    }\n    .text{\n        /*overflow: hidden;*/\n    }\n</style>\n<body>\n    <div class=\"parent\">\n        <div class=\"child\">float: left</div>\n        <div class=\"text\">我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕</div>\n    </div>\n</body>\n</html>\n```\n正常情况下，如果一个块级元素设置成了float，那么他的兄弟元素会环绕其布局。这里我们给.text加上overflow，文字所在的区域就产生了BFC，元素的左边总是触碰到容器的左边，即使存在浮动也是如此。\n\n以上的都是BFC常见的应用场景以及它的触发规则，\n接下来我们来看看BFC新的触发条件。\n\n#### 创建BFC的新方式\n使用overflow或其他的方法创建BFC时会有两个问题。首先，这些方法本身是有自身的设计目的，所以在使用它们创建BFC时可能会产生副作用。例如，使用overflow创建BFC后在某些情况下可能会看到出现一个滚动条或者元素内容被裁切。这是由于overflow属性的设计是用来让你告诉浏览器如何定义元素的溢出状态的。\n\n最安全的做法应该是创建一个BFC时并不会带来任何副作用，它内部的元素都安全的呆在这个迷你布局中，这种方法不会引起任何意想不到的问题，也可以理解开发者的意图。CSS工作组也十分认同这种想法，所以他们定制了一个新的属性值：display:flow-root。\n\n![GitHub set up](https://shuangmuyingzi.github.io/img/flow-root.png)\n\nCaniuse上display:flow-root各浏览器兼容情况。\n\n```\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n\t<meta charset=\"UTF-8\">\n\t<title>flow-root</title>\n</head>\n<style>\n    .parent{\n        width: 300px;\n        border: 3px solid #000;\n    }\n    .child{\n        float: left;\n        width: 100px;\n        height: 100px;\n        border: 3px solid #f00;\n        color: #f00;\n    }\n    .text{\n        display: flow-root;\n    }\n</style>\n<body>\n    <div class=\"parent\">\n        <div class=\"child\">float: left</div>\n        <div class=\"text\">我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕</div>\n    </div>\n</body>\n</html>\n```\nvertical-center(水平垂直居中)\n仅居中元素定宽高适用：\n\n[absolute + 负margin](http://yanhaijing.com/vertical-center/absolute1.html)\n[absolute + margin auto](http://yanhaijing.com/vertical-center/absolute2.html)\n[absolute + calc](http://yanhaijing.com/vertical-center/absolute3.html)\n居中元素不定宽高适用：\n\n[absolute + transform](http://yanhaijing.com/vertical-center/absolute4.html)\n[writing-mode](http://yanhaijing.com/vertical-center/writing-mode.html)\n[lineheight](http://yanhaijing.com/vertical-center/lineheight.html)\n[table](http://yanhaijing.com/vertical-center/table.html)\n[css-table](http://yanhaijing.com/vertical-center/css-table.html)\n[flex](http://yanhaijing.com/vertical-center/flex.html)\n[grid](http://yanhaijing.com/vertical-center/grid.html)\n参考链接：\nhttps://www.w3cplus.com/css/understanding-css-layout-block-formatting-context.html\nhttps://segmentfault.com/a/1190000011211625\n\n","source":"_posts/css.md","raw":"---\ntitle: 重拾那些逐渐退化的CSS能力\ndate: 2018-03-28\nphoto: https://shuangmuyingzi.github.io/img/npm.jpg\n---\n\n在这个js当道的前端届里，号称要用js写操作系统，js真的牛逼啊，写得了前端，做得了后台，码得了客户端桌面应用，不管是小程序还是新出的快应用统统都离不开js,谁还记得曾经的那个页面仔。与一个像素去较真，写了不知道多少牛逼哄哄的hack，多少个日与夜在做IE兼容。如今你有多久没有关注过html、css的更新，你的css能力退化了吗？\n\n<!--more-->\n\n### 源起\nspan元素是否可以用padding撑开宽高，”不能啊”！真的吗，确定没有记错吗，来，实验是检验真理的唯一标准。\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n\t<title></title>\n</head>\n<style type=\"text/css\">\n\tbody{margin: 0;padding: 0}\n\tdiv{\n\t\tcolor: #000;\n\t\t/*margin-bottom: 30px;*/ /*取消注释第二步，运行看效果*/\n\t}\n\tspan{\n\t\tpadding:20px;\n\t\tbackground-color: #000;\n\t\tcolor: #fff;\n\t\ttext-align: center;\n\t\tfont-size: 20px;\n\t\tmargin:20px;\n\t}\n\t\n</style>\n<body>\n\t<!-- <div>神奇啊</div> --> <!-- 取消注释第一步，运行看效果 -->\n\t<span>我是span</span>\t\n</div>\n</body>\n</html>\n```\n由此我们可以得出：\n\n```\nspan设置内外边距问题\n1、margin：\nspan标签设置margin-left/right均好使，margin-top/bottom不好使；\n2、padding： \nspan标签设置padding好使，但span标签上面无元素时，padding-top 不好使；span标签上面有元素时，padding-top会把上面的元素盖住.\n```\n天啊，太神奇了！太神奇了！为什么，为什么啊？？？？\n等等，我还有疑问，那span可以设置line-height撑开里面的高度吗？\n### html元素的标签分类\n曾经我的字典里只有行内元素和块级元素，inline & block，事实上：\n![GitHub set up](https://shuangmuyingzi.github.io/img/cssTu.png)\nHTML5中，元素主要分为7类：\nMetadata\nFlow\nSectioning\nHeading\nPhrasing\nEmbedded\nInteractive\n这些分类集合互相之间也存在一定的交集(一个元素可以同时属于多个分类)\n#### Metadata（元数据元素）\n顾名思义，Metadata元素意指那些定义文档元数据信息的元素 — 其作用包括：影响文档中其它节点的展现与行为、定义文档与其它外部资源之间的关系等。\n\n```\nbase, link, meta, noscript, script, style, template, title\n```\n#### Flow（流式元素）\n所有可以放在body标签内，构成文档内容的元素均属于Flow元素。因此，除了base, link, meta, style, title等只能放在head标签内的元素外，剩下的所有元素均属于Flow元素。\n\n```\na， abbr， address， area（如果它是map元素的后裔）， article， aside， audio， b， bdi， bdo， blockquote， br， button， canvas， cite， code， command， datalist， del， details， dfn， div， dl，em， embed， fieldset， figure， footer， form， h1， h2， h3， h4， h5， h6， header， hgroup， hr， i， iframe， img， input， ins， kbd， keygen， label， map， mark， math， menu， meter，nav， noscript， object， ol， output， p， pre， progress， q， ruby， s， samp， script， section， select， small， span， strong， style（如果该元素设置了scoped属性）， sub， sup， svg， table，textarea， time， u， ul， var， video， wbr， text\n```\n#### Sectioning（章节元素）\nSectioning意指定义页面结构的元素\n\n```\narticle, aside, nav, section\n```\n#### Heading（标题元素）\n所有标题元素属于Heading\n\n```\nh1, h2, h3, h4, h5, h6\n```\n\n#### Phrasing（段落元素）\n所有可以放在p标签内，构成段落内容的元素均属于Phrasing元素。因此，所有Phrasing元素均属于Flow元素。在HTML5标准文档中，关于Phrasing元素的原始定义为：\n\n```\nPhrasing content is the text of the document, as well as elements that mark up that text at the intra-paragraph level. Runs of phrasing content form paragraphs.\n```\n对于这一定义，个人认为不应当使用“text”这一容易引起误解的词，事实上，一个元素即使不是文本，只要能包含在p标签中成为段落内容的一部分，就可以称之为Phrasing元素。\n\n```\na（如果其只包含段落式元素）， abbr， area（如果它是map元素的后裔）， audio， b， bdi， bdo， br， button， canvas， cite， code， command， datalist， del（如果其只包含段落式元素）， dfn， em， embed， i，iframe， img， input， ins（如果其只包含段落式元素）， kbd， keygen， label， map（如果其只包含段落式元素）， mark， math， meter， noscript， object， output， progress， q， ruby， s， samp， script，select， small， span， strong， sub， sup， svg， textarea， time， u， var， video， wbr， text\n```\n#### Embedded（嵌入元素）\n所有用于在网页中嵌入外部资源的元素均属于Embedded元素\n\n```\naudio, video, img, canvas, svg, iframe, embed, object, math\n```\n#### Interactive（交互元素）\n所有与用户交互有关的元素均属于Interactive元素。\n\n```\na， audio（如果设置了controls属性）， button， details， embed， iframe， img（如果设置了usemap属性）， input（如果type属性不为hidden状态）， keygen， label， menu（如果type属性为toolbar状态），object（如果设置了usemap属性）， select， textarea， video（如果设置了controls属性）\n```\n#### Palpable\n所有应当拥有子元素的元素称之为Palpable元素。比如，br元素因不需要子元素，因此也就不属于Palpable。\n\nScript-supporting\n自身不做任何页面展现，但与页面脚本相关的元素\n\n```\nscript, template\n```\n其实这是非规范的，所以不是强求的，新的分类定义了元素的内容模型(Content Model),关键还是要清楚这些元素的特性以及各大浏览器是如何渲染解析的，包括有哪些默认的样式,从而正确嵌套标签以及设置reset.css。\nhttps://html.spec.whatwg.org/multipage/indices.html#element-content-categories\n### W3C 标准盒模型 & IE 怪异盒模型\n页面上显示的每个元素（包括内联元素）都可以看作一个盒子，即盒模型(box model) 盒模型由 4 部分组成，从内到外分别是：`content` `padding` `border` `margin`\n\n![GitHub set up](https://shuangmuyingzi.github.io/img/box-sizing.png)\n`W3C标准盒模型`一个元素的宽度（高度以此类推）应该这样计算：\n\n```\n一个元素的宽度 =  content\n盒子总宽度 = margin-left + border-left + padding-left + width + padding-right + border-right + margin-right\n```\n`而IE 怪异盒模型`一个元素的宽度（高度以此类推）却是这样计算的：\n\n```\n一个元素的宽度 =  content + padding + border\n盒子总宽度 = margin-left + width + margin-right\n```\n#### 解决方案 box-sizing\n```\n// W3C 标准盒模型（浏览器默认）\nbox-sizing: content-box;\n// IE 怪异盒模型\nbox-sizing: border-box;\n```\n当我们设置 box-sizing: border-box; 时，border 和 padding 就被包含在了宽高之内,和IE在非标准的模式下是一致的。\n然而好像看到很多网站为了避免同一份 css 在不同浏览器下表现不同，基本会加上：\n\n```\n*, *:before, *:after {\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n```\n#### 文档类型（Doctype）\n亲测了下，发现其实当头部设置了html5的头部声明<!DOCTYPE html>，在IE下也全是标准的盒模型了，估计除了历史遗留下的网站，新的全是html5的声明，HTML5 不基于 SGML，所以不需要引用 DTD。可能也就只有一些老家伙才经历过图下的历史：\n![GitHub set up](https://shuangmuyingzi.github.io/img/doctype.png)\n如果有兴趣推荐看这篇关于声明的具体元素意思，毕竟其实很多医院系统，学校系统，政府系统之类可能还是会有旧的，了解下也好。\nhttps://www.jianshu.com/p/c3dcdad42e6d\n\n#### 理解CSS布局和BFC\nCSS布局中有一些概念，一旦理解了这些概念，就能真正的提高你的CSS能力。这篇文章主要介绍的是关于块格式化上下文（Block Formatting Context），也就是大家俗称的BFC。\n\n它是W3C CSS2.1规范中的一个概念。它是页面中的一块渲染区域，并且有一套渲染规则，它决定了其子元素将如何定位，以及和其他元素的关系和相互作用。也就是说我们平时在布局的时候，它默默地提供了一个环境，使得HTML元素在这个环境中按照一定规则进行布局。\n\n最常见的formatting context有Block Formatting Context(BFC)和Inline Formatting Context(IFC)，CSS3中还增加了GridLayout Formatting Context(GFC)和Flex Formatting Context(FFC)。\n\nBFC的布局规则与触发规则\n刚才我们说到BFC中的元素有一套规定的布局规则：\n\n```\n内部的元素会在垂直方向一个接一个地放置\n元素垂直方向的距离由margin决定，属于同一个BFC的两个相邻元素的margin会发生重叠\n每个元素的左外边距与包含块的左边界相接触(对于从左往右，否则相反)，即使存在浮动也是如此\nBFC的区域不会与float元素重叠\n计算BFC的高度时，浮动元素也参与计算\nBFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素，反之也如此\n```\n刚才我们又提到BFC是一块渲染区域，那这块渲染区域到底在哪，它又是有多大，这些由生成BFC的元素来决定，CSS2.1中规定满足下列CSS声明的元素便会生成BFC（触发规则）：\n\n```\n根元素\nfloat的值不为none\noverflow的值不为visible\nposition的值为absolute或fixed\ndisplay的值为inline-block, table-cell, table-caption, flex, inline-flex, grid\n注：display: table也认为可以生成BFC，主要原因是table会默认生成一个匿名的table-cell，正是这个匿名的table-cell生成了BFC\n```\n上面这些CSS声明的元素生成了BFC，而它们本身并不是BFC，这一点需要区分。\n#### 防止垂直margin重叠\n有点布局经验的朋友都知道margin collapse，也就是相邻的垂直元素同时设置了margin后，实际margin值会塌陷到其中较大的那个值。其根本原理就是它们处于同一个BFC，符合“属于同一个BFC的两个相邻元素的margin会发生重叠”的规则。\n\n我们可以在其中一个元素外面包裹一层容器，并触发该容器生成一个BFC。那么两个元素便属于不同的BFC，就不会发生margin重叠了：\n\n```\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n\t<meta charset=\"UTF-8\">\n\t<title>防止垂直margin重叠</title>\n</head>\n<style>\n    /*.wrap{\n        overflow: hidden;\n    }\n    p{\n        width: 200px;\n        line-height: 100px;\n        margin: 100px;\n        background: #000;\n        color: #fff;\n        text-align: center;\n    }*/\n    .outer { background-color: #ccc; margin: 0 0 40px 0; /*overflow: auto;*/} \n    p { padding: 0; margin: 20px 0 20px 0; background-color: rgb(233,78,119); color: #fff; }\n</style>\n<body>\n    <!-- <p>我属于一个BFC</p>\n    <div class=\"wrap\">\n        <p>我属于另一个BFC</p>\n    </div> -->\n    <div class=\"outer\">\n        <p>我是P</p>\n        <p>我是另一个P</p>\n    </div>\n</body>\n</html>\n\n```\n防止浮动子元素高度塌陷\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n\t<meta charset=\"UTF-8\">\n\t<title>防止浮动子元素高度塌陷</title>\n</head>\n<style>\n    .outer { border: 5px dotted rgb(214,129,137); border-radius: 5px; width: 450px; padding: 10px; margin-bottom: 40px;/*overflow: hidden;*/ } \n    .float { padding: 10px; border: 5px solid rgba(214,129,137,.4); border-radius: 5px; background-color: rgba(233,78,119,.4); color: #fff; float: left; width: 200px; margin: 0 20px 0 0; }\n</style>\n<body>\n    <div class=\"outer\"> \n    \t<div class=\"float\">我是浮动</div> \n    \t我会包裹着浮动\n    </div>\n</body>\n</html>\n```\n如果我们将.outer元素的overflow: hidden去掉，那么.outer元素就获取不到浮动元素的高度了。但是加上overflow属性后触发了BFC，计算BFC的高度时，浮动元素也参与了计算。\n\n防止文字（或其他元素）环绕\n\n```\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n\t<meta charset=\"UTF-8\">\n\t<title>防止文字（或其他元素）环绕</title>\n</head>\n<style>\n    .parent{\n        width: 300px;\n        border: 3px solid #000;\n    }\n    .child{\n        float: left;\n        width: 100px;\n        height: 100px;\n        border: 3px solid #f00;\n        color: #f00;\n    }\n    .text{\n        /*overflow: hidden;*/\n    }\n</style>\n<body>\n    <div class=\"parent\">\n        <div class=\"child\">float: left</div>\n        <div class=\"text\">我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕</div>\n    </div>\n</body>\n</html>\n```\n正常情况下，如果一个块级元素设置成了float，那么他的兄弟元素会环绕其布局。这里我们给.text加上overflow，文字所在的区域就产生了BFC，元素的左边总是触碰到容器的左边，即使存在浮动也是如此。\n\n以上的都是BFC常见的应用场景以及它的触发规则，\n接下来我们来看看BFC新的触发条件。\n\n#### 创建BFC的新方式\n使用overflow或其他的方法创建BFC时会有两个问题。首先，这些方法本身是有自身的设计目的，所以在使用它们创建BFC时可能会产生副作用。例如，使用overflow创建BFC后在某些情况下可能会看到出现一个滚动条或者元素内容被裁切。这是由于overflow属性的设计是用来让你告诉浏览器如何定义元素的溢出状态的。\n\n最安全的做法应该是创建一个BFC时并不会带来任何副作用，它内部的元素都安全的呆在这个迷你布局中，这种方法不会引起任何意想不到的问题，也可以理解开发者的意图。CSS工作组也十分认同这种想法，所以他们定制了一个新的属性值：display:flow-root。\n\n![GitHub set up](https://shuangmuyingzi.github.io/img/flow-root.png)\n\nCaniuse上display:flow-root各浏览器兼容情况。\n\n```\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n\t<meta charset=\"UTF-8\">\n\t<title>flow-root</title>\n</head>\n<style>\n    .parent{\n        width: 300px;\n        border: 3px solid #000;\n    }\n    .child{\n        float: left;\n        width: 100px;\n        height: 100px;\n        border: 3px solid #f00;\n        color: #f00;\n    }\n    .text{\n        display: flow-root;\n    }\n</style>\n<body>\n    <div class=\"parent\">\n        <div class=\"child\">float: left</div>\n        <div class=\"text\">我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕</div>\n    </div>\n</body>\n</html>\n```\nvertical-center(水平垂直居中)\n仅居中元素定宽高适用：\n\n[absolute + 负margin](http://yanhaijing.com/vertical-center/absolute1.html)\n[absolute + margin auto](http://yanhaijing.com/vertical-center/absolute2.html)\n[absolute + calc](http://yanhaijing.com/vertical-center/absolute3.html)\n居中元素不定宽高适用：\n\n[absolute + transform](http://yanhaijing.com/vertical-center/absolute4.html)\n[writing-mode](http://yanhaijing.com/vertical-center/writing-mode.html)\n[lineheight](http://yanhaijing.com/vertical-center/lineheight.html)\n[table](http://yanhaijing.com/vertical-center/table.html)\n[css-table](http://yanhaijing.com/vertical-center/css-table.html)\n[flex](http://yanhaijing.com/vertical-center/flex.html)\n[grid](http://yanhaijing.com/vertical-center/grid.html)\n参考链接：\nhttps://www.w3cplus.com/css/understanding-css-layout-block-formatting-context.html\nhttps://segmentfault.com/a/1190000011211625\n\n","slug":"css","published":1,"updated":"2018-05-01T12:24:40.084Z","photos":["https://shuangmuyingzi.github.io/img/npm.jpg"],"comments":1,"layout":"post","link":"","_id":"cjgnpte600000u06x7zd5wxfp","content":"<p>在这个js当道的前端届里，号称要用js写操作系统，js真的牛逼啊，写得了前端，做得了后台，码得了客户端桌面应用，不管是小程序还是新出的快应用统统都离不开js,谁还记得曾经的那个页面仔。与一个像素去较真，写了不知道多少牛逼哄哄的hack，多少个日与夜在做IE兼容。如今你有多久没有关注过html、css的更新，你的css能力退化了吗？</p>\n<a id=\"more\"></a>\n<h3 id=\"源起\"><a href=\"#源起\" class=\"headerlink\" title=\"源起\"></a>源起</h3><p>span元素是否可以用padding撑开宽高，”不能啊”！真的吗，确定没有记错吗，来，实验是检验真理的唯一标准。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/css\"</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"undefined\">\tbody&#123;margin: 0;padding: 0&#125;</span></div><div class=\"line\"><span class=\"undefined\">\tdiv&#123;</span></div><div class=\"line\"><span class=\"undefined\">\t\tcolor: #000;</span></div><div class=\"line\"><span class=\"undefined\">\t\t/*margin-bottom: 30px;*/ /*取消注释第二步，运行看效果*/</span></div><div class=\"line\"><span class=\"undefined\">\t&#125;</span></div><div class=\"line\"><span class=\"undefined\">\tspan&#123;</span></div><div class=\"line\"><span class=\"undefined\">\t\tpadding:20px;</span></div><div class=\"line\"><span class=\"undefined\">\t\tbackground-color: #000;</span></div><div class=\"line\"><span class=\"undefined\">\t\tcolor: #fff;</span></div><div class=\"line\"><span class=\"undefined\">\t\ttext-align: center;</span></div><div class=\"line\"><span class=\"undefined\">\t\tfont-size: 20px;</span></div><div class=\"line\"><span class=\"undefined\">\t\tmargin:20px;</span></div><div class=\"line\"><span class=\"undefined\">\t&#125;</span></div><div class=\"line\"><span class=\"undefined\">\t</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">\t<span class=\"comment\">&lt;!-- &lt;div&gt;神奇啊&lt;/div&gt; --&gt;</span> <span class=\"comment\">&lt;!-- 取消注释第一步，运行看效果 --&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>我是span<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>\t</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>由此我们可以得出：</p>\n<figure class=\"highlight coq\"><table><tr><td class=\"code\"><pre><div class=\"line\">span设置内外边距问题</div><div class=\"line\"><span class=\"number\">1</span>、margin：</div><div class=\"line\">span标签设置margin-<span class=\"built_in\">left</span>/<span class=\"built_in\">right</span>均好使，margin-<span class=\"built_in\">top</span>/<span class=\"built_in\">bottom</span>不好使；</div><div class=\"line\"><span class=\"number\">2</span>、padding： </div><div class=\"line\">span标签设置padding好使，但span标签上面无元素时，padding-<span class=\"built_in\">top</span> 不好使；span标签上面有元素时，padding-<span class=\"built_in\">top</span>会把上面的元素盖住.</div></pre></td></tr></table></figure>\n<p>天啊，太神奇了！太神奇了！为什么，为什么啊？？？？<br>等等，我还有疑问，那span可以设置line-height撑开里面的高度吗？</p>\n<h3 id=\"html元素的标签分类\"><a href=\"#html元素的标签分类\" class=\"headerlink\" title=\"html元素的标签分类\"></a>html元素的标签分类</h3><p>曾经我的字典里只有行内元素和块级元素，inline &amp; block，事实上：<br><img src=\"https://shuangmuyingzi.github.io/img/cssTu.png\" alt=\"GitHub set up\"><br>HTML5中，元素主要分为7类：<br>Metadata<br>Flow<br>Sectioning<br>Heading<br>Phrasing<br>Embedded<br>Interactive<br>这些分类集合互相之间也存在一定的交集(一个元素可以同时属于多个分类)</p>\n<h4 id=\"Metadata（元数据元素）\"><a href=\"#Metadata（元数据元素）\" class=\"headerlink\" title=\"Metadata（元数据元素）\"></a>Metadata（元数据元素）</h4><p>顾名思义，Metadata元素意指那些定义文档元数据信息的元素 — 其作用包括：影响文档中其它节点的展现与行为、定义文档与其它外部资源之间的关系等。</p>\n<figure class=\"highlight maxima\"><table><tr><td class=\"code\"><pre><div class=\"line\">base, link, meta, noscript, script, <span class=\"built_in\">style</span>, template, <span class=\"built_in\">title</span></div></pre></td></tr></table></figure>\n<h4 id=\"Flow（流式元素）\"><a href=\"#Flow（流式元素）\" class=\"headerlink\" title=\"Flow（流式元素）\"></a>Flow（流式元素）</h4><p>所有可以放在body标签内，构成文档内容的元素均属于Flow元素。因此，除了base, link, meta, style, title等只能放在head标签内的元素外，剩下的所有元素均属于Flow元素。</p>\n<figure class=\"highlight armasm\"><table><tr><td class=\"code\"><pre><div class=\"line\">a， abbr， <span class=\"keyword\">address， </span><span class=\"meta\">area</span>（如果它是<span class=\"meta\">map</span>元素的后裔）， article， aside， audio， <span class=\"keyword\">b， </span><span class=\"keyword\">bdi， </span><span class=\"keyword\">bdo， </span><span class=\"keyword\">blockquote， </span><span class=\"keyword\">br， </span><span class=\"keyword\">button， </span>canvas， cite， <span class=\"meta\">code</span>， command， datalist， del， details， dfn， div， dl，em， embed， fieldset， figure， footer， form， h1， h2， h3， h4， h5， h6， header， hgroup， hr， i， iframe， img， input， ins， kbd， keygen， label， <span class=\"meta\">map</span>， <span class=\"keyword\">mark， </span>math， menu， meter，nav， noscript， object， ol， output， p， pre， progress， q， ruby， s， samp， script， section， <span class=\"keyword\">select， </span>small， span， <span class=\"keyword\">strong， </span>style（如果该元素设置了scoped属性）， <span class=\"keyword\">sub， </span>sup， svg， table，textarea， time， u， ul， var， video， wbr， text</div></pre></td></tr></table></figure>\n<h4 id=\"Sectioning（章节元素）\"><a href=\"#Sectioning（章节元素）\" class=\"headerlink\" title=\"Sectioning（章节元素）\"></a>Sectioning（章节元素）</h4><p>Sectioning意指定义页面结构的元素</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">article</span>, <span class=\"selector-tag\">aside</span>, <span class=\"selector-tag\">nav</span>, section</div></pre></td></tr></table></figure>\n<h4 id=\"Heading（标题元素）\"><a href=\"#Heading（标题元素）\" class=\"headerlink\" title=\"Heading（标题元素）\"></a>Heading（标题元素）</h4><p>所有标题元素属于Heading</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">h1</span>, <span class=\"selector-tag\">h2</span>, <span class=\"selector-tag\">h3</span>, <span class=\"selector-tag\">h4</span>, <span class=\"selector-tag\">h5</span>, h6</div></pre></td></tr></table></figure>\n<h4 id=\"Phrasing（段落元素）\"><a href=\"#Phrasing（段落元素）\" class=\"headerlink\" title=\"Phrasing（段落元素）\"></a>Phrasing（段落元素）</h4><p>所有可以放在p标签内，构成段落内容的元素均属于Phrasing元素。因此，所有Phrasing元素均属于Flow元素。在HTML5标准文档中，关于Phrasing元素的原始定义为：</p>\n<figure class=\"highlight applescript\"><table><tr><td class=\"code\"><pre><div class=\"line\">Phrasing content <span class=\"keyword\">is</span> <span class=\"keyword\">the</span> <span class=\"built_in\">text</span> <span class=\"keyword\">of</span> <span class=\"keyword\">the</span> document, <span class=\"keyword\">as</span> well <span class=\"keyword\">as</span> elements <span class=\"keyword\">that</span> mark up <span class=\"keyword\">that</span> <span class=\"built_in\">text</span> <span class=\"keyword\">at</span> <span class=\"keyword\">the</span> intra-<span class=\"built_in\">paragraph</span> level. Runs <span class=\"keyword\">of</span> phrasing content form <span class=\"built_in\">paragraphs</span>.</div></pre></td></tr></table></figure>\n<p>对于这一定义，个人认为不应当使用“text”这一容易引起误解的词，事实上，一个元素即使不是文本，只要能包含在p标签中成为段落内容的一部分，就可以称之为Phrasing元素。</p>\n<figure class=\"highlight armasm\"><table><tr><td class=\"code\"><pre><div class=\"line\">a（如果其只包含段落式元素）， abbr， <span class=\"meta\">area</span>（如果它是<span class=\"meta\">map</span>元素的后裔）， audio， <span class=\"keyword\">b， </span><span class=\"keyword\">bdi， </span><span class=\"keyword\">bdo， </span><span class=\"keyword\">br， </span><span class=\"keyword\">button， </span>canvas， cite， <span class=\"meta\">code</span>， command， datalist， del（如果其只包含段落式元素）， dfn， em， embed， i，iframe， img， input， ins（如果其只包含段落式元素）， kbd， keygen， label， <span class=\"meta\">map</span>（如果其只包含段落式元素）， <span class=\"keyword\">mark， </span>math， meter， noscript， object， output， progress， q， ruby， s， samp， script，<span class=\"keyword\">select， </span>small， span， <span class=\"keyword\">strong， </span><span class=\"keyword\">sub， </span>sup， svg， textarea， time， u， var， video， wbr， text</div></pre></td></tr></table></figure>\n<h4 id=\"Embedded（嵌入元素）\"><a href=\"#Embedded（嵌入元素）\" class=\"headerlink\" title=\"Embedded（嵌入元素）\"></a>Embedded（嵌入元素）</h4><p>所有用于在网页中嵌入外部资源的元素均属于Embedded元素</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">audio</span>, <span class=\"selector-tag\">video</span>, <span class=\"selector-tag\">img</span>, <span class=\"selector-tag\">canvas</span>, svg, <span class=\"selector-tag\">iframe</span>, embed, <span class=\"selector-tag\">object</span>, math</div></pre></td></tr></table></figure>\n<h4 id=\"Interactive（交互元素）\"><a href=\"#Interactive（交互元素）\" class=\"headerlink\" title=\"Interactive（交互元素）\"></a>Interactive（交互元素）</h4><p>所有与用户交互有关的元素均属于Interactive元素。</p>\n<figure class=\"highlight delphi\"><table><tr><td class=\"code\"><pre><div class=\"line\">a， audio（如果设置了controls属性）， button， details， embed， iframe， img（如果设置了usemap属性）， input（如果<span class=\"keyword\">type</span>属性不为hidden状态）， keygen， <span class=\"keyword\">label</span>， menu（如果<span class=\"keyword\">type</span>属性为toolbar状态），<span class=\"keyword\">object</span>（如果设置了usemap属性）， select， textarea， video（如果设置了controls属性）</div></pre></td></tr></table></figure>\n<h4 id=\"Palpable\"><a href=\"#Palpable\" class=\"headerlink\" title=\"Palpable\"></a>Palpable</h4><p>所有应当拥有子元素的元素称之为Palpable元素。比如，br元素因不需要子元素，因此也就不属于Palpable。</p>\n<p>Script-supporting<br>自身不做任何页面展现，但与页面脚本相关的元素</p>\n<figure class=\"highlight applescript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">script</span>, template</div></pre></td></tr></table></figure>\n<p>其实这是非规范的，所以不是强求的，新的分类定义了元素的内容模型(Content Model),关键还是要清楚这些元素的特性以及各大浏览器是如何渲染解析的，包括有哪些默认的样式,从而正确嵌套标签以及设置reset.css。<br><a href=\"https://html.spec.whatwg.org/multipage/indices.html#element-content-categories\" target=\"_blank\" rel=\"external\">https://html.spec.whatwg.org/multipage/indices.html#element-content-categories</a></p>\n<h3 id=\"W3C-标准盒模型-amp-IE-怪异盒模型\"><a href=\"#W3C-标准盒模型-amp-IE-怪异盒模型\" class=\"headerlink\" title=\"W3C 标准盒模型 &amp; IE 怪异盒模型\"></a>W3C 标准盒模型 &amp; IE 怪异盒模型</h3><p>页面上显示的每个元素（包括内联元素）都可以看作一个盒子，即盒模型(box model) 盒模型由 4 部分组成，从内到外分别是：<code>content</code> <code>padding</code> <code>border</code> <code>margin</code></p>\n<p><img src=\"https://shuangmuyingzi.github.io/img/box-sizing.png\" alt=\"GitHub set up\"><br><code>W3C标准盒模型</code>一个元素的宽度（高度以此类推）应该这样计算：</p>\n<figure class=\"highlight coq\"><table><tr><td class=\"code\"><pre><div class=\"line\">一个元素的宽度 =  content</div><div class=\"line\">盒子总宽度 = margin-<span class=\"built_in\">left</span> + border-<span class=\"built_in\">left</span> + padding-<span class=\"built_in\">left</span> + width + padding-<span class=\"built_in\">right</span> + border-<span class=\"built_in\">right</span> + margin-<span class=\"built_in\">right</span></div></pre></td></tr></table></figure>\n<p><code>而IE 怪异盒模型</code>一个元素的宽度（高度以此类推）却是这样计算的：</p>\n<figure class=\"highlight maxima\"><table><tr><td class=\"code\"><pre><div class=\"line\">一个元素的宽度 =  <span class=\"built_in\">content</span> + padding + <span class=\"built_in\">border</span></div><div class=\"line\">盒子总宽度 = margin-left + <span class=\"built_in\">width</span> + margin-right</div></pre></td></tr></table></figure>\n<h4 id=\"解决方案-box-sizing\"><a href=\"#解决方案-box-sizing\" class=\"headerlink\" title=\"解决方案 box-sizing\"></a>解决方案 box-sizing</h4><figure class=\"highlight gauss\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// W3C 标准盒模型（浏览器默认）</span></div><div class=\"line\"><span class=\"built_in\">box</span>-sizing: content-<span class=\"built_in\">box</span>;</div><div class=\"line\"><span class=\"comment\">// IE 怪异盒模型</span></div><div class=\"line\"><span class=\"built_in\">box</span>-sizing: border-<span class=\"built_in\">box</span>;</div></pre></td></tr></table></figure>\n<p>当我们设置 box-sizing: border-box; 时，border 和 padding 就被包含在了宽高之内,和IE在非标准的模式下是一致的。<br>然而好像看到很多网站为了避免同一份 css 在不同浏览器下表现不同，基本会加上：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><div class=\"line\">*, *<span class=\"selector-pseudo\">:before</span>, *<span class=\"selector-pseudo\">:after</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">-moz-box-sizing</span>: border-box;</div><div class=\"line\">  <span class=\"attribute\">-webkit-box-sizing</span>: border-box;</div><div class=\"line\">  <span class=\"attribute\">box-sizing</span>: border-box;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"文档类型（Doctype）\"><a href=\"#文档类型（Doctype）\" class=\"headerlink\" title=\"文档类型（Doctype）\"></a>文档类型（Doctype）</h4><p>亲测了下，发现其实当头部设置了html5的头部声明&lt;!DOCTYPE html&gt;，在IE下也全是标准的盒模型了，估计除了历史遗留下的网站，新的全是html5的声明，HTML5 不基于 SGML，所以不需要引用 DTD。可能也就只有一些老家伙才经历过图下的历史：<br><img src=\"https://shuangmuyingzi.github.io/img/doctype.png\" alt=\"GitHub set up\"><br>如果有兴趣推荐看这篇关于声明的具体元素意思，毕竟其实很多医院系统，学校系统，政府系统之类可能还是会有旧的，了解下也好。<br><a href=\"https://www.jianshu.com/p/c3dcdad42e6d\" target=\"_blank\" rel=\"external\">https://www.jianshu.com/p/c3dcdad42e6d</a></p>\n<h4 id=\"理解CSS布局和BFC\"><a href=\"#理解CSS布局和BFC\" class=\"headerlink\" title=\"理解CSS布局和BFC\"></a>理解CSS布局和BFC</h4><p>CSS布局中有一些概念，一旦理解了这些概念，就能真正的提高你的CSS能力。这篇文章主要介绍的是关于块格式化上下文（Block Formatting Context），也就是大家俗称的BFC。</p>\n<p>它是W3C CSS2.1规范中的一个概念。它是页面中的一块渲染区域，并且有一套渲染规则，它决定了其子元素将如何定位，以及和其他元素的关系和相互作用。也就是说我们平时在布局的时候，它默默地提供了一个环境，使得HTML元素在这个环境中按照一定规则进行布局。</p>\n<p>最常见的formatting context有Block Formatting Context(BFC)和Inline Formatting Context(IFC)，CSS3中还增加了GridLayout Formatting Context(GFC)和Flex Formatting Context(FFC)。</p>\n<p>BFC的布局规则与触发规则<br>刚才我们说到BFC中的元素有一套规定的布局规则：</p>\n<figure class=\"highlight armasm\"><table><tr><td class=\"code\"><pre><div class=\"line\">内部的元素会在垂直方向一个接一个地放置</div><div class=\"line\">元素垂直方向的距离由<span class=\"keyword\">margin决定，属于同一个BFC的两个相邻元素的margin会发生重叠</span></div><div class=\"line\"><span class=\"keyword\">每个元素的左外边距与包含块的左边界相接触(对于从左往右，否则相反)，即使存在浮动也是如此</span></div><div class=\"line\"><span class=\"keyword\">BFC的区域不会与float元素重叠</span></div><div class=\"line\"><span class=\"keyword\">计算BFC的高度时，浮动元素也参与计算</span></div><div class=\"line\"><span class=\"keyword\">BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素，反之也如此</span></div></pre></td></tr></table></figure>\n<p>刚才我们又提到BFC是一块渲染区域，那这块渲染区域到底在哪，它又是有多大，这些由生成BFC的元素来决定，CSS2.1中规定满足下列CSS声明的元素便会生成BFC（触发规则）：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"code\"><pre><div class=\"line\">根元素</div><div class=\"line\"><span class=\"attribute\">float</span>的值不为<span class=\"attribute\">none</span></div><div class=\"line\"><span class=\"attribute\">overflow</span>的值不为visible</div><div class=\"line\"><span class=\"attribute\">position</span>的值为absolute或fixed</div><div class=\"line\"><span class=\"attribute\">display</span>的值为inline-block, <span class=\"selector-tag\">table</span>-cell, <span class=\"selector-tag\">table</span>-<span class=\"selector-tag\">caption</span>, <span class=\"attribute\">flex</span>, inline-<span class=\"attribute\">flex</span>, grid</div><div class=\"line\">注：<span class=\"attribute\">display</span>: table也认为可以生成BFC，主要原因是table会默认生成一个匿名的table-cell，正是这个匿名的table-cell生成了BFC</div></pre></td></tr></table></figure>\n<p>上面这些CSS声明的元素生成了BFC，而它们本身并不是BFC，这一点需要区分。</p>\n<h4 id=\"防止垂直margin重叠\"><a href=\"#防止垂直margin重叠\" class=\"headerlink\" title=\"防止垂直margin重叠\"></a>防止垂直margin重叠</h4><p>有点布局经验的朋友都知道margin collapse，也就是相邻的垂直元素同时设置了margin后，实际margin值会塌陷到其中较大的那个值。其根本原理就是它们处于同一个BFC，符合“属于同一个BFC的两个相邻元素的margin会发生重叠”的规则。</p>\n<p>我们可以在其中一个元素外面包裹一层容器，并触发该容器生成一个BFC。那么两个元素便属于不同的BFC，就不会发生margin重叠了：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>防止垂直margin重叠<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"undefined\">    /*.wrap&#123;</span></div><div class=\"line\"><span class=\"undefined\">        overflow: hidden;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;</span></div><div class=\"line\"><span class=\"undefined\">    p&#123;</span></div><div class=\"line\"><span class=\"undefined\">        width: 200px;</span></div><div class=\"line\"><span class=\"undefined\">        line-height: 100px;</span></div><div class=\"line\"><span class=\"undefined\">        margin: 100px;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">background</span>: <span class=\"selector-id\">#000</span>;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">color</span>: <span class=\"selector-id\">#fff</span>;</span></div><div class=\"line\"><span class=\"undefined\">        text-align: center;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;*/</span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.outer</span> &#123; <span class=\"attribute\">background-color</span>: <span class=\"number\">#ccc</span>; <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">40px</span> <span class=\"number\">0</span>; <span class=\"comment\">/*overflow: auto;*/</span>&#125; </span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">p</span> &#123; <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>; <span class=\"attribute\">margin</span>: <span class=\"number\">20px</span> <span class=\"number\">0</span> <span class=\"number\">20px</span> <span class=\"number\">0</span>; <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgb</span>(233,78,119); <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>; &#125;</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"comment\">&lt;!-- &lt;p&gt;我属于一个BFC&lt;/p&gt;</span></div><div class=\"line\"><span class=\"comment\">    &lt;div class=\"wrap\"&gt;</span></div><div class=\"line\"><span class=\"comment\">        &lt;p&gt;我属于另一个BFC&lt;/p&gt;</span></div><div class=\"line\"><span class=\"comment\">    &lt;/div&gt; --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"outer\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>我是P<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>我是另一个P<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>防止浮动子元素高度塌陷</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>防止浮动子元素高度塌陷<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.outer</span> &#123; <span class=\"attribute\">border</span>: <span class=\"number\">5px</span> dotted <span class=\"built_in\">rgb</span>(214,129,137); <span class=\"attribute\">border-radius</span>: <span class=\"number\">5px</span>; <span class=\"attribute\">width</span>: <span class=\"number\">450px</span>; <span class=\"attribute\">padding</span>: <span class=\"number\">10px</span>; <span class=\"attribute\">margin-bottom</span>: <span class=\"number\">40px</span>;<span class=\"comment\">/*overflow: hidden;*/</span> &#125; </span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.float</span> &#123; <span class=\"attribute\">padding</span>: <span class=\"number\">10px</span>; <span class=\"attribute\">border</span>: <span class=\"number\">5px</span> solid <span class=\"built_in\">rgba</span>(214,129,137,.4); <span class=\"attribute\">border-radius</span>: <span class=\"number\">5px</span>; <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgba</span>(233,78,119,.4); <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>; <span class=\"attribute\">float</span>: left; <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>; <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> <span class=\"number\">20px</span> <span class=\"number\">0</span> <span class=\"number\">0</span>; &#125;</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"outer\"</span>&gt;</span> </div><div class=\"line\">    \t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"float\"</span>&gt;</span>我是浮动<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span> </div><div class=\"line\">    \t我会包裹着浮动</div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>如果我们将.outer元素的overflow: hidden去掉，那么.outer元素就获取不到浮动元素的高度了。但是加上overflow属性后触发了BFC，计算BFC的高度时，浮动元素也参与了计算。</p>\n<p>防止文字（或其他元素）环绕</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>防止文字（或其他元素）环绕<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.parent</span>&#123;</span></div><div class=\"line\"><span class=\"undefined\">        width: 300px;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">border</span>: 3<span class=\"selector-tag\">px</span> <span class=\"selector-tag\">solid</span> <span class=\"selector-id\">#000</span>;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;</span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.child</span>&#123;</span></div><div class=\"line\"><span class=\"undefined\">        float: left;</span></div><div class=\"line\"><span class=\"undefined\">        width: 100px;</span></div><div class=\"line\"><span class=\"undefined\">        height: 100px;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">border</span>: 3<span class=\"selector-tag\">px</span> <span class=\"selector-tag\">solid</span> <span class=\"selector-id\">#f00</span>;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">color</span>: <span class=\"selector-id\">#f00</span>;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;</span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.text</span>&#123;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"comment\">/*overflow: hidden;*/</span></span></div><div class=\"line\"><span class=\"undefined\">    &#125;</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"parent\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"child\"</span>&gt;</span>float: left<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"text\"</span>&gt;</span>我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>正常情况下，如果一个块级元素设置成了float，那么他的兄弟元素会环绕其布局。这里我们给.text加上overflow，文字所在的区域就产生了BFC，元素的左边总是触碰到容器的左边，即使存在浮动也是如此。</p>\n<p>以上的都是BFC常见的应用场景以及它的触发规则，<br>接下来我们来看看BFC新的触发条件。</p>\n<h4 id=\"创建BFC的新方式\"><a href=\"#创建BFC的新方式\" class=\"headerlink\" title=\"创建BFC的新方式\"></a>创建BFC的新方式</h4><p>使用overflow或其他的方法创建BFC时会有两个问题。首先，这些方法本身是有自身的设计目的，所以在使用它们创建BFC时可能会产生副作用。例如，使用overflow创建BFC后在某些情况下可能会看到出现一个滚动条或者元素内容被裁切。这是由于overflow属性的设计是用来让你告诉浏览器如何定义元素的溢出状态的。</p>\n<p>最安全的做法应该是创建一个BFC时并不会带来任何副作用，它内部的元素都安全的呆在这个迷你布局中，这种方法不会引起任何意想不到的问题，也可以理解开发者的意图。CSS工作组也十分认同这种想法，所以他们定制了一个新的属性值：display:flow-root。</p>\n<p><img src=\"https://shuangmuyingzi.github.io/img/flow-root.png\" alt=\"GitHub set up\"></p>\n<p>Caniuse上display:flow-root各浏览器兼容情况。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>flow-root<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.parent</span>&#123;</span></div><div class=\"line\"><span class=\"undefined\">        width: 300px;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">border</span>: 3<span class=\"selector-tag\">px</span> <span class=\"selector-tag\">solid</span> <span class=\"selector-id\">#000</span>;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;</span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.child</span>&#123;</span></div><div class=\"line\"><span class=\"undefined\">        float: left;</span></div><div class=\"line\"><span class=\"undefined\">        width: 100px;</span></div><div class=\"line\"><span class=\"undefined\">        height: 100px;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">border</span>: 3<span class=\"selector-tag\">px</span> <span class=\"selector-tag\">solid</span> <span class=\"selector-id\">#f00</span>;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">color</span>: <span class=\"selector-id\">#f00</span>;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;</span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.text</span>&#123;</span></div><div class=\"line\"><span class=\"undefined\">        display: flow-root;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"parent\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"child\"</span>&gt;</span>float: left<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"text\"</span>&gt;</span>我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>vertical-center(水平垂直居中)<br>仅居中元素定宽高适用：</p>\n<p><a href=\"http://yanhaijing.com/vertical-center/absolute1.html\" target=\"_blank\" rel=\"external\">absolute + 负margin</a><br><a href=\"http://yanhaijing.com/vertical-center/absolute2.html\" target=\"_blank\" rel=\"external\">absolute + margin auto</a><br><a href=\"http://yanhaijing.com/vertical-center/absolute3.html\" target=\"_blank\" rel=\"external\">absolute + calc</a><br>居中元素不定宽高适用：</p>\n<p><a href=\"http://yanhaijing.com/vertical-center/absolute4.html\" target=\"_blank\" rel=\"external\">absolute + transform</a><br><a href=\"http://yanhaijing.com/vertical-center/writing-mode.html\" target=\"_blank\" rel=\"external\">writing-mode</a><br><a href=\"http://yanhaijing.com/vertical-center/lineheight.html\" target=\"_blank\" rel=\"external\">lineheight</a><br><a href=\"http://yanhaijing.com/vertical-center/table.html\" target=\"_blank\" rel=\"external\">table</a><br><a href=\"http://yanhaijing.com/vertical-center/css-table.html\" target=\"_blank\" rel=\"external\">css-table</a><br><a href=\"http://yanhaijing.com/vertical-center/flex.html\" target=\"_blank\" rel=\"external\">flex</a><br><a href=\"http://yanhaijing.com/vertical-center/grid.html\" target=\"_blank\" rel=\"external\">grid</a><br>参考链接：<br><a href=\"https://www.w3cplus.com/css/understanding-css-layout-block-formatting-context.html\" target=\"_blank\" rel=\"external\">https://www.w3cplus.com/css/understanding-css-layout-block-formatting-context.html</a><br><a href=\"https://segmentfault.com/a/1190000011211625\" target=\"_blank\" rel=\"external\">https://segmentfault.com/a/1190000011211625</a></p>\n","site":{"data":{}},"excerpt":"<p>在这个js当道的前端届里，号称要用js写操作系统，js真的牛逼啊，写得了前端，做得了后台，码得了客户端桌面应用，不管是小程序还是新出的快应用统统都离不开js,谁还记得曾经的那个页面仔。与一个像素去较真，写了不知道多少牛逼哄哄的hack，多少个日与夜在做IE兼容。如今你有多久没有关注过html、css的更新，你的css能力退化了吗？</p>","more":"<h3 id=\"源起\"><a href=\"#源起\" class=\"headerlink\" title=\"源起\"></a>源起</h3><p>span元素是否可以用padding撑开宽高，”不能啊”！真的吗，确定没有记错吗，来，实验是检验真理的唯一标准。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/css\"</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"undefined\">\tbody&#123;margin: 0;padding: 0&#125;</span></div><div class=\"line\"><span class=\"undefined\">\tdiv&#123;</span></div><div class=\"line\"><span class=\"undefined\">\t\tcolor: #000;</span></div><div class=\"line\"><span class=\"undefined\">\t\t/*margin-bottom: 30px;*/ /*取消注释第二步，运行看效果*/</span></div><div class=\"line\"><span class=\"undefined\">\t&#125;</span></div><div class=\"line\"><span class=\"undefined\">\tspan&#123;</span></div><div class=\"line\"><span class=\"undefined\">\t\tpadding:20px;</span></div><div class=\"line\"><span class=\"undefined\">\t\tbackground-color: #000;</span></div><div class=\"line\"><span class=\"undefined\">\t\tcolor: #fff;</span></div><div class=\"line\"><span class=\"undefined\">\t\ttext-align: center;</span></div><div class=\"line\"><span class=\"undefined\">\t\tfont-size: 20px;</span></div><div class=\"line\"><span class=\"undefined\">\t\tmargin:20px;</span></div><div class=\"line\"><span class=\"undefined\">\t&#125;</span></div><div class=\"line\"><span class=\"undefined\">\t</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">\t<span class=\"comment\">&lt;!-- &lt;div&gt;神奇啊&lt;/div&gt; --&gt;</span> <span class=\"comment\">&lt;!-- 取消注释第一步，运行看效果 --&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>我是span<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>\t</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>由此我们可以得出：</p>\n<figure class=\"highlight coq\"><table><tr><td class=\"code\"><pre><div class=\"line\">span设置内外边距问题</div><div class=\"line\"><span class=\"number\">1</span>、margin：</div><div class=\"line\">span标签设置margin-<span class=\"built_in\">left</span>/<span class=\"built_in\">right</span>均好使，margin-<span class=\"built_in\">top</span>/<span class=\"built_in\">bottom</span>不好使；</div><div class=\"line\"><span class=\"number\">2</span>、padding： </div><div class=\"line\">span标签设置padding好使，但span标签上面无元素时，padding-<span class=\"built_in\">top</span> 不好使；span标签上面有元素时，padding-<span class=\"built_in\">top</span>会把上面的元素盖住.</div></pre></td></tr></table></figure>\n<p>天啊，太神奇了！太神奇了！为什么，为什么啊？？？？<br>等等，我还有疑问，那span可以设置line-height撑开里面的高度吗？</p>\n<h3 id=\"html元素的标签分类\"><a href=\"#html元素的标签分类\" class=\"headerlink\" title=\"html元素的标签分类\"></a>html元素的标签分类</h3><p>曾经我的字典里只有行内元素和块级元素，inline &amp; block，事实上：<br><img src=\"https://shuangmuyingzi.github.io/img/cssTu.png\" alt=\"GitHub set up\"><br>HTML5中，元素主要分为7类：<br>Metadata<br>Flow<br>Sectioning<br>Heading<br>Phrasing<br>Embedded<br>Interactive<br>这些分类集合互相之间也存在一定的交集(一个元素可以同时属于多个分类)</p>\n<h4 id=\"Metadata（元数据元素）\"><a href=\"#Metadata（元数据元素）\" class=\"headerlink\" title=\"Metadata（元数据元素）\"></a>Metadata（元数据元素）</h4><p>顾名思义，Metadata元素意指那些定义文档元数据信息的元素 — 其作用包括：影响文档中其它节点的展现与行为、定义文档与其它外部资源之间的关系等。</p>\n<figure class=\"highlight maxima\"><table><tr><td class=\"code\"><pre><div class=\"line\">base, link, meta, noscript, script, <span class=\"built_in\">style</span>, template, <span class=\"built_in\">title</span></div></pre></td></tr></table></figure>\n<h4 id=\"Flow（流式元素）\"><a href=\"#Flow（流式元素）\" class=\"headerlink\" title=\"Flow（流式元素）\"></a>Flow（流式元素）</h4><p>所有可以放在body标签内，构成文档内容的元素均属于Flow元素。因此，除了base, link, meta, style, title等只能放在head标签内的元素外，剩下的所有元素均属于Flow元素。</p>\n<figure class=\"highlight armasm\"><table><tr><td class=\"code\"><pre><div class=\"line\">a， abbr， <span class=\"keyword\">address， </span><span class=\"meta\">area</span>（如果它是<span class=\"meta\">map</span>元素的后裔）， article， aside， audio， <span class=\"keyword\">b， </span><span class=\"keyword\">bdi， </span><span class=\"keyword\">bdo， </span><span class=\"keyword\">blockquote， </span><span class=\"keyword\">br， </span><span class=\"keyword\">button， </span>canvas， cite， <span class=\"meta\">code</span>， command， datalist， del， details， dfn， div， dl，em， embed， fieldset， figure， footer， form， h1， h2， h3， h4， h5， h6， header， hgroup， hr， i， iframe， img， input， ins， kbd， keygen， label， <span class=\"meta\">map</span>， <span class=\"keyword\">mark， </span>math， menu， meter，nav， noscript， object， ol， output， p， pre， progress， q， ruby， s， samp， script， section， <span class=\"keyword\">select， </span>small， span， <span class=\"keyword\">strong， </span>style（如果该元素设置了scoped属性）， <span class=\"keyword\">sub， </span>sup， svg， table，textarea， time， u， ul， var， video， wbr， text</div></pre></td></tr></table></figure>\n<h4 id=\"Sectioning（章节元素）\"><a href=\"#Sectioning（章节元素）\" class=\"headerlink\" title=\"Sectioning（章节元素）\"></a>Sectioning（章节元素）</h4><p>Sectioning意指定义页面结构的元素</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">article</span>, <span class=\"selector-tag\">aside</span>, <span class=\"selector-tag\">nav</span>, section</div></pre></td></tr></table></figure>\n<h4 id=\"Heading（标题元素）\"><a href=\"#Heading（标题元素）\" class=\"headerlink\" title=\"Heading（标题元素）\"></a>Heading（标题元素）</h4><p>所有标题元素属于Heading</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">h1</span>, <span class=\"selector-tag\">h2</span>, <span class=\"selector-tag\">h3</span>, <span class=\"selector-tag\">h4</span>, <span class=\"selector-tag\">h5</span>, h6</div></pre></td></tr></table></figure>\n<h4 id=\"Phrasing（段落元素）\"><a href=\"#Phrasing（段落元素）\" class=\"headerlink\" title=\"Phrasing（段落元素）\"></a>Phrasing（段落元素）</h4><p>所有可以放在p标签内，构成段落内容的元素均属于Phrasing元素。因此，所有Phrasing元素均属于Flow元素。在HTML5标准文档中，关于Phrasing元素的原始定义为：</p>\n<figure class=\"highlight applescript\"><table><tr><td class=\"code\"><pre><div class=\"line\">Phrasing content <span class=\"keyword\">is</span> <span class=\"keyword\">the</span> <span class=\"built_in\">text</span> <span class=\"keyword\">of</span> <span class=\"keyword\">the</span> document, <span class=\"keyword\">as</span> well <span class=\"keyword\">as</span> elements <span class=\"keyword\">that</span> mark up <span class=\"keyword\">that</span> <span class=\"built_in\">text</span> <span class=\"keyword\">at</span> <span class=\"keyword\">the</span> intra-<span class=\"built_in\">paragraph</span> level. Runs <span class=\"keyword\">of</span> phrasing content form <span class=\"built_in\">paragraphs</span>.</div></pre></td></tr></table></figure>\n<p>对于这一定义，个人认为不应当使用“text”这一容易引起误解的词，事实上，一个元素即使不是文本，只要能包含在p标签中成为段落内容的一部分，就可以称之为Phrasing元素。</p>\n<figure class=\"highlight armasm\"><table><tr><td class=\"code\"><pre><div class=\"line\">a（如果其只包含段落式元素）， abbr， <span class=\"meta\">area</span>（如果它是<span class=\"meta\">map</span>元素的后裔）， audio， <span class=\"keyword\">b， </span><span class=\"keyword\">bdi， </span><span class=\"keyword\">bdo， </span><span class=\"keyword\">br， </span><span class=\"keyword\">button， </span>canvas， cite， <span class=\"meta\">code</span>， command， datalist， del（如果其只包含段落式元素）， dfn， em， embed， i，iframe， img， input， ins（如果其只包含段落式元素）， kbd， keygen， label， <span class=\"meta\">map</span>（如果其只包含段落式元素）， <span class=\"keyword\">mark， </span>math， meter， noscript， object， output， progress， q， ruby， s， samp， script，<span class=\"keyword\">select， </span>small， span， <span class=\"keyword\">strong， </span><span class=\"keyword\">sub， </span>sup， svg， textarea， time， u， var， video， wbr， text</div></pre></td></tr></table></figure>\n<h4 id=\"Embedded（嵌入元素）\"><a href=\"#Embedded（嵌入元素）\" class=\"headerlink\" title=\"Embedded（嵌入元素）\"></a>Embedded（嵌入元素）</h4><p>所有用于在网页中嵌入外部资源的元素均属于Embedded元素</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">audio</span>, <span class=\"selector-tag\">video</span>, <span class=\"selector-tag\">img</span>, <span class=\"selector-tag\">canvas</span>, svg, <span class=\"selector-tag\">iframe</span>, embed, <span class=\"selector-tag\">object</span>, math</div></pre></td></tr></table></figure>\n<h4 id=\"Interactive（交互元素）\"><a href=\"#Interactive（交互元素）\" class=\"headerlink\" title=\"Interactive（交互元素）\"></a>Interactive（交互元素）</h4><p>所有与用户交互有关的元素均属于Interactive元素。</p>\n<figure class=\"highlight delphi\"><table><tr><td class=\"code\"><pre><div class=\"line\">a， audio（如果设置了controls属性）， button， details， embed， iframe， img（如果设置了usemap属性）， input（如果<span class=\"keyword\">type</span>属性不为hidden状态）， keygen， <span class=\"keyword\">label</span>， menu（如果<span class=\"keyword\">type</span>属性为toolbar状态），<span class=\"keyword\">object</span>（如果设置了usemap属性）， select， textarea， video（如果设置了controls属性）</div></pre></td></tr></table></figure>\n<h4 id=\"Palpable\"><a href=\"#Palpable\" class=\"headerlink\" title=\"Palpable\"></a>Palpable</h4><p>所有应当拥有子元素的元素称之为Palpable元素。比如，br元素因不需要子元素，因此也就不属于Palpable。</p>\n<p>Script-supporting<br>自身不做任何页面展现，但与页面脚本相关的元素</p>\n<figure class=\"highlight applescript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">script</span>, template</div></pre></td></tr></table></figure>\n<p>其实这是非规范的，所以不是强求的，新的分类定义了元素的内容模型(Content Model),关键还是要清楚这些元素的特性以及各大浏览器是如何渲染解析的，包括有哪些默认的样式,从而正确嵌套标签以及设置reset.css。<br><a href=\"https://html.spec.whatwg.org/multipage/indices.html#element-content-categories\" target=\"_blank\" rel=\"external\">https://html.spec.whatwg.org/multipage/indices.html#element-content-categories</a></p>\n<h3 id=\"W3C-标准盒模型-amp-IE-怪异盒模型\"><a href=\"#W3C-标准盒模型-amp-IE-怪异盒模型\" class=\"headerlink\" title=\"W3C 标准盒模型 &amp; IE 怪异盒模型\"></a>W3C 标准盒模型 &amp; IE 怪异盒模型</h3><p>页面上显示的每个元素（包括内联元素）都可以看作一个盒子，即盒模型(box model) 盒模型由 4 部分组成，从内到外分别是：<code>content</code> <code>padding</code> <code>border</code> <code>margin</code></p>\n<p><img src=\"https://shuangmuyingzi.github.io/img/box-sizing.png\" alt=\"GitHub set up\"><br><code>W3C标准盒模型</code>一个元素的宽度（高度以此类推）应该这样计算：</p>\n<figure class=\"highlight coq\"><table><tr><td class=\"code\"><pre><div class=\"line\">一个元素的宽度 =  content</div><div class=\"line\">盒子总宽度 = margin-<span class=\"built_in\">left</span> + border-<span class=\"built_in\">left</span> + padding-<span class=\"built_in\">left</span> + width + padding-<span class=\"built_in\">right</span> + border-<span class=\"built_in\">right</span> + margin-<span class=\"built_in\">right</span></div></pre></td></tr></table></figure>\n<p><code>而IE 怪异盒模型</code>一个元素的宽度（高度以此类推）却是这样计算的：</p>\n<figure class=\"highlight maxima\"><table><tr><td class=\"code\"><pre><div class=\"line\">一个元素的宽度 =  <span class=\"built_in\">content</span> + padding + <span class=\"built_in\">border</span></div><div class=\"line\">盒子总宽度 = margin-left + <span class=\"built_in\">width</span> + margin-right</div></pre></td></tr></table></figure>\n<h4 id=\"解决方案-box-sizing\"><a href=\"#解决方案-box-sizing\" class=\"headerlink\" title=\"解决方案 box-sizing\"></a>解决方案 box-sizing</h4><figure class=\"highlight gauss\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// W3C 标准盒模型（浏览器默认）</span></div><div class=\"line\"><span class=\"built_in\">box</span>-sizing: content-<span class=\"built_in\">box</span>;</div><div class=\"line\"><span class=\"comment\">// IE 怪异盒模型</span></div><div class=\"line\"><span class=\"built_in\">box</span>-sizing: border-<span class=\"built_in\">box</span>;</div></pre></td></tr></table></figure>\n<p>当我们设置 box-sizing: border-box; 时，border 和 padding 就被包含在了宽高之内,和IE在非标准的模式下是一致的。<br>然而好像看到很多网站为了避免同一份 css 在不同浏览器下表现不同，基本会加上：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><div class=\"line\">*, *<span class=\"selector-pseudo\">:before</span>, *<span class=\"selector-pseudo\">:after</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">-moz-box-sizing</span>: border-box;</div><div class=\"line\">  <span class=\"attribute\">-webkit-box-sizing</span>: border-box;</div><div class=\"line\">  <span class=\"attribute\">box-sizing</span>: border-box;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"文档类型（Doctype）\"><a href=\"#文档类型（Doctype）\" class=\"headerlink\" title=\"文档类型（Doctype）\"></a>文档类型（Doctype）</h4><p>亲测了下，发现其实当头部设置了html5的头部声明&lt;!DOCTYPE html&gt;，在IE下也全是标准的盒模型了，估计除了历史遗留下的网站，新的全是html5的声明，HTML5 不基于 SGML，所以不需要引用 DTD。可能也就只有一些老家伙才经历过图下的历史：<br><img src=\"https://shuangmuyingzi.github.io/img/doctype.png\" alt=\"GitHub set up\"><br>如果有兴趣推荐看这篇关于声明的具体元素意思，毕竟其实很多医院系统，学校系统，政府系统之类可能还是会有旧的，了解下也好。<br><a href=\"https://www.jianshu.com/p/c3dcdad42e6d\" target=\"_blank\" rel=\"external\">https://www.jianshu.com/p/c3dcdad42e6d</a></p>\n<h4 id=\"理解CSS布局和BFC\"><a href=\"#理解CSS布局和BFC\" class=\"headerlink\" title=\"理解CSS布局和BFC\"></a>理解CSS布局和BFC</h4><p>CSS布局中有一些概念，一旦理解了这些概念，就能真正的提高你的CSS能力。这篇文章主要介绍的是关于块格式化上下文（Block Formatting Context），也就是大家俗称的BFC。</p>\n<p>它是W3C CSS2.1规范中的一个概念。它是页面中的一块渲染区域，并且有一套渲染规则，它决定了其子元素将如何定位，以及和其他元素的关系和相互作用。也就是说我们平时在布局的时候，它默默地提供了一个环境，使得HTML元素在这个环境中按照一定规则进行布局。</p>\n<p>最常见的formatting context有Block Formatting Context(BFC)和Inline Formatting Context(IFC)，CSS3中还增加了GridLayout Formatting Context(GFC)和Flex Formatting Context(FFC)。</p>\n<p>BFC的布局规则与触发规则<br>刚才我们说到BFC中的元素有一套规定的布局规则：</p>\n<figure class=\"highlight armasm\"><table><tr><td class=\"code\"><pre><div class=\"line\">内部的元素会在垂直方向一个接一个地放置</div><div class=\"line\">元素垂直方向的距离由<span class=\"keyword\">margin决定，属于同一个BFC的两个相邻元素的margin会发生重叠</span></div><div class=\"line\"><span class=\"keyword\">每个元素的左外边距与包含块的左边界相接触(对于从左往右，否则相反)，即使存在浮动也是如此</span></div><div class=\"line\"><span class=\"keyword\">BFC的区域不会与float元素重叠</span></div><div class=\"line\"><span class=\"keyword\">计算BFC的高度时，浮动元素也参与计算</span></div><div class=\"line\"><span class=\"keyword\">BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素，反之也如此</span></div></pre></td></tr></table></figure>\n<p>刚才我们又提到BFC是一块渲染区域，那这块渲染区域到底在哪，它又是有多大，这些由生成BFC的元素来决定，CSS2.1中规定满足下列CSS声明的元素便会生成BFC（触发规则）：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"code\"><pre><div class=\"line\">根元素</div><div class=\"line\"><span class=\"attribute\">float</span>的值不为<span class=\"attribute\">none</span></div><div class=\"line\"><span class=\"attribute\">overflow</span>的值不为visible</div><div class=\"line\"><span class=\"attribute\">position</span>的值为absolute或fixed</div><div class=\"line\"><span class=\"attribute\">display</span>的值为inline-block, <span class=\"selector-tag\">table</span>-cell, <span class=\"selector-tag\">table</span>-<span class=\"selector-tag\">caption</span>, <span class=\"attribute\">flex</span>, inline-<span class=\"attribute\">flex</span>, grid</div><div class=\"line\">注：<span class=\"attribute\">display</span>: table也认为可以生成BFC，主要原因是table会默认生成一个匿名的table-cell，正是这个匿名的table-cell生成了BFC</div></pre></td></tr></table></figure>\n<p>上面这些CSS声明的元素生成了BFC，而它们本身并不是BFC，这一点需要区分。</p>\n<h4 id=\"防止垂直margin重叠\"><a href=\"#防止垂直margin重叠\" class=\"headerlink\" title=\"防止垂直margin重叠\"></a>防止垂直margin重叠</h4><p>有点布局经验的朋友都知道margin collapse，也就是相邻的垂直元素同时设置了margin后，实际margin值会塌陷到其中较大的那个值。其根本原理就是它们处于同一个BFC，符合“属于同一个BFC的两个相邻元素的margin会发生重叠”的规则。</p>\n<p>我们可以在其中一个元素外面包裹一层容器，并触发该容器生成一个BFC。那么两个元素便属于不同的BFC，就不会发生margin重叠了：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>防止垂直margin重叠<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"undefined\">    /*.wrap&#123;</span></div><div class=\"line\"><span class=\"undefined\">        overflow: hidden;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;</span></div><div class=\"line\"><span class=\"undefined\">    p&#123;</span></div><div class=\"line\"><span class=\"undefined\">        width: 200px;</span></div><div class=\"line\"><span class=\"undefined\">        line-height: 100px;</span></div><div class=\"line\"><span class=\"undefined\">        margin: 100px;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">background</span>: <span class=\"selector-id\">#000</span>;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">color</span>: <span class=\"selector-id\">#fff</span>;</span></div><div class=\"line\"><span class=\"undefined\">        text-align: center;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;*/</span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.outer</span> &#123; <span class=\"attribute\">background-color</span>: <span class=\"number\">#ccc</span>; <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">40px</span> <span class=\"number\">0</span>; <span class=\"comment\">/*overflow: auto;*/</span>&#125; </span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">p</span> &#123; <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>; <span class=\"attribute\">margin</span>: <span class=\"number\">20px</span> <span class=\"number\">0</span> <span class=\"number\">20px</span> <span class=\"number\">0</span>; <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgb</span>(233,78,119); <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>; &#125;</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"comment\">&lt;!-- &lt;p&gt;我属于一个BFC&lt;/p&gt;</span></div><div class=\"line\"><span class=\"comment\">    &lt;div class=\"wrap\"&gt;</span></div><div class=\"line\"><span class=\"comment\">        &lt;p&gt;我属于另一个BFC&lt;/p&gt;</span></div><div class=\"line\"><span class=\"comment\">    &lt;/div&gt; --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"outer\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>我是P<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>我是另一个P<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>防止浮动子元素高度塌陷</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>防止浮动子元素高度塌陷<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.outer</span> &#123; <span class=\"attribute\">border</span>: <span class=\"number\">5px</span> dotted <span class=\"built_in\">rgb</span>(214,129,137); <span class=\"attribute\">border-radius</span>: <span class=\"number\">5px</span>; <span class=\"attribute\">width</span>: <span class=\"number\">450px</span>; <span class=\"attribute\">padding</span>: <span class=\"number\">10px</span>; <span class=\"attribute\">margin-bottom</span>: <span class=\"number\">40px</span>;<span class=\"comment\">/*overflow: hidden;*/</span> &#125; </span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.float</span> &#123; <span class=\"attribute\">padding</span>: <span class=\"number\">10px</span>; <span class=\"attribute\">border</span>: <span class=\"number\">5px</span> solid <span class=\"built_in\">rgba</span>(214,129,137,.4); <span class=\"attribute\">border-radius</span>: <span class=\"number\">5px</span>; <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgba</span>(233,78,119,.4); <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>; <span class=\"attribute\">float</span>: left; <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>; <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> <span class=\"number\">20px</span> <span class=\"number\">0</span> <span class=\"number\">0</span>; &#125;</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"outer\"</span>&gt;</span> </div><div class=\"line\">    \t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"float\"</span>&gt;</span>我是浮动<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span> </div><div class=\"line\">    \t我会包裹着浮动</div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>如果我们将.outer元素的overflow: hidden去掉，那么.outer元素就获取不到浮动元素的高度了。但是加上overflow属性后触发了BFC，计算BFC的高度时，浮动元素也参与了计算。</p>\n<p>防止文字（或其他元素）环绕</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>防止文字（或其他元素）环绕<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.parent</span>&#123;</span></div><div class=\"line\"><span class=\"undefined\">        width: 300px;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">border</span>: 3<span class=\"selector-tag\">px</span> <span class=\"selector-tag\">solid</span> <span class=\"selector-id\">#000</span>;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;</span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.child</span>&#123;</span></div><div class=\"line\"><span class=\"undefined\">        float: left;</span></div><div class=\"line\"><span class=\"undefined\">        width: 100px;</span></div><div class=\"line\"><span class=\"undefined\">        height: 100px;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">border</span>: 3<span class=\"selector-tag\">px</span> <span class=\"selector-tag\">solid</span> <span class=\"selector-id\">#f00</span>;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">color</span>: <span class=\"selector-id\">#f00</span>;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;</span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.text</span>&#123;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"comment\">/*overflow: hidden;*/</span></span></div><div class=\"line\"><span class=\"undefined\">    &#125;</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"parent\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"child\"</span>&gt;</span>float: left<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"text\"</span>&gt;</span>我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>正常情况下，如果一个块级元素设置成了float，那么他的兄弟元素会环绕其布局。这里我们给.text加上overflow，文字所在的区域就产生了BFC，元素的左边总是触碰到容器的左边，即使存在浮动也是如此。</p>\n<p>以上的都是BFC常见的应用场景以及它的触发规则，<br>接下来我们来看看BFC新的触发条件。</p>\n<h4 id=\"创建BFC的新方式\"><a href=\"#创建BFC的新方式\" class=\"headerlink\" title=\"创建BFC的新方式\"></a>创建BFC的新方式</h4><p>使用overflow或其他的方法创建BFC时会有两个问题。首先，这些方法本身是有自身的设计目的，所以在使用它们创建BFC时可能会产生副作用。例如，使用overflow创建BFC后在某些情况下可能会看到出现一个滚动条或者元素内容被裁切。这是由于overflow属性的设计是用来让你告诉浏览器如何定义元素的溢出状态的。</p>\n<p>最安全的做法应该是创建一个BFC时并不会带来任何副作用，它内部的元素都安全的呆在这个迷你布局中，这种方法不会引起任何意想不到的问题，也可以理解开发者的意图。CSS工作组也十分认同这种想法，所以他们定制了一个新的属性值：display:flow-root。</p>\n<p><img src=\"https://shuangmuyingzi.github.io/img/flow-root.png\" alt=\"GitHub set up\"></p>\n<p>Caniuse上display:flow-root各浏览器兼容情况。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>flow-root<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.parent</span>&#123;</span></div><div class=\"line\"><span class=\"undefined\">        width: 300px;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">border</span>: 3<span class=\"selector-tag\">px</span> <span class=\"selector-tag\">solid</span> <span class=\"selector-id\">#000</span>;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;</span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.child</span>&#123;</span></div><div class=\"line\"><span class=\"undefined\">        float: left;</span></div><div class=\"line\"><span class=\"undefined\">        width: 100px;</span></div><div class=\"line\"><span class=\"undefined\">        height: 100px;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">border</span>: 3<span class=\"selector-tag\">px</span> <span class=\"selector-tag\">solid</span> <span class=\"selector-id\">#f00</span>;</span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">color</span>: <span class=\"selector-id\">#f00</span>;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;</span></div><div class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.text</span>&#123;</span></div><div class=\"line\"><span class=\"undefined\">        display: flow-root;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"parent\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"child\"</span>&gt;</span>float: left<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"text\"</span>&gt;</span>我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕我只是文字但我不会环绕<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>vertical-center(水平垂直居中)<br>仅居中元素定宽高适用：</p>\n<p><a href=\"http://yanhaijing.com/vertical-center/absolute1.html\" target=\"_blank\" rel=\"external\">absolute + 负margin</a><br><a href=\"http://yanhaijing.com/vertical-center/absolute2.html\" target=\"_blank\" rel=\"external\">absolute + margin auto</a><br><a href=\"http://yanhaijing.com/vertical-center/absolute3.html\" target=\"_blank\" rel=\"external\">absolute + calc</a><br>居中元素不定宽高适用：</p>\n<p><a href=\"http://yanhaijing.com/vertical-center/absolute4.html\" target=\"_blank\" rel=\"external\">absolute + transform</a><br><a href=\"http://yanhaijing.com/vertical-center/writing-mode.html\" target=\"_blank\" rel=\"external\">writing-mode</a><br><a href=\"http://yanhaijing.com/vertical-center/lineheight.html\" target=\"_blank\" rel=\"external\">lineheight</a><br><a href=\"http://yanhaijing.com/vertical-center/table.html\" target=\"_blank\" rel=\"external\">table</a><br><a href=\"http://yanhaijing.com/vertical-center/css-table.html\" target=\"_blank\" rel=\"external\">css-table</a><br><a href=\"http://yanhaijing.com/vertical-center/flex.html\" target=\"_blank\" rel=\"external\">flex</a><br><a href=\"http://yanhaijing.com/vertical-center/grid.html\" target=\"_blank\" rel=\"external\">grid</a><br>参考链接：<br><a href=\"https://www.w3cplus.com/css/understanding-css-layout-block-formatting-context.html\" target=\"_blank\" rel=\"external\">https://www.w3cplus.com/css/understanding-css-layout-block-formatting-context.html</a><br><a href=\"https://segmentfault.com/a/1190000011211625\" target=\"_blank\" rel=\"external\">https://segmentfault.com/a/1190000011211625</a></p>"},{"title":"js简单的防抖跟节流","date":"2018-01-26T00:00:00.000Z","_content":"\n前端的优化这个老生常谈的话题，这次我来记录下js的防抖跟节流对于页面优化的实现方式。\n\n<!--more-->\n\n为了使用Web Socket,需要在Web服务器上运行一个Web Socket服务器。这个程序负责协调各方通信，而且启动后就会不间断的运行下去。本厂后端开发语言为php(毕竟是世界上最好的语言)，有兴趣的可以在github上找相关服务端代码阅读。本文只介绍Web Socket客户端的实现。\n\n## 前言\n\n在前端开发中我们会遇到一些频繁的事件触发，比如：window 的 resize、scroll，mousedown、mousemove，keyup、keydown …… 或者根据数据的改变实时得进行数据接口的请求，比如搜索。\n\n下面，我们举个示例代码来了解事件如何频繁的触发：\n\n`index.html` 文件：\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>debounce</title>\n    <style>\n        #container{\n            width: 100%; height: 200px; line-height: 200px; text-align: center; color: #fff; background-color: #333; font-size: 30px;\n        }\n    </style>\n</head>\n<body>\n    <div id=\"container\"></div>\n    <script src=\"debounce.js\"></script>\n</body>\n</html>\n```\n`debounce.js` 文件：\n\n```JS\nvar count = 1;\nvar container = document.getElementById('container');\nfunction getMouseMove() {\n    container.innerHTML = count++;\n};\ncontainer.onmousemove = getMouseMove;\n```\n当我们从浏览器这样滑过去时会调用很多次的getMouseMove方法，这只是一个很简单的效果，浏览器完全反应得过来，试想一下，如果是复杂的回调或者是ajax请求那性能会大受打击，会有明显的卡顿。\n\n为了解决这个问题，一般有两种解决方案：\n    1、debounce 防抖\n    2、throttle 节流\n### 防抖\n防抖的原理就是：你尽管触发事件，但是我一定在事件停止触发 n 秒后才执行。\n\n这意味着如果你在一个事件触发的 n 秒内又触发了这个事件，那我就以新的事件触发的时间为准，在此时间 n 秒后才执行。\n\n总之，就是要等你触发完事件 n 秒内不再触发事件，我才执行!\n\n#### 防抖函数\n\n```JS\nfunction debounce(func, wait) {\n    var timeout;\n    return function () {\n        var context = this;\n        var args = arguments;\n        clearTimeout(timeout)\n        timeout = setTimeout(function(){\n            func.apply(context, args)\n        }, wait);\n    }\n}\n```\n使用：\n\n```JS\ncontainer.onmousemove = debounce(getMouseMove, 1000);\n```\n### 节流\n\n节流就是：如果你持续触发事件，每隔一段时间，只执行一次事件。\n\n关于节流的实现，有两种主流的实现方式，一种是使用时间戳，一种是设置定时器。\n#### 使用时间戳\n让我们来看第一种方法：使用时间戳，当触发事件的时候，我们取出当前的时间戳，然后减去之前的时间戳(最一开始值设为 0 )，如果大于设置的时间周期，就执行函数，然后更新时间戳为当前的时间戳，如果小于，就不执行。\n\n```JS\nfunction throttle(func, wait) {\n    var context, args;\n    var previous = 0;\n    return function() {\n        var now = +new Date();\n        context = this;\n        args = arguments;\n        if (now - previous > wait) {\n            func.apply(context, args);\n            previous = now;\n        }\n    }\n}\n```\n例子依然是用讲 debounce 中的例子，如果你要使用：\n\n```JS\ncontainer.onmousemove = throttle(getMouseMove, 1000);\n```\n#### 使用定时器\n接下来，我们讲讲第二种实现方式，使用定时器。\n\n当触发事件的时候，我们设置一个定时器，再触发事件的时候，如果定时器存在，就不执行，直到定时器执行，然后执行函数，清空定时器，这样就可以设置下个定时器。\n\n```JS\nfunction throttle(func, wait) {\n    var timeout;\n    return function() {\n        context = this;\n        args = arguments;\n        if (!timeout) {\n            timeout = setTimeout(function(){\n                timeout = null;\n                func.apply(context, args)\n            }, wait)\n        }\n    }\n}\n```\n参考链接如下：\nhttps://segmentfault.com/a/1190000009638648\nhttps://segmentfault.com/a/1190000009831691\n\n\n","source":"_posts/debounce_throttle.md","raw":"---\ntitle: js简单的防抖跟节流\ndate: 2018-01-26\nphoto: https://shuangmuyingzi.github.io/img/npm.jpg\n---\n\n前端的优化这个老生常谈的话题，这次我来记录下js的防抖跟节流对于页面优化的实现方式。\n\n<!--more-->\n\n为了使用Web Socket,需要在Web服务器上运行一个Web Socket服务器。这个程序负责协调各方通信，而且启动后就会不间断的运行下去。本厂后端开发语言为php(毕竟是世界上最好的语言)，有兴趣的可以在github上找相关服务端代码阅读。本文只介绍Web Socket客户端的实现。\n\n## 前言\n\n在前端开发中我们会遇到一些频繁的事件触发，比如：window 的 resize、scroll，mousedown、mousemove，keyup、keydown …… 或者根据数据的改变实时得进行数据接口的请求，比如搜索。\n\n下面，我们举个示例代码来了解事件如何频繁的触发：\n\n`index.html` 文件：\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>debounce</title>\n    <style>\n        #container{\n            width: 100%; height: 200px; line-height: 200px; text-align: center; color: #fff; background-color: #333; font-size: 30px;\n        }\n    </style>\n</head>\n<body>\n    <div id=\"container\"></div>\n    <script src=\"debounce.js\"></script>\n</body>\n</html>\n```\n`debounce.js` 文件：\n\n```JS\nvar count = 1;\nvar container = document.getElementById('container');\nfunction getMouseMove() {\n    container.innerHTML = count++;\n};\ncontainer.onmousemove = getMouseMove;\n```\n当我们从浏览器这样滑过去时会调用很多次的getMouseMove方法，这只是一个很简单的效果，浏览器完全反应得过来，试想一下，如果是复杂的回调或者是ajax请求那性能会大受打击，会有明显的卡顿。\n\n为了解决这个问题，一般有两种解决方案：\n    1、debounce 防抖\n    2、throttle 节流\n### 防抖\n防抖的原理就是：你尽管触发事件，但是我一定在事件停止触发 n 秒后才执行。\n\n这意味着如果你在一个事件触发的 n 秒内又触发了这个事件，那我就以新的事件触发的时间为准，在此时间 n 秒后才执行。\n\n总之，就是要等你触发完事件 n 秒内不再触发事件，我才执行!\n\n#### 防抖函数\n\n```JS\nfunction debounce(func, wait) {\n    var timeout;\n    return function () {\n        var context = this;\n        var args = arguments;\n        clearTimeout(timeout)\n        timeout = setTimeout(function(){\n            func.apply(context, args)\n        }, wait);\n    }\n}\n```\n使用：\n\n```JS\ncontainer.onmousemove = debounce(getMouseMove, 1000);\n```\n### 节流\n\n节流就是：如果你持续触发事件，每隔一段时间，只执行一次事件。\n\n关于节流的实现，有两种主流的实现方式，一种是使用时间戳，一种是设置定时器。\n#### 使用时间戳\n让我们来看第一种方法：使用时间戳，当触发事件的时候，我们取出当前的时间戳，然后减去之前的时间戳(最一开始值设为 0 )，如果大于设置的时间周期，就执行函数，然后更新时间戳为当前的时间戳，如果小于，就不执行。\n\n```JS\nfunction throttle(func, wait) {\n    var context, args;\n    var previous = 0;\n    return function() {\n        var now = +new Date();\n        context = this;\n        args = arguments;\n        if (now - previous > wait) {\n            func.apply(context, args);\n            previous = now;\n        }\n    }\n}\n```\n例子依然是用讲 debounce 中的例子，如果你要使用：\n\n```JS\ncontainer.onmousemove = throttle(getMouseMove, 1000);\n```\n#### 使用定时器\n接下来，我们讲讲第二种实现方式，使用定时器。\n\n当触发事件的时候，我们设置一个定时器，再触发事件的时候，如果定时器存在，就不执行，直到定时器执行，然后执行函数，清空定时器，这样就可以设置下个定时器。\n\n```JS\nfunction throttle(func, wait) {\n    var timeout;\n    return function() {\n        context = this;\n        args = arguments;\n        if (!timeout) {\n            timeout = setTimeout(function(){\n                timeout = null;\n                func.apply(context, args)\n            }, wait)\n        }\n    }\n}\n```\n参考链接如下：\nhttps://segmentfault.com/a/1190000009638648\nhttps://segmentfault.com/a/1190000009831691\n\n\n","slug":"debounce-throttle","published":1,"updated":"2018-05-01T07:28:37.245Z","photos":["https://shuangmuyingzi.github.io/img/npm.jpg"],"comments":1,"layout":"post","link":"","_id":"cjgnpte650001u06xry7186k3","content":"<p>前端的优化这个老生常谈的话题，这次我来记录下js的防抖跟节流对于页面优化的实现方式。</p>\n<a id=\"more\"></a>\n<p>为了使用Web Socket,需要在Web服务器上运行一个Web Socket服务器。这个程序负责协调各方通信，而且启动后就会不间断的运行下去。本厂后端开发语言为php(毕竟是世界上最好的语言)，有兴趣的可以在github上找相关服务端代码阅读。本文只介绍Web Socket客户端的实现。</p>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在前端开发中我们会遇到一些频繁的事件触发，比如：window 的 resize、scroll，mousedown、mousemove，keyup、keydown …… 或者根据数据的改变实时得进行数据接口的请求，比如搜索。</p>\n<p>下面，我们举个示例代码来了解事件如何频繁的触发：</p>\n<p><code>index.html</code> 文件：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>debounce<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-id\">#container</span>&#123;</span></div><div class=\"line\"><span class=\"css\">            <span class=\"selector-tag\">width</span>: 100%; <span class=\"selector-tag\">height</span>: 200<span class=\"selector-tag\">px</span>; <span class=\"selector-tag\">line-height</span>: 200<span class=\"selector-tag\">px</span>; <span class=\"selector-tag\">text-align</span>: <span class=\"selector-tag\">center</span>; <span class=\"selector-tag\">color</span>: <span class=\"selector-id\">#fff</span>; <span class=\"selector-tag\">background-color</span>: <span class=\"selector-id\">#333</span>; <span class=\"selector-tag\">font-size</span>: 30<span class=\"selector-tag\">px</span>;</span></div><div class=\"line\"><span class=\"undefined\">        &#125;</span></div><div class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"container\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"debounce.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><code>debounce.js</code> 文件：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> count = <span class=\"number\">1</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> container = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'container'</span>);</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getMouseMove</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    container.innerHTML = count++;</div><div class=\"line\">&#125;;</div><div class=\"line\">container.onmousemove = getMouseMove;</div></pre></td></tr></table></figure>\n<p>当我们从浏览器这样滑过去时会调用很多次的getMouseMove方法，这只是一个很简单的效果，浏览器完全反应得过来，试想一下，如果是复杂的回调或者是ajax请求那性能会大受打击，会有明显的卡顿。</p>\n<p>为了解决这个问题，一般有两种解决方案：<br>    1、debounce 防抖<br>    2、throttle 节流</p>\n<h3 id=\"防抖\"><a href=\"#防抖\" class=\"headerlink\" title=\"防抖\"></a>防抖</h3><p>防抖的原理就是：你尽管触发事件，但是我一定在事件停止触发 n 秒后才执行。</p>\n<p>这意味着如果你在一个事件触发的 n 秒内又触发了这个事件，那我就以新的事件触发的时间为准，在此时间 n 秒后才执行。</p>\n<p>总之，就是要等你触发完事件 n 秒内不再触发事件，我才执行!</p>\n<h4 id=\"防抖函数\"><a href=\"#防抖函数\" class=\"headerlink\" title=\"防抖函数\"></a>防抖函数</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">debounce</span>(<span class=\"params\">func, wait</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> timeout;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> context = <span class=\"keyword\">this</span>;</div><div class=\"line\">        <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</div><div class=\"line\">        clearTimeout(timeout)</div><div class=\"line\">        timeout = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">            func.apply(context, args)</div><div class=\"line\">        &#125;, wait);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>使用：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">container.onmousemove = debounce(getMouseMove, <span class=\"number\">1000</span>);</div></pre></td></tr></table></figure>\n<h3 id=\"节流\"><a href=\"#节流\" class=\"headerlink\" title=\"节流\"></a>节流</h3><p>节流就是：如果你持续触发事件，每隔一段时间，只执行一次事件。</p>\n<p>关于节流的实现，有两种主流的实现方式，一种是使用时间戳，一种是设置定时器。</p>\n<h4 id=\"使用时间戳\"><a href=\"#使用时间戳\" class=\"headerlink\" title=\"使用时间戳\"></a>使用时间戳</h4><p>让我们来看第一种方法：使用时间戳，当触发事件的时候，我们取出当前的时间戳，然后减去之前的时间戳(最一开始值设为 0 )，如果大于设置的时间周期，就执行函数，然后更新时间戳为当前的时间戳，如果小于，就不执行。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">throttle</span>(<span class=\"params\">func, wait</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> context, args;</div><div class=\"line\">    <span class=\"keyword\">var</span> previous = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> now = +<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</div><div class=\"line\">        context = <span class=\"keyword\">this</span>;</div><div class=\"line\">        args = <span class=\"built_in\">arguments</span>;</div><div class=\"line\">        <span class=\"keyword\">if</span> (now - previous &gt; wait) &#123;</div><div class=\"line\">            func.apply(context, args);</div><div class=\"line\">            previous = now;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>例子依然是用讲 debounce 中的例子，如果你要使用：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">container.onmousemove = throttle(getMouseMove, <span class=\"number\">1000</span>);</div></pre></td></tr></table></figure>\n<h4 id=\"使用定时器\"><a href=\"#使用定时器\" class=\"headerlink\" title=\"使用定时器\"></a>使用定时器</h4><p>接下来，我们讲讲第二种实现方式，使用定时器。</p>\n<p>当触发事件的时候，我们设置一个定时器，再触发事件的时候，如果定时器存在，就不执行，直到定时器执行，然后执行函数，清空定时器，这样就可以设置下个定时器。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">throttle</span>(<span class=\"params\">func, wait</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> timeout;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        context = <span class=\"keyword\">this</span>;</div><div class=\"line\">        args = <span class=\"built_in\">arguments</span>;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!timeout) &#123;</div><div class=\"line\">            timeout = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">                timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">                func.apply(context, args)</div><div class=\"line\">            &#125;, wait)</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>参考链接如下：<br><a href=\"https://segmentfault.com/a/1190000009638648\" target=\"_blank\" rel=\"external\">https://segmentfault.com/a/1190000009638648</a><br><a href=\"https://segmentfault.com/a/1190000009831691\" target=\"_blank\" rel=\"external\">https://segmentfault.com/a/1190000009831691</a></p>\n","site":{"data":{}},"excerpt":"<p>前端的优化这个老生常谈的话题，这次我来记录下js的防抖跟节流对于页面优化的实现方式。</p>","more":"<p>为了使用Web Socket,需要在Web服务器上运行一个Web Socket服务器。这个程序负责协调各方通信，而且启动后就会不间断的运行下去。本厂后端开发语言为php(毕竟是世界上最好的语言)，有兴趣的可以在github上找相关服务端代码阅读。本文只介绍Web Socket客户端的实现。</p>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在前端开发中我们会遇到一些频繁的事件触发，比如：window 的 resize、scroll，mousedown、mousemove，keyup、keydown …… 或者根据数据的改变实时得进行数据接口的请求，比如搜索。</p>\n<p>下面，我们举个示例代码来了解事件如何频繁的触发：</p>\n<p><code>index.html</code> 文件：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>debounce<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"css\">        <span class=\"selector-id\">#container</span>&#123;</span></div><div class=\"line\"><span class=\"css\">            <span class=\"selector-tag\">width</span>: 100%; <span class=\"selector-tag\">height</span>: 200<span class=\"selector-tag\">px</span>; <span class=\"selector-tag\">line-height</span>: 200<span class=\"selector-tag\">px</span>; <span class=\"selector-tag\">text-align</span>: <span class=\"selector-tag\">center</span>; <span class=\"selector-tag\">color</span>: <span class=\"selector-id\">#fff</span>; <span class=\"selector-tag\">background-color</span>: <span class=\"selector-id\">#333</span>; <span class=\"selector-tag\">font-size</span>: 30<span class=\"selector-tag\">px</span>;</span></div><div class=\"line\"><span class=\"undefined\">        &#125;</span></div><div class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"container\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"debounce.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><code>debounce.js</code> 文件：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> count = <span class=\"number\">1</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> container = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'container'</span>);</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getMouseMove</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    container.innerHTML = count++;</div><div class=\"line\">&#125;;</div><div class=\"line\">container.onmousemove = getMouseMove;</div></pre></td></tr></table></figure>\n<p>当我们从浏览器这样滑过去时会调用很多次的getMouseMove方法，这只是一个很简单的效果，浏览器完全反应得过来，试想一下，如果是复杂的回调或者是ajax请求那性能会大受打击，会有明显的卡顿。</p>\n<p>为了解决这个问题，一般有两种解决方案：<br>    1、debounce 防抖<br>    2、throttle 节流</p>\n<h3 id=\"防抖\"><a href=\"#防抖\" class=\"headerlink\" title=\"防抖\"></a>防抖</h3><p>防抖的原理就是：你尽管触发事件，但是我一定在事件停止触发 n 秒后才执行。</p>\n<p>这意味着如果你在一个事件触发的 n 秒内又触发了这个事件，那我就以新的事件触发的时间为准，在此时间 n 秒后才执行。</p>\n<p>总之，就是要等你触发完事件 n 秒内不再触发事件，我才执行!</p>\n<h4 id=\"防抖函数\"><a href=\"#防抖函数\" class=\"headerlink\" title=\"防抖函数\"></a>防抖函数</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">debounce</span>(<span class=\"params\">func, wait</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> timeout;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> context = <span class=\"keyword\">this</span>;</div><div class=\"line\">        <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</div><div class=\"line\">        clearTimeout(timeout)</div><div class=\"line\">        timeout = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">            func.apply(context, args)</div><div class=\"line\">        &#125;, wait);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>使用：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">container.onmousemove = debounce(getMouseMove, <span class=\"number\">1000</span>);</div></pre></td></tr></table></figure>\n<h3 id=\"节流\"><a href=\"#节流\" class=\"headerlink\" title=\"节流\"></a>节流</h3><p>节流就是：如果你持续触发事件，每隔一段时间，只执行一次事件。</p>\n<p>关于节流的实现，有两种主流的实现方式，一种是使用时间戳，一种是设置定时器。</p>\n<h4 id=\"使用时间戳\"><a href=\"#使用时间戳\" class=\"headerlink\" title=\"使用时间戳\"></a>使用时间戳</h4><p>让我们来看第一种方法：使用时间戳，当触发事件的时候，我们取出当前的时间戳，然后减去之前的时间戳(最一开始值设为 0 )，如果大于设置的时间周期，就执行函数，然后更新时间戳为当前的时间戳，如果小于，就不执行。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">throttle</span>(<span class=\"params\">func, wait</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> context, args;</div><div class=\"line\">    <span class=\"keyword\">var</span> previous = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> now = +<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</div><div class=\"line\">        context = <span class=\"keyword\">this</span>;</div><div class=\"line\">        args = <span class=\"built_in\">arguments</span>;</div><div class=\"line\">        <span class=\"keyword\">if</span> (now - previous &gt; wait) &#123;</div><div class=\"line\">            func.apply(context, args);</div><div class=\"line\">            previous = now;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>例子依然是用讲 debounce 中的例子，如果你要使用：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">container.onmousemove = throttle(getMouseMove, <span class=\"number\">1000</span>);</div></pre></td></tr></table></figure>\n<h4 id=\"使用定时器\"><a href=\"#使用定时器\" class=\"headerlink\" title=\"使用定时器\"></a>使用定时器</h4><p>接下来，我们讲讲第二种实现方式，使用定时器。</p>\n<p>当触发事件的时候，我们设置一个定时器，再触发事件的时候，如果定时器存在，就不执行，直到定时器执行，然后执行函数，清空定时器，这样就可以设置下个定时器。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">throttle</span>(<span class=\"params\">func, wait</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> timeout;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        context = <span class=\"keyword\">this</span>;</div><div class=\"line\">        args = <span class=\"built_in\">arguments</span>;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!timeout) &#123;</div><div class=\"line\">            timeout = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">                timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">                func.apply(context, args)</div><div class=\"line\">            &#125;, wait)</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>参考链接如下：<br><a href=\"https://segmentfault.com/a/1190000009638648\" target=\"_blank\" rel=\"external\">https://segmentfault.com/a/1190000009638648</a><br><a href=\"https://segmentfault.com/a/1190000009831691\" target=\"_blank\" rel=\"external\">https://segmentfault.com/a/1190000009831691</a></p>"},{"title":"总有后悔药吃的git","date":"2018-04-28T00:00:00.000Z","_content":"\n记录一些常用的git操作，以便回顾和查询。理解这些指令，觉得最重要的是理解Git的内部原理，比如Git的分布式版本控制，分清楚工作区、暂存区、版本库，还有就是理解Git跟踪并管理的是修改，而非文件。\n\n<!--more-->\n\n### 我的骚操作\n重说三：mac系统“最近使用”里面的文件不能删，不能删，千万不要随便删。那天我以为这里(最近使用)的文件是对别的地方的拷贝，我一向都有洁癖，经常会删除电脑那些基本不用的东西或者是重复的东西，结果一删造成千古恨，至今为止我都还没处理完造成的影响，只能发现再处理，好在有git仓库的文件可以有后悔药吃，其他的也就只能哭了。\n\n### 几个重要的名词\n![GitHub set up](https://shuangmuyingzi.github.io/img/git.jpeg)\n\n* Workspace：工作区\n* Index / Stage：暂存区\n* Repository：仓库区（或本地仓库）\n* Remote：远程仓库\n\n#### 设置\n\n```\n$ git config --global user.name \"Your Name\"\n$ git config --global user.email \"email@example.com\"\n```\n#### 提交\ngit 跟踪的是修改，而不是文件\n![GitHub set up](https://shuangmuyingzi.github.io/img/git2.png)\n\n```\n#将“当前修改”移动到暂存区(stage)\n git add a.txt\n#将暂存区修改提交\n git commit -m \"Add a.txt.\"\n```\n#### 查看状态\n\n```\n git status\n //显示暂存区和工作区的差异\n git diff\n```\n#### 回退\n\n```\n# 放弃工作区修改\n$ git checkout -- file.name\n$ git checkout -- .\n\n# 取消commit(比如需要重写commit信息)\n$ git reset --soft HEAD\n\n# 取消commit、add(重新提交代码和commit)\n$ git reset HEAD\n$ git reset --mixed HEAD\n\n# 取消commit、add、工作区修改(需要完全重置)\n$ git reset --hard HEAD\n```\n#### 记录\n\n```\n$ git reflog\n$ git log\n```\n#### 删除\n\n```\n$ rm file.name\n$ git rm file.name\n$ git commit -m \"Del\"\n```\n#### 远程操作\n\n```\n$ git remote add origin git@github.com:shuangmuyingzi/loadingModule.git\n# 第一次推送，-u(--set-upstream)指定默认上游\n$ git push -u origin master\n$ git push origin master\n```\n#### 克隆\n\n```\n$ git clone https://github.com/shuangmuyingzi/loadingModule.git\n$ git clone git@github.com:shuangmuyingzi/loadingModule.git\n```\n#### 分支\n创建分支\n\n```\n$ git branch [name]\n```\n切换分支\n\n```\n$ git checkout [name]\n```\n创建并切换分支\n\n```\n$ git checkout -b [name]\n```\n合并分支\n\n```\n$ git merge [name]\n```\n删除分支\n\n```\n$ git branch -d [name]\n```\n查看分支\n\n```\n$ git branch\n```\n#### 撤销\n撤销本地修改\n\n```\n$ git checkout -- [filename]\n$ git checkout -- .\n```\n重置暂存区和工作区，与上一次commit保持一致\n\n```\n$ git reset --hard ［filename］\n```\n#### Git fetch和pull的区别\nGit中从远程的分支获取最新的版本到本地有这样2个命令：\n\n##### git fetch：相当于是从远程获取最新版本到本地，不会自动merge\n\ngit fetch origin master \ngit log -p master..origin/master \ngit merge origin/master\n\n以上命令的含义：\n\n首先从远程的origin的master主分支下载最新的版本到origin/master分支上；然后比较本地的master分支和origin/master分支的差别；最后进行合并。上述过程其实可以用以下更清晰的方式来进行： \ngit fetch origin master:tmp \ngit diff tmp \ngit merge tmp \n从远程获取最新的版本到本地的tmp分支上之后再进行比较合并\n\n##### git pull：相当于是从远程获取最新版本并merge到本地\n\ngit pull origin master\n\n上述命令其实相当于git fetch 和 git merge 在实际使用中，git fetch更安全一些。因为在merge前，我们可以查看更新情况，然后再决定是否合并结束。\n\n参考链接：\nhttps://aotu.io/notes/2015/11/17/Git-Commands/index.html\n\n\n\n\n\n\n","source":"_posts/git.md","raw":"---\ntitle: 总有后悔药吃的git\ndate: 2018-04-28\nphoto: https://shuangmuyingzi.github.io/img/npm.jpg\n---\n\n记录一些常用的git操作，以便回顾和查询。理解这些指令，觉得最重要的是理解Git的内部原理，比如Git的分布式版本控制，分清楚工作区、暂存区、版本库，还有就是理解Git跟踪并管理的是修改，而非文件。\n\n<!--more-->\n\n### 我的骚操作\n重说三：mac系统“最近使用”里面的文件不能删，不能删，千万不要随便删。那天我以为这里(最近使用)的文件是对别的地方的拷贝，我一向都有洁癖，经常会删除电脑那些基本不用的东西或者是重复的东西，结果一删造成千古恨，至今为止我都还没处理完造成的影响，只能发现再处理，好在有git仓库的文件可以有后悔药吃，其他的也就只能哭了。\n\n### 几个重要的名词\n![GitHub set up](https://shuangmuyingzi.github.io/img/git.jpeg)\n\n* Workspace：工作区\n* Index / Stage：暂存区\n* Repository：仓库区（或本地仓库）\n* Remote：远程仓库\n\n#### 设置\n\n```\n$ git config --global user.name \"Your Name\"\n$ git config --global user.email \"email@example.com\"\n```\n#### 提交\ngit 跟踪的是修改，而不是文件\n![GitHub set up](https://shuangmuyingzi.github.io/img/git2.png)\n\n```\n#将“当前修改”移动到暂存区(stage)\n git add a.txt\n#将暂存区修改提交\n git commit -m \"Add a.txt.\"\n```\n#### 查看状态\n\n```\n git status\n //显示暂存区和工作区的差异\n git diff\n```\n#### 回退\n\n```\n# 放弃工作区修改\n$ git checkout -- file.name\n$ git checkout -- .\n\n# 取消commit(比如需要重写commit信息)\n$ git reset --soft HEAD\n\n# 取消commit、add(重新提交代码和commit)\n$ git reset HEAD\n$ git reset --mixed HEAD\n\n# 取消commit、add、工作区修改(需要完全重置)\n$ git reset --hard HEAD\n```\n#### 记录\n\n```\n$ git reflog\n$ git log\n```\n#### 删除\n\n```\n$ rm file.name\n$ git rm file.name\n$ git commit -m \"Del\"\n```\n#### 远程操作\n\n```\n$ git remote add origin git@github.com:shuangmuyingzi/loadingModule.git\n# 第一次推送，-u(--set-upstream)指定默认上游\n$ git push -u origin master\n$ git push origin master\n```\n#### 克隆\n\n```\n$ git clone https://github.com/shuangmuyingzi/loadingModule.git\n$ git clone git@github.com:shuangmuyingzi/loadingModule.git\n```\n#### 分支\n创建分支\n\n```\n$ git branch [name]\n```\n切换分支\n\n```\n$ git checkout [name]\n```\n创建并切换分支\n\n```\n$ git checkout -b [name]\n```\n合并分支\n\n```\n$ git merge [name]\n```\n删除分支\n\n```\n$ git branch -d [name]\n```\n查看分支\n\n```\n$ git branch\n```\n#### 撤销\n撤销本地修改\n\n```\n$ git checkout -- [filename]\n$ git checkout -- .\n```\n重置暂存区和工作区，与上一次commit保持一致\n\n```\n$ git reset --hard ［filename］\n```\n#### Git fetch和pull的区别\nGit中从远程的分支获取最新的版本到本地有这样2个命令：\n\n##### git fetch：相当于是从远程获取最新版本到本地，不会自动merge\n\ngit fetch origin master \ngit log -p master..origin/master \ngit merge origin/master\n\n以上命令的含义：\n\n首先从远程的origin的master主分支下载最新的版本到origin/master分支上；然后比较本地的master分支和origin/master分支的差别；最后进行合并。上述过程其实可以用以下更清晰的方式来进行： \ngit fetch origin master:tmp \ngit diff tmp \ngit merge tmp \n从远程获取最新的版本到本地的tmp分支上之后再进行比较合并\n\n##### git pull：相当于是从远程获取最新版本并merge到本地\n\ngit pull origin master\n\n上述命令其实相当于git fetch 和 git merge 在实际使用中，git fetch更安全一些。因为在merge前，我们可以查看更新情况，然后再决定是否合并结束。\n\n参考链接：\nhttps://aotu.io/notes/2015/11/17/Git-Commands/index.html\n\n\n\n\n\n\n","slug":"git","published":1,"updated":"2018-05-01T13:30:34.057Z","photos":["https://shuangmuyingzi.github.io/img/npm.jpg"],"comments":1,"layout":"post","link":"","_id":"cjgnpte6a0002u06xk7ezh8sf","content":"<p>记录一些常用的git操作，以便回顾和查询。理解这些指令，觉得最重要的是理解Git的内部原理，比如Git的分布式版本控制，分清楚工作区、暂存区、版本库，还有就是理解Git跟踪并管理的是修改，而非文件。</p>\n<a id=\"more\"></a>\n<h3 id=\"我的骚操作\"><a href=\"#我的骚操作\" class=\"headerlink\" title=\"我的骚操作\"></a>我的骚操作</h3><p>重说三：mac系统“最近使用”里面的文件不能删，不能删，千万不要随便删。那天我以为这里(最近使用)的文件是对别的地方的拷贝，我一向都有洁癖，经常会删除电脑那些基本不用的东西或者是重复的东西，结果一删造成千古恨，至今为止我都还没处理完造成的影响，只能发现再处理，好在有git仓库的文件可以有后悔药吃，其他的也就只能哭了。</p>\n<h3 id=\"几个重要的名词\"><a href=\"#几个重要的名词\" class=\"headerlink\" title=\"几个重要的名词\"></a>几个重要的名词</h3><p><img src=\"https://shuangmuyingzi.github.io/img/git.jpeg\" alt=\"GitHub set up\"></p>\n<ul>\n<li>Workspace：工作区</li>\n<li>Index / Stage：暂存区</li>\n<li>Repository：仓库区（或本地仓库）</li>\n<li>Remote：远程仓库</li>\n</ul>\n<h4 id=\"设置\"><a href=\"#设置\" class=\"headerlink\" title=\"设置\"></a>设置</h4><figure class=\"highlight routeros\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ git<span class=\"built_in\"> config </span>--global user.name <span class=\"string\">\"Your Name\"</span></div><div class=\"line\">$ git<span class=\"built_in\"> config </span>--global user.email <span class=\"string\">\"email@example.com\"</span></div></pre></td></tr></table></figure>\n<h4 id=\"提交\"><a href=\"#提交\" class=\"headerlink\" title=\"提交\"></a>提交</h4><p>git 跟踪的是修改，而不是文件<br><img src=\"https://shuangmuyingzi.github.io/img/git2.png\" alt=\"GitHub set up\"></p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#将“当前修改”移动到暂存区(stage)</span></div><div class=\"line\"> git <span class=\"keyword\">add</span><span class=\"bash\"> a.txt</span></div><div class=\"line\"><span class=\"bash\"><span class=\"comment\">#将暂存区修改提交</span></span></div><div class=\"line\"><span class=\"bash\"> git commit -m <span class=\"string\">\"Add a.txt.\"</span></span></div></pre></td></tr></table></figure>\n<h4 id=\"查看状态\"><a href=\"#查看状态\" class=\"headerlink\" title=\"查看状态\"></a>查看状态</h4><figure class=\"highlight maxima\"><table><tr><td class=\"code\"><pre><div class=\"line\">git <span class=\"built_in\">status</span></div><div class=\"line\">//显示暂存区和工作区的差异</div><div class=\"line\">git <span class=\"built_in\">diff</span></div></pre></td></tr></table></figure>\n<h4 id=\"回退\"><a href=\"#回退\" class=\"headerlink\" title=\"回退\"></a>回退</h4><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 放弃工作区修改</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git checkout -- file.name</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git checkout -- .</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 取消commit(比如需要重写commit信息)</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git reset --soft HEAD</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 取消commit、add(重新提交代码和commit)</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git reset HEAD</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git reset --mixed HEAD</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 取消commit、add、工作区修改(需要完全重置)</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git reset --hard HEAD</span></div></pre></td></tr></table></figure>\n<h4 id=\"记录\"><a href=\"#记录\" class=\"headerlink\" title=\"记录\"></a>记录</h4><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git reflog</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git <span class=\"built_in\">log</span></span></div></pre></td></tr></table></figure>\n<h4 id=\"删除\"><a href=\"#删除\" class=\"headerlink\" title=\"删除\"></a>删除</h4><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> rm file.name</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git rm file.name</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git commit -m <span class=\"string\">\"Del\"</span></span></div></pre></td></tr></table></figure>\n<h4 id=\"远程操作\"><a href=\"#远程操作\" class=\"headerlink\" title=\"远程操作\"></a>远程操作</h4><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git remote add origin git@github.com:shuangmuyingzi/loadingModule.git</span></div><div class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 第一次推送，-u(--<span class=\"built_in\">set</span>-upstream)指定默认上游</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git push -u origin master</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git push origin master</span></div></pre></td></tr></table></figure>\n<h4 id=\"克隆\"><a href=\"#克隆\" class=\"headerlink\" title=\"克隆\"></a>克隆</h4><figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ git <span class=\"keyword\">clone</span> <span class=\"title\">https</span>://github.com/shuangmuyingzi/loadingModule.git</div><div class=\"line\">$ git <span class=\"keyword\">clone</span> <span class=\"title\">git</span>@github.com:shuangmuyingzi/loadingModule.git</div></pre></td></tr></table></figure>\n<h4 id=\"分支\"><a href=\"#分支\" class=\"headerlink\" title=\"分支\"></a>分支</h4><p>创建分支</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git branch [name]</span></div></pre></td></tr></table></figure>\n<p>切换分支</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git checkout [name]</span></div></pre></td></tr></table></figure>\n<p>创建并切换分支</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git checkout -b [name]</span></div></pre></td></tr></table></figure>\n<p>合并分支</p>\n<figure class=\"highlight fortran\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ git <span class=\"built_in\">merge</span> [<span class=\"keyword\">name</span>]</div></pre></td></tr></table></figure>\n<p>删除分支</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git branch -d [name]</span></div></pre></td></tr></table></figure>\n<p>查看分支</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git branch</span></div></pre></td></tr></table></figure>\n<h4 id=\"撤销\"><a href=\"#撤销\" class=\"headerlink\" title=\"撤销\"></a>撤销</h4><p>撤销本地修改</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git checkout -- [filename]</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git checkout -- .</span></div></pre></td></tr></table></figure>\n<p>重置暂存区和工作区，与上一次commit保持一致</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git reset --hard ［filename］</span></div></pre></td></tr></table></figure>\n<h4 id=\"Git-fetch和pull的区别\"><a href=\"#Git-fetch和pull的区别\" class=\"headerlink\" title=\"Git fetch和pull的区别\"></a>Git fetch和pull的区别</h4><p>Git中从远程的分支获取最新的版本到本地有这样2个命令：</p>\n<h5 id=\"git-fetch：相当于是从远程获取最新版本到本地，不会自动merge\"><a href=\"#git-fetch：相当于是从远程获取最新版本到本地，不会自动merge\" class=\"headerlink\" title=\"git fetch：相当于是从远程获取最新版本到本地，不会自动merge\"></a>git fetch：相当于是从远程获取最新版本到本地，不会自动merge</h5><p>git fetch origin master<br>git log -p master..origin/master<br>git merge origin/master</p>\n<p>以上命令的含义：</p>\n<p>首先从远程的origin的master主分支下载最新的版本到origin/master分支上；然后比较本地的master分支和origin/master分支的差别；最后进行合并。上述过程其实可以用以下更清晰的方式来进行：<br>git fetch origin master:tmp<br>git diff tmp<br>git merge tmp<br>从远程获取最新的版本到本地的tmp分支上之后再进行比较合并</p>\n<h5 id=\"git-pull：相当于是从远程获取最新版本并merge到本地\"><a href=\"#git-pull：相当于是从远程获取最新版本并merge到本地\" class=\"headerlink\" title=\"git pull：相当于是从远程获取最新版本并merge到本地\"></a>git pull：相当于是从远程获取最新版本并merge到本地</h5><p>git pull origin master</p>\n<p>上述命令其实相当于git fetch 和 git merge 在实际使用中，git fetch更安全一些。因为在merge前，我们可以查看更新情况，然后再决定是否合并结束。</p>\n<p>参考链接：<br><a href=\"https://aotu.io/notes/2015/11/17/Git-Commands/index.html\" target=\"_blank\" rel=\"external\">https://aotu.io/notes/2015/11/17/Git-Commands/index.html</a></p>\n","site":{"data":{}},"excerpt":"<p>记录一些常用的git操作，以便回顾和查询。理解这些指令，觉得最重要的是理解Git的内部原理，比如Git的分布式版本控制，分清楚工作区、暂存区、版本库，还有就是理解Git跟踪并管理的是修改，而非文件。</p>","more":"<h3 id=\"我的骚操作\"><a href=\"#我的骚操作\" class=\"headerlink\" title=\"我的骚操作\"></a>我的骚操作</h3><p>重说三：mac系统“最近使用”里面的文件不能删，不能删，千万不要随便删。那天我以为这里(最近使用)的文件是对别的地方的拷贝，我一向都有洁癖，经常会删除电脑那些基本不用的东西或者是重复的东西，结果一删造成千古恨，至今为止我都还没处理完造成的影响，只能发现再处理，好在有git仓库的文件可以有后悔药吃，其他的也就只能哭了。</p>\n<h3 id=\"几个重要的名词\"><a href=\"#几个重要的名词\" class=\"headerlink\" title=\"几个重要的名词\"></a>几个重要的名词</h3><p><img src=\"https://shuangmuyingzi.github.io/img/git.jpeg\" alt=\"GitHub set up\"></p>\n<ul>\n<li>Workspace：工作区</li>\n<li>Index / Stage：暂存区</li>\n<li>Repository：仓库区（或本地仓库）</li>\n<li>Remote：远程仓库</li>\n</ul>\n<h4 id=\"设置\"><a href=\"#设置\" class=\"headerlink\" title=\"设置\"></a>设置</h4><figure class=\"highlight routeros\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ git<span class=\"built_in\"> config </span>--global user.name <span class=\"string\">\"Your Name\"</span></div><div class=\"line\">$ git<span class=\"built_in\"> config </span>--global user.email <span class=\"string\">\"email@example.com\"</span></div></pre></td></tr></table></figure>\n<h4 id=\"提交\"><a href=\"#提交\" class=\"headerlink\" title=\"提交\"></a>提交</h4><p>git 跟踪的是修改，而不是文件<br><img src=\"https://shuangmuyingzi.github.io/img/git2.png\" alt=\"GitHub set up\"></p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#将“当前修改”移动到暂存区(stage)</span></div><div class=\"line\"> git <span class=\"keyword\">add</span><span class=\"bash\"> a.txt</span></div><div class=\"line\"><span class=\"bash\"><span class=\"comment\">#将暂存区修改提交</span></span></div><div class=\"line\"><span class=\"bash\"> git commit -m <span class=\"string\">\"Add a.txt.\"</span></span></div></pre></td></tr></table></figure>\n<h4 id=\"查看状态\"><a href=\"#查看状态\" class=\"headerlink\" title=\"查看状态\"></a>查看状态</h4><figure class=\"highlight maxima\"><table><tr><td class=\"code\"><pre><div class=\"line\">git <span class=\"built_in\">status</span></div><div class=\"line\">//显示暂存区和工作区的差异</div><div class=\"line\">git <span class=\"built_in\">diff</span></div></pre></td></tr></table></figure>\n<h4 id=\"回退\"><a href=\"#回退\" class=\"headerlink\" title=\"回退\"></a>回退</h4><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 放弃工作区修改</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git checkout -- file.name</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git checkout -- .</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 取消commit(比如需要重写commit信息)</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git reset --soft HEAD</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 取消commit、add(重新提交代码和commit)</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git reset HEAD</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git reset --mixed HEAD</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 取消commit、add、工作区修改(需要完全重置)</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git reset --hard HEAD</span></div></pre></td></tr></table></figure>\n<h4 id=\"记录\"><a href=\"#记录\" class=\"headerlink\" title=\"记录\"></a>记录</h4><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git reflog</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git <span class=\"built_in\">log</span></span></div></pre></td></tr></table></figure>\n<h4 id=\"删除\"><a href=\"#删除\" class=\"headerlink\" title=\"删除\"></a>删除</h4><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> rm file.name</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git rm file.name</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git commit -m <span class=\"string\">\"Del\"</span></span></div></pre></td></tr></table></figure>\n<h4 id=\"远程操作\"><a href=\"#远程操作\" class=\"headerlink\" title=\"远程操作\"></a>远程操作</h4><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git remote add origin git@github.com:shuangmuyingzi/loadingModule.git</span></div><div class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 第一次推送，-u(--<span class=\"built_in\">set</span>-upstream)指定默认上游</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git push -u origin master</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git push origin master</span></div></pre></td></tr></table></figure>\n<h4 id=\"克隆\"><a href=\"#克隆\" class=\"headerlink\" title=\"克隆\"></a>克隆</h4><figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ git <span class=\"keyword\">clone</span> <span class=\"title\">https</span>://github.com/shuangmuyingzi/loadingModule.git</div><div class=\"line\">$ git <span class=\"keyword\">clone</span> <span class=\"title\">git</span>@github.com:shuangmuyingzi/loadingModule.git</div></pre></td></tr></table></figure>\n<h4 id=\"分支\"><a href=\"#分支\" class=\"headerlink\" title=\"分支\"></a>分支</h4><p>创建分支</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git branch [name]</span></div></pre></td></tr></table></figure>\n<p>切换分支</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git checkout [name]</span></div></pre></td></tr></table></figure>\n<p>创建并切换分支</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git checkout -b [name]</span></div></pre></td></tr></table></figure>\n<p>合并分支</p>\n<figure class=\"highlight fortran\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ git <span class=\"built_in\">merge</span> [<span class=\"keyword\">name</span>]</div></pre></td></tr></table></figure>\n<p>删除分支</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git branch -d [name]</span></div></pre></td></tr></table></figure>\n<p>查看分支</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git branch</span></div></pre></td></tr></table></figure>\n<h4 id=\"撤销\"><a href=\"#撤销\" class=\"headerlink\" title=\"撤销\"></a>撤销</h4><p>撤销本地修改</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git checkout -- [filename]</span></div><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git checkout -- .</span></div></pre></td></tr></table></figure>\n<p>重置暂存区和工作区，与上一次commit保持一致</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git reset --hard ［filename］</span></div></pre></td></tr></table></figure>\n<h4 id=\"Git-fetch和pull的区别\"><a href=\"#Git-fetch和pull的区别\" class=\"headerlink\" title=\"Git fetch和pull的区别\"></a>Git fetch和pull的区别</h4><p>Git中从远程的分支获取最新的版本到本地有这样2个命令：</p>\n<h5 id=\"git-fetch：相当于是从远程获取最新版本到本地，不会自动merge\"><a href=\"#git-fetch：相当于是从远程获取最新版本到本地，不会自动merge\" class=\"headerlink\" title=\"git fetch：相当于是从远程获取最新版本到本地，不会自动merge\"></a>git fetch：相当于是从远程获取最新版本到本地，不会自动merge</h5><p>git fetch origin master<br>git log -p master..origin/master<br>git merge origin/master</p>\n<p>以上命令的含义：</p>\n<p>首先从远程的origin的master主分支下载最新的版本到origin/master分支上；然后比较本地的master分支和origin/master分支的差别；最后进行合并。上述过程其实可以用以下更清晰的方式来进行：<br>git fetch origin master:tmp<br>git diff tmp<br>git merge tmp<br>从远程获取最新的版本到本地的tmp分支上之后再进行比较合并</p>\n<h5 id=\"git-pull：相当于是从远程获取最新版本并merge到本地\"><a href=\"#git-pull：相当于是从远程获取最新版本并merge到本地\" class=\"headerlink\" title=\"git pull：相当于是从远程获取最新版本并merge到本地\"></a>git pull：相当于是从远程获取最新版本并merge到本地</h5><p>git pull origin master</p>\n<p>上述命令其实相当于git fetch 和 git merge 在实际使用中，git fetch更安全一些。因为在merge前，我们可以查看更新情况，然后再决定是否合并结束。</p>\n<p>参考链接：<br><a href=\"https://aotu.io/notes/2015/11/17/Git-Commands/index.html\" target=\"_blank\" rel=\"external\">https://aotu.io/notes/2015/11/17/Git-Commands/index.html</a></p>"},{"title":"NPM — JavaScript 的包管理器","date":"2017-11-23T00:00:00.000Z","_content":"\n本文主要介绍npm的常用命令，以及如何发布一些常用的js模块化代码到npm上面方便日后的使用，和举例如何把一个vue组件打包发布到npm到最后下载到本地使用的过程。\n\n<!--more-->\n\nnpm(Node Package Manager)是node的默认模块管理器，一个命令行下的软件，用来安装和管理node模块，同时也可以管理其他开放式的js模块代码。npm有一个好处是除了下载需要的模块外还会帮我们解决依赖关系，同时下载所依赖的模块。\n\n## NPM ——  JavaScript 的包管理器\n\n### npm help\n\n``` \n    access, adduser, bin, bugs, c, cache, completion, config,\n    ddp, dedupe, deprecate, dist-tag, docs, doctor, edit,\n    explore, get, help, help-search, i, init, install,\n    install-test, it, link, list, ln, login, logout, ls,\n    outdated, owner, pack, ping, prefix, prune, publish, rb,\n    rebuild, repo, restart, root, run, run-script, s, se,\n    search, set, shrinkwrap, star, stars, start, stop, t, team,\n    test, tst, un, uninstall, unpublish, unstar, up, update, v,\n    version, view, whoami\n```\n\nnpm help 可以查看所有可使用的命令。\n### npm常用指令\n\n``` \nnpm install 名字      //该命令用于安装模块\nnpm uninstall 名字    //该命令用于卸载模块\nnpm run 名字          //该命令用于执行脚本\n```\n\n### 如何用npm发布自己的模块\n\n我们所有下载以及发布的包是存放在这个地址：https://www.npmjs.com/\n我们发布一个东西，得要有自己的标识吧，所以得先注册账号。\n#### 1.注册用户\n```\nnpm adduser\n运行该命令后会需要你依次输入\nUsername:\nPassword:\nEmail:\n```\n#### 2.检查\n接下来是需要检查一下有没有注册成功\n\n```\nnpm whoami\n```\n#### 3.建立package\n\n```\nnpm init\n//一路回车\nname: (dateFormat) datechange\nversion: (1.0.0) \ndescription: change date format\nentry point: (index.js) \ntest command: \ngit repository: https://github.com/shuangmuyingzi/dateFormat.git\nkeywords: dateformat date datechange\nauthor: lingzi\nlicense: (ISC) \nAbout to write to /Users/linziying/Downloads/npm/dateFormat/package.json:\n\n{\n  \"name\": \"datechange\",\n  \"version\": \"1.0.0\",\n  \"description\": \"change date format\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/shuangmuyingzi/dateFormat.git\"\n  },\n  \"keywords\": [\n    \"dateformat\",\n    \"date\",\n    \"datechange\"\n  ],\n  \"author\": \"lingzi\",\n  \"license\": \"ISC\",\n  \"bugs\": {\n    \"url\": \"https://github.com/shuangmuyingzi/dateFormat/issues\"\n  },\n  \"homepage\": \"https://github.com/shuangmuyingzi/dateFormat#readme\"\n}\n\n\nIs this ok? (yes) \n\n```\n然后会在该目录下多了个package.json文件\n\n#### 添加简单的日期转换格式插件\n每次后台数据接口返回的基本是时间戳，往往需要转换成常用的日期格式。那我就以一个简单的日期转换格式小插件为例。把下面代码放到package.json文件同级目录里。\n\n``` \ndate.js\n\n(function(global) {\n    var datechange = (function() {\n      \n      return function (date) {\n  \n        date = date || new Date;\n  \n        if(!(date instanceof Date)) {\n          date = new Date(date);\n        }\n  \n        if (isNaN(date)) {\n          throw TypeError('Invalid date');\n        }\n        let re = date.getFullYear() + '.' + (date.getMonth()+1) + '.' + date.getDate();\n        return re\n  \n      }\n  })()\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return datechange;\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = datechange;\n  } else {\n    global.datechange = datechange;\n  }\n\n})(this);\n```\n\n\n#### 4.发布\nnpm publish\n记得在推之前先登录npm要不然会报错。如果是再次推送同一个项目记得修改版本号。 \n\n### 使用\n\n``` \nnpm install --save-dev datechange\n```\n```\nvar datechange = require('datechange');\nvar now = new Date();\nvar timeStamp = datechange(now);\n```\nOR\n\n```javascript\n<script type=\"text/javascript\" src='date.js'></script>\n\t<script type=\"text/javascript\">\n\t\tvar now = new Date();\n\t\tvar timeStamp = datechange(1511350834583);\n\t\talert(timeStamp)\n\t</script>\n```\n先安装后使用，包的名称为package.json里的name属性。\n具体代码看github:\nhttps://github.com/shuangmuyingzi/dateFormat\n\n### Vue组件如何上传到NPM\n\n#### 方式一\n\n用webpack把项目打包成JS文件，然后在package.json的 main导出该JS文件。\n\n##### 创建                   \n* vue-cli创建vue简单项目 \n\n    `vue init webpack-simple load-ling-zi`\n* 修改package.json\n\n    1. 修改`\"private\": false`\n    \n        npm默认创建的项目是私有的，如果要发布至npm必须将其公开\n    2. 添加`\"main\": \"dist/build.js\"`\n    \n        通过`import loading from 'load-ling-zi'`引用该组件时，项目会自动找到`node_modules/load-ling-zi/dist/build.js`\n*  在src加入组件代码App.vue， 并创建我们的导出文件index.js。\n   在index.js中添加：\n \n    ```\n    import load from './App.vue'\n    export default load\n    //global 情况下 自动安装\n    if (typeof window !== 'undefined' && window.Vue) {\n      window.Vue.component('load', load);\n    }\n    ```\n       \n*  因为最后我们是打包成一个js文件，所以需要修改一下配置文件`webpack.config.js`\n\n    因为不是所有使用你组件的人都是通过npm按住和impor的很多人是通过`<script>`直接引入的,我们要将libraryTarget改为umd,以及修改入口文件与设置导出文件目录以及名称。   \n    \n            entry: './src/index.js',\n            output: {\n            path: path.resolve(__dirname, './dist'),\n            publicPath: '/dist/',\n            filename: 'build.js',\n            library: 'load',\n            libraryTarget: 'umd',\n            umdNamedDefine: true\n            },\n       \n*  最后需要把`.gitignore`文件里面的`/dist`删除掉要不然上传时会忽略掉dist打包的文件。\n\n    具体代码已放到github：\n    https://github.com/shuangmuyingzi/loadingModule/tree/master/load/load-ling-zi\n    \n##### 发布\n`npm publish`，具体参考上面步骤。\n\n##### 应用\n\n1. Installation\n\n``` bash\n# install dependencies\nnpm install load-ling-zi -D\n```\n\n2. Usage\n\n```\n<loading v-if=\"loading.isShow\">\n    <span>{{ loading.text }}</span>\n</loading>\n\n<script>\n    import loading from 'load-ling-zi'\n    export default {\n        components: {\n            loading:loading\n        },\n        data () {\n            return {\n                loading:{\n                    isShow:true,\n                    text:\"加载中\"\n                },   \n            }\n        }\n    }\n</script>\n```\n\n#### 方式二\n在main里直接导出Vue组件（.vue文件）\n具体代码看这里：\nhttps://github.com/shuangmuyingzi/loadingModule/tree/master/loading\n\n### 写在最后\n关于vue组件、插件的实现方式估计还有很多的办法,本文权当抛砖引玉，水平有限，举的例子也是比较简单，一个好的组件也要考虑更多的可配置性以及通用性，数据的可配置，结构的可配置，样式的可配置等等，es里面模块化的写法也是很多，还有一些直接在`<script>`引入，所以要考虑如何导出代码能够满足更多场景的使用。\n\n","source":"_posts/npm.md","raw":"---\ntitle: NPM — JavaScript 的包管理器\ndate: 2017-11-23\nphoto: https://shuangmuyingzi.github.io/img/npm.jpg\n---\n\n本文主要介绍npm的常用命令，以及如何发布一些常用的js模块化代码到npm上面方便日后的使用，和举例如何把一个vue组件打包发布到npm到最后下载到本地使用的过程。\n\n<!--more-->\n\nnpm(Node Package Manager)是node的默认模块管理器，一个命令行下的软件，用来安装和管理node模块，同时也可以管理其他开放式的js模块代码。npm有一个好处是除了下载需要的模块外还会帮我们解决依赖关系，同时下载所依赖的模块。\n\n## NPM ——  JavaScript 的包管理器\n\n### npm help\n\n``` \n    access, adduser, bin, bugs, c, cache, completion, config,\n    ddp, dedupe, deprecate, dist-tag, docs, doctor, edit,\n    explore, get, help, help-search, i, init, install,\n    install-test, it, link, list, ln, login, logout, ls,\n    outdated, owner, pack, ping, prefix, prune, publish, rb,\n    rebuild, repo, restart, root, run, run-script, s, se,\n    search, set, shrinkwrap, star, stars, start, stop, t, team,\n    test, tst, un, uninstall, unpublish, unstar, up, update, v,\n    version, view, whoami\n```\n\nnpm help 可以查看所有可使用的命令。\n### npm常用指令\n\n``` \nnpm install 名字      //该命令用于安装模块\nnpm uninstall 名字    //该命令用于卸载模块\nnpm run 名字          //该命令用于执行脚本\n```\n\n### 如何用npm发布自己的模块\n\n我们所有下载以及发布的包是存放在这个地址：https://www.npmjs.com/\n我们发布一个东西，得要有自己的标识吧，所以得先注册账号。\n#### 1.注册用户\n```\nnpm adduser\n运行该命令后会需要你依次输入\nUsername:\nPassword:\nEmail:\n```\n#### 2.检查\n接下来是需要检查一下有没有注册成功\n\n```\nnpm whoami\n```\n#### 3.建立package\n\n```\nnpm init\n//一路回车\nname: (dateFormat) datechange\nversion: (1.0.0) \ndescription: change date format\nentry point: (index.js) \ntest command: \ngit repository: https://github.com/shuangmuyingzi/dateFormat.git\nkeywords: dateformat date datechange\nauthor: lingzi\nlicense: (ISC) \nAbout to write to /Users/linziying/Downloads/npm/dateFormat/package.json:\n\n{\n  \"name\": \"datechange\",\n  \"version\": \"1.0.0\",\n  \"description\": \"change date format\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/shuangmuyingzi/dateFormat.git\"\n  },\n  \"keywords\": [\n    \"dateformat\",\n    \"date\",\n    \"datechange\"\n  ],\n  \"author\": \"lingzi\",\n  \"license\": \"ISC\",\n  \"bugs\": {\n    \"url\": \"https://github.com/shuangmuyingzi/dateFormat/issues\"\n  },\n  \"homepage\": \"https://github.com/shuangmuyingzi/dateFormat#readme\"\n}\n\n\nIs this ok? (yes) \n\n```\n然后会在该目录下多了个package.json文件\n\n#### 添加简单的日期转换格式插件\n每次后台数据接口返回的基本是时间戳，往往需要转换成常用的日期格式。那我就以一个简单的日期转换格式小插件为例。把下面代码放到package.json文件同级目录里。\n\n``` \ndate.js\n\n(function(global) {\n    var datechange = (function() {\n      \n      return function (date) {\n  \n        date = date || new Date;\n  \n        if(!(date instanceof Date)) {\n          date = new Date(date);\n        }\n  \n        if (isNaN(date)) {\n          throw TypeError('Invalid date');\n        }\n        let re = date.getFullYear() + '.' + (date.getMonth()+1) + '.' + date.getDate();\n        return re\n  \n      }\n  })()\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return datechange;\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = datechange;\n  } else {\n    global.datechange = datechange;\n  }\n\n})(this);\n```\n\n\n#### 4.发布\nnpm publish\n记得在推之前先登录npm要不然会报错。如果是再次推送同一个项目记得修改版本号。 \n\n### 使用\n\n``` \nnpm install --save-dev datechange\n```\n```\nvar datechange = require('datechange');\nvar now = new Date();\nvar timeStamp = datechange(now);\n```\nOR\n\n```javascript\n<script type=\"text/javascript\" src='date.js'></script>\n\t<script type=\"text/javascript\">\n\t\tvar now = new Date();\n\t\tvar timeStamp = datechange(1511350834583);\n\t\talert(timeStamp)\n\t</script>\n```\n先安装后使用，包的名称为package.json里的name属性。\n具体代码看github:\nhttps://github.com/shuangmuyingzi/dateFormat\n\n### Vue组件如何上传到NPM\n\n#### 方式一\n\n用webpack把项目打包成JS文件，然后在package.json的 main导出该JS文件。\n\n##### 创建                   \n* vue-cli创建vue简单项目 \n\n    `vue init webpack-simple load-ling-zi`\n* 修改package.json\n\n    1. 修改`\"private\": false`\n    \n        npm默认创建的项目是私有的，如果要发布至npm必须将其公开\n    2. 添加`\"main\": \"dist/build.js\"`\n    \n        通过`import loading from 'load-ling-zi'`引用该组件时，项目会自动找到`node_modules/load-ling-zi/dist/build.js`\n*  在src加入组件代码App.vue， 并创建我们的导出文件index.js。\n   在index.js中添加：\n \n    ```\n    import load from './App.vue'\n    export default load\n    //global 情况下 自动安装\n    if (typeof window !== 'undefined' && window.Vue) {\n      window.Vue.component('load', load);\n    }\n    ```\n       \n*  因为最后我们是打包成一个js文件，所以需要修改一下配置文件`webpack.config.js`\n\n    因为不是所有使用你组件的人都是通过npm按住和impor的很多人是通过`<script>`直接引入的,我们要将libraryTarget改为umd,以及修改入口文件与设置导出文件目录以及名称。   \n    \n            entry: './src/index.js',\n            output: {\n            path: path.resolve(__dirname, './dist'),\n            publicPath: '/dist/',\n            filename: 'build.js',\n            library: 'load',\n            libraryTarget: 'umd',\n            umdNamedDefine: true\n            },\n       \n*  最后需要把`.gitignore`文件里面的`/dist`删除掉要不然上传时会忽略掉dist打包的文件。\n\n    具体代码已放到github：\n    https://github.com/shuangmuyingzi/loadingModule/tree/master/load/load-ling-zi\n    \n##### 发布\n`npm publish`，具体参考上面步骤。\n\n##### 应用\n\n1. Installation\n\n``` bash\n# install dependencies\nnpm install load-ling-zi -D\n```\n\n2. Usage\n\n```\n<loading v-if=\"loading.isShow\">\n    <span>{{ loading.text }}</span>\n</loading>\n\n<script>\n    import loading from 'load-ling-zi'\n    export default {\n        components: {\n            loading:loading\n        },\n        data () {\n            return {\n                loading:{\n                    isShow:true,\n                    text:\"加载中\"\n                },   \n            }\n        }\n    }\n</script>\n```\n\n#### 方式二\n在main里直接导出Vue组件（.vue文件）\n具体代码看这里：\nhttps://github.com/shuangmuyingzi/loadingModule/tree/master/loading\n\n### 写在最后\n关于vue组件、插件的实现方式估计还有很多的办法,本文权当抛砖引玉，水平有限，举的例子也是比较简单，一个好的组件也要考虑更多的可配置性以及通用性，数据的可配置，结构的可配置，样式的可配置等等，es里面模块化的写法也是很多，还有一些直接在`<script>`引入，所以要考虑如何导出代码能够满足更多场景的使用。\n\n","slug":"npm","published":1,"updated":"2018-05-01T04:32:20.062Z","photos":["https://shuangmuyingzi.github.io/img/npm.jpg"],"comments":1,"layout":"post","link":"","_id":"cjgnpte6c0003u06xilcpy23u","content":"<p>本文主要介绍npm的常用命令，以及如何发布一些常用的js模块化代码到npm上面方便日后的使用，和举例如何把一个vue组件打包发布到npm到最后下载到本地使用的过程。</p>\n<a id=\"more\"></a>\n<p>npm(Node Package Manager)是node的默认模块管理器，一个命令行下的软件，用来安装和管理node模块，同时也可以管理其他开放式的js模块代码。npm有一个好处是除了下载需要的模块外还会帮我们解决依赖关系，同时下载所依赖的模块。</p>\n<h2 id=\"NPM-——-JavaScript-的包管理器\"><a href=\"#NPM-——-JavaScript-的包管理器\" class=\"headerlink\" title=\"NPM ——  JavaScript 的包管理器\"></a>NPM ——  JavaScript 的包管理器</h2><h3 id=\"npm-help\"><a href=\"#npm-help\" class=\"headerlink\" title=\"npm help\"></a>npm help</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><div class=\"line\">access, adduser, bin, bugs, c, <span class=\"keyword\">cache</span>, completion, config,</div><div class=\"line\">ddp, dedupe, deprecate, dist-tag, docs, doctor, edit,</div><div class=\"line\">explore, <span class=\"keyword\">get</span>, <span class=\"keyword\">help</span>, <span class=\"keyword\">help</span>-<span class=\"keyword\">search</span>, i, init, <span class=\"keyword\">install</span>,</div><div class=\"line\"><span class=\"keyword\">install</span>-<span class=\"keyword\">test</span>, it, <span class=\"keyword\">link</span>, <span class=\"keyword\">list</span>, <span class=\"keyword\">ln</span>, login, logout, ls,</div><div class=\"line\">outdated, owner, pack, ping, prefix, prune, publish, rb,</div><div class=\"line\"><span class=\"keyword\">rebuild</span>, repo, restart, root, run, run-script, s, se,</div><div class=\"line\"><span class=\"keyword\">search</span>, <span class=\"keyword\">set</span>, shrinkwrap, star, stars, <span class=\"keyword\">start</span>, <span class=\"keyword\">stop</span>, t, team,</div><div class=\"line\"><span class=\"keyword\">test</span>, tst, un, <span class=\"keyword\">uninstall</span>, unpublish, unstar, up, <span class=\"keyword\">update</span>, v,</div><div class=\"line\"><span class=\"keyword\">version</span>, <span class=\"keyword\">view</span>, whoami</div></pre></td></tr></table></figure>\n<p>npm help 可以查看所有可使用的命令。</p>\n<h3 id=\"npm常用指令\"><a href=\"#npm常用指令\" class=\"headerlink\" title=\"npm常用指令\"></a>npm常用指令</h3><figure class=\"highlight arduino\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm install 名字      <span class=\"comment\">//该命令用于安装模块</span></div><div class=\"line\">npm uninstall 名字    <span class=\"comment\">//该命令用于卸载模块</span></div><div class=\"line\">npm <span class=\"built_in\">run</span> 名字          <span class=\"comment\">//该命令用于执行脚本</span></div></pre></td></tr></table></figure>\n<h3 id=\"如何用npm发布自己的模块\"><a href=\"#如何用npm发布自己的模块\" class=\"headerlink\" title=\"如何用npm发布自己的模块\"></a>如何用npm发布自己的模块</h3><p>我们所有下载以及发布的包是存放在这个地址：<a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"external\">https://www.npmjs.com/</a><br>我们发布一个东西，得要有自己的标识吧，所以得先注册账号。</p>\n<h4 id=\"1-注册用户\"><a href=\"#1-注册用户\" class=\"headerlink\" title=\"1.注册用户\"></a>1.注册用户</h4><figure class=\"highlight avrasm\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm adduser</div><div class=\"line\">运行该命令后会需要你依次输入</div><div class=\"line\"><span class=\"symbol\">Username:</span></div><div class=\"line\"><span class=\"symbol\">Password:</span></div><div class=\"line\"><span class=\"symbol\">Email:</span></div></pre></td></tr></table></figure>\n<h4 id=\"2-检查\"><a href=\"#2-检查\" class=\"headerlink\" title=\"2.检查\"></a>2.检查</h4><p>接下来是需要检查一下有没有注册成功</p>\n<figure class=\"highlight coffeescript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">npm</span> whoami</div></pre></td></tr></table></figure>\n<h4 id=\"3-建立package\"><a href=\"#3-建立package\" class=\"headerlink\" title=\"3.建立package\"></a>3.建立package</h4><figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm init</div><div class=\"line\"><span class=\"comment\">//一路回车</span></div><div class=\"line\"><span class=\"string\">name:</span> (dateFormat) datechange</div><div class=\"line\"><span class=\"string\">version:</span> (<span class=\"number\">1.0</span><span class=\"number\">.0</span>) </div><div class=\"line\"><span class=\"string\">description:</span> change date format</div><div class=\"line\">entry <span class=\"string\">point:</span> (index.js) </div><div class=\"line\">test <span class=\"string\">command:</span> </div><div class=\"line\">git <span class=\"string\">repository:</span> <span class=\"string\">https:</span><span class=\"comment\">//github.com/shuangmuyingzi/dateFormat.git</span></div><div class=\"line\"><span class=\"string\">keywords:</span> dateformat date datechange</div><div class=\"line\"><span class=\"string\">author:</span> lingzi</div><div class=\"line\"><span class=\"string\">license:</span> (ISC) </div><div class=\"line\">About to write to <span class=\"regexp\">/Users/</span>linziying<span class=\"regexp\">/Downloads/</span>npm<span class=\"regexp\">/dateFormat/</span><span class=\"keyword\">package</span>.<span class=\"string\">json:</span></div><div class=\"line\"></div><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"name\"</span>: <span class=\"string\">\"datechange\"</span>,</div><div class=\"line\">  <span class=\"string\">\"version\"</span>: <span class=\"string\">\"1.0.0\"</span>,</div><div class=\"line\">  <span class=\"string\">\"description\"</span>: <span class=\"string\">\"change date format\"</span>,</div><div class=\"line\">  <span class=\"string\">\"main\"</span>: <span class=\"string\">\"index.js\"</span>,</div><div class=\"line\">  <span class=\"string\">\"scripts\"</span>: &#123;</div><div class=\"line\">    <span class=\"string\">\"test\"</span>: <span class=\"string\">\"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"string\">\"repository\"</span>: &#123;</div><div class=\"line\">    <span class=\"string\">\"type\"</span>: <span class=\"string\">\"git\"</span>,</div><div class=\"line\">    <span class=\"string\">\"url\"</span>: <span class=\"string\">\"git+https://github.com/shuangmuyingzi/dateFormat.git\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"string\">\"keywords\"</span>: [</div><div class=\"line\">    <span class=\"string\">\"dateformat\"</span>,</div><div class=\"line\">    <span class=\"string\">\"date\"</span>,</div><div class=\"line\">    <span class=\"string\">\"datechange\"</span></div><div class=\"line\">  ],</div><div class=\"line\">  <span class=\"string\">\"author\"</span>: <span class=\"string\">\"lingzi\"</span>,</div><div class=\"line\">  <span class=\"string\">\"license\"</span>: <span class=\"string\">\"ISC\"</span>,</div><div class=\"line\">  <span class=\"string\">\"bugs\"</span>: &#123;</div><div class=\"line\">    <span class=\"string\">\"url\"</span>: <span class=\"string\">\"https://github.com/shuangmuyingzi/dateFormat/issues\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"string\">\"homepage\"</span>: <span class=\"string\">\"https://github.com/shuangmuyingzi/dateFormat#readme\"</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">Is <span class=\"keyword\">this</span> ok? (yes)</div></pre></td></tr></table></figure>\n<p>然后会在该目录下多了个package.json文件</p>\n<h4 id=\"添加简单的日期转换格式插件\"><a href=\"#添加简单的日期转换格式插件\" class=\"headerlink\" title=\"添加简单的日期转换格式插件\"></a>添加简单的日期转换格式插件</h4><p>每次后台数据接口返回的基本是时间戳，往往需要转换成常用的日期格式。那我就以一个简单的日期转换格式小插件为例。把下面代码放到package.json文件同级目录里。</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">date</span>.js</div><div class=\"line\"></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">global</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> datechange = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      </div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">date</span>) </span>&#123;</div><div class=\"line\">  </div><div class=\"line\">        <span class=\"built_in\">date</span> = <span class=\"built_in\">date</span> || <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>;</div><div class=\"line\">  </div><div class=\"line\">        <span class=\"keyword\">if</span>(!(<span class=\"built_in\">date</span> <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Date</span>)) &#123;</div><div class=\"line\">          <span class=\"built_in\">date</span> = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(<span class=\"built_in\">date</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">  </div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">isNaN</span>(<span class=\"built_in\">date</span>)) &#123;</div><div class=\"line\">          <span class=\"keyword\">throw</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">'Invalid date'</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">let</span> re = <span class=\"built_in\">date</span>.getFullYear() + <span class=\"string\">'.'</span> + (<span class=\"built_in\">date</span>.getMonth()+<span class=\"number\">1</span>) + <span class=\"string\">'.'</span> + <span class=\"built_in\">date</span>.getDate();</div><div class=\"line\">        <span class=\"keyword\">return</span> re</div><div class=\"line\">  </div><div class=\"line\">      &#125;</div><div class=\"line\">  &#125;)()</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> define === <span class=\"string\">'function'</span> &amp;&amp; define.amd) &#123;</div><div class=\"line\">    define(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> datechange;</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> exports === <span class=\"string\">'object'</span>) &#123;</div><div class=\"line\">    <span class=\"built_in\">module</span>.exports = datechange;</div><div class=\"line\">  &#125; <span class=\"title\">else</span> &#123;</div><div class=\"line\">    global.datechange = datechange;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;)(<span class=\"keyword\">this</span>);</div></pre></td></tr></table></figure>\n<h4 id=\"4-发布\"><a href=\"#4-发布\" class=\"headerlink\" title=\"4.发布\"></a>4.发布</h4><p>npm publish<br>记得在推之前先登录npm要不然会报错。如果是再次推送同一个项目记得修改版本号。 </p>\n<h3 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h3><figure class=\"highlight q\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm install --<span class=\"built_in\">save</span>-<span class=\"built_in\">dev</span> datechange</div></pre></td></tr></table></figure>\n<figure class=\"highlight ebnf\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">var datechange</span> = require(<span class=\"string\">'datechange'</span>);</div><div class=\"line\"><span class=\"attribute\">var now</span> = new Date();</div><div class=\"line\"><span class=\"attribute\">var timeStamp</span> = datechange(now);</div></pre></td></tr></table></figure>\n<p>OR</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;script type=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">'date.js'</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div><div class=\"line\">\t&lt;script type=<span class=\"string\">\"text/javascript\"</span>&gt;</div><div class=\"line\">\t\t<span class=\"keyword\">var</span> now = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</div><div class=\"line\">\t\t<span class=\"keyword\">var</span> timeStamp = datechange(<span class=\"number\">1511350834583</span>);</div><div class=\"line\">\t\talert(timeStamp)</div><div class=\"line\">\t&lt;<span class=\"regexp\">/script&gt;</span></div></pre></td></tr></table></figure>\n<p>先安装后使用，包的名称为package.json里的name属性。<br>具体代码看github:<br><a href=\"https://github.com/shuangmuyingzi/dateFormat\" target=\"_blank\" rel=\"external\">https://github.com/shuangmuyingzi/dateFormat</a></p>\n<h3 id=\"Vue组件如何上传到NPM\"><a href=\"#Vue组件如何上传到NPM\" class=\"headerlink\" title=\"Vue组件如何上传到NPM\"></a>Vue组件如何上传到NPM</h3><h4 id=\"方式一\"><a href=\"#方式一\" class=\"headerlink\" title=\"方式一\"></a>方式一</h4><p>用webpack把项目打包成JS文件，然后在package.json的 main导出该JS文件。</p>\n<h5 id=\"创建\"><a href=\"#创建\" class=\"headerlink\" title=\"创建\"></a>创建</h5><ul>\n<li><p>vue-cli创建vue简单项目 </p>\n<p>  <code>vue init webpack-simple load-ling-zi</code></p>\n</li>\n<li><p>修改package.json</p>\n<ol>\n<li><p>修改<code>&quot;private&quot;: false</code></p>\n<p> npm默认创建的项目是私有的，如果要发布至npm必须将其公开</p>\n</li>\n<li><p>添加<code>&quot;main&quot;: &quot;dist/build.js&quot;</code></p>\n<p> 通过<code>import loading from &#39;load-ling-zi&#39;</code>引用该组件时，项目会自动找到<code>node_modules/load-ling-zi/dist/build.js</code></p>\n</li>\n</ol>\n</li>\n<li><p>在src加入组件代码App.vue， 并创建我们的导出文件index.js。<br>在index.js中添加：</p>\n <figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> load <span class=\"keyword\">from</span> <span class=\"string\">'./App.vue'</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> load</div><div class=\"line\"><span class=\"comment\">//global 情况下 自动安装</span></div><div class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">'undefined'</span> &amp;&amp; <span class=\"built_in\">window</span>.Vue) &#123;</div><div class=\"line\">  <span class=\"built_in\">window</span>.Vue.component(<span class=\"string\">'load'</span>, load);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<ul>\n<li><p>因为最后我们是打包成一个js文件，所以需要修改一下配置文件<code>webpack.config.js</code></p>\n<p> 因为不是所有使用你组件的人都是通过npm按住和impor的很多人是通过<code>&lt;script&gt;</code>直接引入的,我们要将libraryTarget改为umd,以及修改入口文件与设置导出文件目录以及名称。   </p>\n<pre><code>entry: &apos;./src/index.js&apos;,\noutput: {\npath: path.resolve(__dirname, &apos;./dist&apos;),\npublicPath: &apos;/dist/&apos;,\nfilename: &apos;build.js&apos;,\nlibrary: &apos;load&apos;,\nlibraryTarget: &apos;umd&apos;,\numdNamedDefine: true\n},\n</code></pre></li>\n<li><p>最后需要把<code>.gitignore</code>文件里面的<code>/dist</code>删除掉要不然上传时会忽略掉dist打包的文件。</p>\n<p> 具体代码已放到github：<br> <a href=\"https://github.com/shuangmuyingzi/loadingModule/tree/master/load/load-ling-zi\" target=\"_blank\" rel=\"external\">https://github.com/shuangmuyingzi/loadingModule/tree/master/load/load-ling-zi</a></p>\n</li>\n</ul>\n<h5 id=\"发布\"><a href=\"#发布\" class=\"headerlink\" title=\"发布\"></a>发布</h5><p><code>npm publish</code>，具体参考上面步骤。</p>\n<h5 id=\"应用\"><a href=\"#应用\" class=\"headerlink\" title=\"应用\"></a>应用</h5><ol>\n<li>Installation</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># install dependencies</span></div><div class=\"line\">npm install load-ling-zi -D</div></pre></td></tr></table></figure>\n<ol>\n<li>Usage</li>\n</ol>\n<figure class=\"highlight django\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">loading</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"loading.isShow\"</span>&gt;</span></span></div><div class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123; loading.text &#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></div><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">loading</span>&gt;</span></span></div><div class=\"line\"><span class=\"xml\"></span></div><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span></div><div class=\"line\"><span class=\"xml\">    import loading from 'load-ling-zi'</span></div><div class=\"line\"><span class=\"xml\">    export default &#123;</span></div><div class=\"line\"><span class=\"xml\">        components: &#123;</span></div><div class=\"line\"><span class=\"xml\">            loading:loading</span></div><div class=\"line\"><span class=\"xml\">        &#125;,</span></div><div class=\"line\"><span class=\"xml\">        data () &#123;</span></div><div class=\"line\"><span class=\"xml\">            return &#123;</span></div><div class=\"line\"><span class=\"xml\">                loading:&#123;</span></div><div class=\"line\"><span class=\"xml\">                    isShow:true,</span></div><div class=\"line\"><span class=\"xml\">                    text:\"加载中\"</span></div><div class=\"line\"><span class=\"xml\">                &#125;,   </span></div><div class=\"line\"><span class=\"xml\">            &#125;</span></div><div class=\"line\"><span class=\"xml\">        &#125;</span></div><div class=\"line\"><span class=\"xml\">    &#125;</span></div><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div></pre></td></tr></table></figure>\n<h4 id=\"方式二\"><a href=\"#方式二\" class=\"headerlink\" title=\"方式二\"></a>方式二</h4><p>在main里直接导出Vue组件（.vue文件）<br>具体代码看这里：<br><a href=\"https://github.com/shuangmuyingzi/loadingModule/tree/master/loading\" target=\"_blank\" rel=\"external\">https://github.com/shuangmuyingzi/loadingModule/tree/master/loading</a></p>\n<h3 id=\"写在最后\"><a href=\"#写在最后\" class=\"headerlink\" title=\"写在最后\"></a>写在最后</h3><p>关于vue组件、插件的实现方式估计还有很多的办法,本文权当抛砖引玉，水平有限，举的例子也是比较简单，一个好的组件也要考虑更多的可配置性以及通用性，数据的可配置，结构的可配置，样式的可配置等等，es里面模块化的写法也是很多，还有一些直接在<code>&lt;script&gt;</code>引入，所以要考虑如何导出代码能够满足更多场景的使用。</p>\n","site":{"data":{}},"excerpt":"<p>本文主要介绍npm的常用命令，以及如何发布一些常用的js模块化代码到npm上面方便日后的使用，和举例如何把一个vue组件打包发布到npm到最后下载到本地使用的过程。</p>","more":"<p>npm(Node Package Manager)是node的默认模块管理器，一个命令行下的软件，用来安装和管理node模块，同时也可以管理其他开放式的js模块代码。npm有一个好处是除了下载需要的模块外还会帮我们解决依赖关系，同时下载所依赖的模块。</p>\n<h2 id=\"NPM-——-JavaScript-的包管理器\"><a href=\"#NPM-——-JavaScript-的包管理器\" class=\"headerlink\" title=\"NPM ——  JavaScript 的包管理器\"></a>NPM ——  JavaScript 的包管理器</h2><h3 id=\"npm-help\"><a href=\"#npm-help\" class=\"headerlink\" title=\"npm help\"></a>npm help</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><div class=\"line\">access, adduser, bin, bugs, c, <span class=\"keyword\">cache</span>, completion, config,</div><div class=\"line\">ddp, dedupe, deprecate, dist-tag, docs, doctor, edit,</div><div class=\"line\">explore, <span class=\"keyword\">get</span>, <span class=\"keyword\">help</span>, <span class=\"keyword\">help</span>-<span class=\"keyword\">search</span>, i, init, <span class=\"keyword\">install</span>,</div><div class=\"line\"><span class=\"keyword\">install</span>-<span class=\"keyword\">test</span>, it, <span class=\"keyword\">link</span>, <span class=\"keyword\">list</span>, <span class=\"keyword\">ln</span>, login, logout, ls,</div><div class=\"line\">outdated, owner, pack, ping, prefix, prune, publish, rb,</div><div class=\"line\"><span class=\"keyword\">rebuild</span>, repo, restart, root, run, run-script, s, se,</div><div class=\"line\"><span class=\"keyword\">search</span>, <span class=\"keyword\">set</span>, shrinkwrap, star, stars, <span class=\"keyword\">start</span>, <span class=\"keyword\">stop</span>, t, team,</div><div class=\"line\"><span class=\"keyword\">test</span>, tst, un, <span class=\"keyword\">uninstall</span>, unpublish, unstar, up, <span class=\"keyword\">update</span>, v,</div><div class=\"line\"><span class=\"keyword\">version</span>, <span class=\"keyword\">view</span>, whoami</div></pre></td></tr></table></figure>\n<p>npm help 可以查看所有可使用的命令。</p>\n<h3 id=\"npm常用指令\"><a href=\"#npm常用指令\" class=\"headerlink\" title=\"npm常用指令\"></a>npm常用指令</h3><figure class=\"highlight arduino\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm install 名字      <span class=\"comment\">//该命令用于安装模块</span></div><div class=\"line\">npm uninstall 名字    <span class=\"comment\">//该命令用于卸载模块</span></div><div class=\"line\">npm <span class=\"built_in\">run</span> 名字          <span class=\"comment\">//该命令用于执行脚本</span></div></pre></td></tr></table></figure>\n<h3 id=\"如何用npm发布自己的模块\"><a href=\"#如何用npm发布自己的模块\" class=\"headerlink\" title=\"如何用npm发布自己的模块\"></a>如何用npm发布自己的模块</h3><p>我们所有下载以及发布的包是存放在这个地址：<a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"external\">https://www.npmjs.com/</a><br>我们发布一个东西，得要有自己的标识吧，所以得先注册账号。</p>\n<h4 id=\"1-注册用户\"><a href=\"#1-注册用户\" class=\"headerlink\" title=\"1.注册用户\"></a>1.注册用户</h4><figure class=\"highlight avrasm\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm adduser</div><div class=\"line\">运行该命令后会需要你依次输入</div><div class=\"line\"><span class=\"symbol\">Username:</span></div><div class=\"line\"><span class=\"symbol\">Password:</span></div><div class=\"line\"><span class=\"symbol\">Email:</span></div></pre></td></tr></table></figure>\n<h4 id=\"2-检查\"><a href=\"#2-检查\" class=\"headerlink\" title=\"2.检查\"></a>2.检查</h4><p>接下来是需要检查一下有没有注册成功</p>\n<figure class=\"highlight coffeescript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">npm</span> whoami</div></pre></td></tr></table></figure>\n<h4 id=\"3-建立package\"><a href=\"#3-建立package\" class=\"headerlink\" title=\"3.建立package\"></a>3.建立package</h4><figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm init</div><div class=\"line\"><span class=\"comment\">//一路回车</span></div><div class=\"line\"><span class=\"string\">name:</span> (dateFormat) datechange</div><div class=\"line\"><span class=\"string\">version:</span> (<span class=\"number\">1.0</span><span class=\"number\">.0</span>) </div><div class=\"line\"><span class=\"string\">description:</span> change date format</div><div class=\"line\">entry <span class=\"string\">point:</span> (index.js) </div><div class=\"line\">test <span class=\"string\">command:</span> </div><div class=\"line\">git <span class=\"string\">repository:</span> <span class=\"string\">https:</span><span class=\"comment\">//github.com/shuangmuyingzi/dateFormat.git</span></div><div class=\"line\"><span class=\"string\">keywords:</span> dateformat date datechange</div><div class=\"line\"><span class=\"string\">author:</span> lingzi</div><div class=\"line\"><span class=\"string\">license:</span> (ISC) </div><div class=\"line\">About to write to <span class=\"regexp\">/Users/</span>linziying<span class=\"regexp\">/Downloads/</span>npm<span class=\"regexp\">/dateFormat/</span><span class=\"keyword\">package</span>.<span class=\"string\">json:</span></div><div class=\"line\"></div><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"name\"</span>: <span class=\"string\">\"datechange\"</span>,</div><div class=\"line\">  <span class=\"string\">\"version\"</span>: <span class=\"string\">\"1.0.0\"</span>,</div><div class=\"line\">  <span class=\"string\">\"description\"</span>: <span class=\"string\">\"change date format\"</span>,</div><div class=\"line\">  <span class=\"string\">\"main\"</span>: <span class=\"string\">\"index.js\"</span>,</div><div class=\"line\">  <span class=\"string\">\"scripts\"</span>: &#123;</div><div class=\"line\">    <span class=\"string\">\"test\"</span>: <span class=\"string\">\"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"string\">\"repository\"</span>: &#123;</div><div class=\"line\">    <span class=\"string\">\"type\"</span>: <span class=\"string\">\"git\"</span>,</div><div class=\"line\">    <span class=\"string\">\"url\"</span>: <span class=\"string\">\"git+https://github.com/shuangmuyingzi/dateFormat.git\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"string\">\"keywords\"</span>: [</div><div class=\"line\">    <span class=\"string\">\"dateformat\"</span>,</div><div class=\"line\">    <span class=\"string\">\"date\"</span>,</div><div class=\"line\">    <span class=\"string\">\"datechange\"</span></div><div class=\"line\">  ],</div><div class=\"line\">  <span class=\"string\">\"author\"</span>: <span class=\"string\">\"lingzi\"</span>,</div><div class=\"line\">  <span class=\"string\">\"license\"</span>: <span class=\"string\">\"ISC\"</span>,</div><div class=\"line\">  <span class=\"string\">\"bugs\"</span>: &#123;</div><div class=\"line\">    <span class=\"string\">\"url\"</span>: <span class=\"string\">\"https://github.com/shuangmuyingzi/dateFormat/issues\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"string\">\"homepage\"</span>: <span class=\"string\">\"https://github.com/shuangmuyingzi/dateFormat#readme\"</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">Is <span class=\"keyword\">this</span> ok? (yes)</div></pre></td></tr></table></figure>\n<p>然后会在该目录下多了个package.json文件</p>\n<h4 id=\"添加简单的日期转换格式插件\"><a href=\"#添加简单的日期转换格式插件\" class=\"headerlink\" title=\"添加简单的日期转换格式插件\"></a>添加简单的日期转换格式插件</h4><p>每次后台数据接口返回的基本是时间戳，往往需要转换成常用的日期格式。那我就以一个简单的日期转换格式小插件为例。把下面代码放到package.json文件同级目录里。</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">date</span>.js</div><div class=\"line\"></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">global</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> datechange = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      </div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">date</span>) </span>&#123;</div><div class=\"line\">  </div><div class=\"line\">        <span class=\"built_in\">date</span> = <span class=\"built_in\">date</span> || <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>;</div><div class=\"line\">  </div><div class=\"line\">        <span class=\"keyword\">if</span>(!(<span class=\"built_in\">date</span> <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Date</span>)) &#123;</div><div class=\"line\">          <span class=\"built_in\">date</span> = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(<span class=\"built_in\">date</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">  </div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">isNaN</span>(<span class=\"built_in\">date</span>)) &#123;</div><div class=\"line\">          <span class=\"keyword\">throw</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">'Invalid date'</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">let</span> re = <span class=\"built_in\">date</span>.getFullYear() + <span class=\"string\">'.'</span> + (<span class=\"built_in\">date</span>.getMonth()+<span class=\"number\">1</span>) + <span class=\"string\">'.'</span> + <span class=\"built_in\">date</span>.getDate();</div><div class=\"line\">        <span class=\"keyword\">return</span> re</div><div class=\"line\">  </div><div class=\"line\">      &#125;</div><div class=\"line\">  &#125;)()</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> define === <span class=\"string\">'function'</span> &amp;&amp; define.amd) &#123;</div><div class=\"line\">    define(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> datechange;</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> exports === <span class=\"string\">'object'</span>) &#123;</div><div class=\"line\">    <span class=\"built_in\">module</span>.exports = datechange;</div><div class=\"line\">  &#125; <span class=\"title\">else</span> &#123;</div><div class=\"line\">    global.datechange = datechange;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;)(<span class=\"keyword\">this</span>);</div></pre></td></tr></table></figure>\n<h4 id=\"4-发布\"><a href=\"#4-发布\" class=\"headerlink\" title=\"4.发布\"></a>4.发布</h4><p>npm publish<br>记得在推之前先登录npm要不然会报错。如果是再次推送同一个项目记得修改版本号。 </p>\n<h3 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h3><figure class=\"highlight q\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm install --<span class=\"built_in\">save</span>-<span class=\"built_in\">dev</span> datechange</div></pre></td></tr></table></figure>\n<figure class=\"highlight ebnf\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">var datechange</span> = require(<span class=\"string\">'datechange'</span>);</div><div class=\"line\"><span class=\"attribute\">var now</span> = new Date();</div><div class=\"line\"><span class=\"attribute\">var timeStamp</span> = datechange(now);</div></pre></td></tr></table></figure>\n<p>OR</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;script type=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">'date.js'</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div><div class=\"line\">\t&lt;script type=<span class=\"string\">\"text/javascript\"</span>&gt;</div><div class=\"line\">\t\t<span class=\"keyword\">var</span> now = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</div><div class=\"line\">\t\t<span class=\"keyword\">var</span> timeStamp = datechange(<span class=\"number\">1511350834583</span>);</div><div class=\"line\">\t\talert(timeStamp)</div><div class=\"line\">\t&lt;<span class=\"regexp\">/script&gt;</span></div></pre></td></tr></table></figure>\n<p>先安装后使用，包的名称为package.json里的name属性。<br>具体代码看github:<br><a href=\"https://github.com/shuangmuyingzi/dateFormat\" target=\"_blank\" rel=\"external\">https://github.com/shuangmuyingzi/dateFormat</a></p>\n<h3 id=\"Vue组件如何上传到NPM\"><a href=\"#Vue组件如何上传到NPM\" class=\"headerlink\" title=\"Vue组件如何上传到NPM\"></a>Vue组件如何上传到NPM</h3><h4 id=\"方式一\"><a href=\"#方式一\" class=\"headerlink\" title=\"方式一\"></a>方式一</h4><p>用webpack把项目打包成JS文件，然后在package.json的 main导出该JS文件。</p>\n<h5 id=\"创建\"><a href=\"#创建\" class=\"headerlink\" title=\"创建\"></a>创建</h5><ul>\n<li><p>vue-cli创建vue简单项目 </p>\n<p>  <code>vue init webpack-simple load-ling-zi</code></p>\n</li>\n<li><p>修改package.json</p>\n<ol>\n<li><p>修改<code>&quot;private&quot;: false</code></p>\n<p> npm默认创建的项目是私有的，如果要发布至npm必须将其公开</p>\n</li>\n<li><p>添加<code>&quot;main&quot;: &quot;dist/build.js&quot;</code></p>\n<p> 通过<code>import loading from &#39;load-ling-zi&#39;</code>引用该组件时，项目会自动找到<code>node_modules/load-ling-zi/dist/build.js</code></p>\n</li>\n</ol>\n</li>\n<li><p>在src加入组件代码App.vue， 并创建我们的导出文件index.js。<br>在index.js中添加：</p>\n <figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> load <span class=\"keyword\">from</span> <span class=\"string\">'./App.vue'</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> load</div><div class=\"line\"><span class=\"comment\">//global 情况下 自动安装</span></div><div class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">'undefined'</span> &amp;&amp; <span class=\"built_in\">window</span>.Vue) &#123;</div><div class=\"line\">  <span class=\"built_in\">window</span>.Vue.component(<span class=\"string\">'load'</span>, load);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<ul>\n<li><p>因为最后我们是打包成一个js文件，所以需要修改一下配置文件<code>webpack.config.js</code></p>\n<p> 因为不是所有使用你组件的人都是通过npm按住和impor的很多人是通过<code>&lt;script&gt;</code>直接引入的,我们要将libraryTarget改为umd,以及修改入口文件与设置导出文件目录以及名称。   </p>\n<pre><code>entry: &apos;./src/index.js&apos;,\noutput: {\npath: path.resolve(__dirname, &apos;./dist&apos;),\npublicPath: &apos;/dist/&apos;,\nfilename: &apos;build.js&apos;,\nlibrary: &apos;load&apos;,\nlibraryTarget: &apos;umd&apos;,\numdNamedDefine: true\n},\n</code></pre></li>\n<li><p>最后需要把<code>.gitignore</code>文件里面的<code>/dist</code>删除掉要不然上传时会忽略掉dist打包的文件。</p>\n<p> 具体代码已放到github：<br> <a href=\"https://github.com/shuangmuyingzi/loadingModule/tree/master/load/load-ling-zi\" target=\"_blank\" rel=\"external\">https://github.com/shuangmuyingzi/loadingModule/tree/master/load/load-ling-zi</a></p>\n</li>\n</ul>\n<h5 id=\"发布\"><a href=\"#发布\" class=\"headerlink\" title=\"发布\"></a>发布</h5><p><code>npm publish</code>，具体参考上面步骤。</p>\n<h5 id=\"应用\"><a href=\"#应用\" class=\"headerlink\" title=\"应用\"></a>应用</h5><ol>\n<li>Installation</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># install dependencies</span></div><div class=\"line\">npm install load-ling-zi -D</div></pre></td></tr></table></figure>\n<ol>\n<li>Usage</li>\n</ol>\n<figure class=\"highlight django\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">loading</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"loading.isShow\"</span>&gt;</span></span></div><div class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123; loading.text &#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></div><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">loading</span>&gt;</span></span></div><div class=\"line\"><span class=\"xml\"></span></div><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span></div><div class=\"line\"><span class=\"xml\">    import loading from 'load-ling-zi'</span></div><div class=\"line\"><span class=\"xml\">    export default &#123;</span></div><div class=\"line\"><span class=\"xml\">        components: &#123;</span></div><div class=\"line\"><span class=\"xml\">            loading:loading</span></div><div class=\"line\"><span class=\"xml\">        &#125;,</span></div><div class=\"line\"><span class=\"xml\">        data () &#123;</span></div><div class=\"line\"><span class=\"xml\">            return &#123;</span></div><div class=\"line\"><span class=\"xml\">                loading:&#123;</span></div><div class=\"line\"><span class=\"xml\">                    isShow:true,</span></div><div class=\"line\"><span class=\"xml\">                    text:\"加载中\"</span></div><div class=\"line\"><span class=\"xml\">                &#125;,   </span></div><div class=\"line\"><span class=\"xml\">            &#125;</span></div><div class=\"line\"><span class=\"xml\">        &#125;</span></div><div class=\"line\"><span class=\"xml\">    &#125;</span></div><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div></pre></td></tr></table></figure>\n<h4 id=\"方式二\"><a href=\"#方式二\" class=\"headerlink\" title=\"方式二\"></a>方式二</h4><p>在main里直接导出Vue组件（.vue文件）<br>具体代码看这里：<br><a href=\"https://github.com/shuangmuyingzi/loadingModule/tree/master/loading\" target=\"_blank\" rel=\"external\">https://github.com/shuangmuyingzi/loadingModule/tree/master/loading</a></p>\n<h3 id=\"写在最后\"><a href=\"#写在最后\" class=\"headerlink\" title=\"写在最后\"></a>写在最后</h3><p>关于vue组件、插件的实现方式估计还有很多的办法,本文权当抛砖引玉，水平有限，举的例子也是比较简单，一个好的组件也要考虑更多的可配置性以及通用性，数据的可配置，结构的可配置，样式的可配置等等，es里面模块化的写法也是很多，还有一些直接在<code>&lt;script&gt;</code>引入，所以要考虑如何导出代码能够满足更多场景的使用。</p>"},{"title":"JavaScript guide","date":"2017-12-28T00:00:00.000Z","_content":"\n本文主要记录一些javascript优秀的写法，自己又老是不习惯使用的，方便日后养成习惯。\n\n<!--more-->\n\n## JavaScript guide es5\n\n### 数组\n1、当你需要拷贝数组时，使用 Array#slice。\n\n```\nvar len = items.length;\nvar itemsCopy = [];\nvar i;\n// bad\nfor (i = 0; i < len; i++) {\n  itemsCopy[i] = items[i];\n}\n// good\nitemsCopy = items.slice();\n```\n2、使用 Array#slice 将类数组对象转换成数组。\n\n```\nfunction trigger() {\n  var args = Array.prototype.slice.call(arguments);\n  ...\n}\n```\n### 字符串\n1、使用单引号 `''` 包裹字符串。\n\n```\n// bad\nvar name = \"Bob Parr\";\n// good\nvar name = 'Bob Parr';\n// bad\nvar fullName = \"Bob \" + this.lastName;\n// good\nvar fullName = 'Bob ' + this.lastName;\n```\n2、超过 100 个字符的字符串应该使用连接符写成多行。\n3、注：若过度使用，通过连接符连接的长字符串可能会影响性能。\n\n```\n// bad\nvar errorMessage = 'This is a super long error that was thrown because of Batman. When you stop to think about how Batman had anything to do with this, you would get nowhere fast.';\n// bad\nvar errorMessage = 'This is a super long error that was thrown because \\\nof Batman. When you stop to think about how Batman had anything to do \\\nwith this, you would get nowhere \\\nfast.';\n// good\nvar errorMessage = 'This is a super long error that was thrown because ' +\n  'of Batman. When you stop to think about how Batman had anything to do ' +\n  'with this, you would get nowhere fast.';\n```\n4、程序化生成的字符串使用 Array#join 连接而不是使用连接符。尤其是 IE 下：\n\n```\nvar items;\nvar messages;\nvar length;\nvar i;\nmessages = [{\n  state: 'success',\n  message: 'This one worked.'\n}, {\n  state: 'success',\n  message: 'This one worked as well.'\n}, {\n  state: 'error',\n  message: 'This one did not work.'\n}];\nlength = messages.length;\n// bad\nfunction inbox(messages) {\n  items = '<ul>';\n  for (i = 0; i < length; i++) {\n    items += '<li>' + messages[i].message + '</li>';\n  }\n  return items + '</ul>';\n}\n// good\nfunction inbox(messages) {\n  items = [];\n  for (i = 0; i < length; i++) {\n    // use direct assignment in this case because we're micro-optimizing.\n    items[i] = '<li>' + messages[i].message + '</li>';\n  }\n  return '<ul>' + items.join('') + '</ul>';\n}\n```\n### 函数\n1、函数表达式：\n\n```\n// 匿名函数表达式\nvar anonymous = function() {\n  return true;\n};\n// 命名函数表达式\nvar named = function named() {\n  return true;\n};\n// 立即调用的函数表达式（IIFE）\n(function () {\n  console.log('Welcome to the Internet. Please follow me.');\n}());\n```\n2、永远不要在一个非函数代码块（if、while 等）中声明一个函数，浏览器允许你这么做，但它们的解析表现不一致，正确的做法是：在块外定义一个变量，然后将函数赋值给它。\n\n3、注： ECMA-262 把 块 定义为一组语句。函数声明不是语句。\n\n```\n// bad\nif (currentUser) {\n  function test() {\n    console.log('Nope.');\n  }\n}\n// good\nvar test;\nif (currentUser) {\n  test = function test() {\n    console.log('Yup.');\n  };\n}\n```\n4、永远不要把参数命名为 arguments。这将取代函数作用域内的 arguments 对象。\n\n```\n// bad\nfunction nope(name, options, arguments) {\n  // ...stuff...\n}\n// good\nfunction yup(name, options, args) {\n  // ...stuff...\n}\n```\n### 变量\n1、使用 var 声明每一个变量。\n这样做的好处是增加新变量将变的更加容易，而且你永远不用再担心调换错 ; 跟 ,。\n\n```\n// bad\nvar items = getItems(),\n    goSportsTeam = true,\n    dragonball = 'z';\n// bad\n// （跟上面的代码比较一下，看看哪里错了）\nvar items = getItems(),\n    goSportsTeam = true;\n    dragonball = 'z';\n// good\nvar items = getItems();\nvar goSportsTeam = true;\nvar dragonball = 'z';\n```\n2、最后再声明未赋值的变量。当你需要引用前面的变量赋值时这将变的很有用。\n\n```\n// bad\nvar i, len, dragonball,\n    items = getItems(),\n    goSportsTeam = true;\n// bad\nvar i;\nvar items = getItems();\nvar dragonball;\nvar goSportsTeam = true;\nvar len;\n// good\nvar items = getItems();\nvar goSportsTeam = true;\nvar dragonball;\nvar length;\nvar i;\n```\n3、在作用域顶部声明变量。这将帮你避免变量声明提升相关的问题。\n\n```\n// bad\nfunction () {\n  test();\n  console.log('doing stuff..');\n  //..other stuff..\n  var name = getName();\n  if (name === 'test') {\n    return false;\n  }\n  return name;\n}\n// good\nfunction () {\n  var name = getName();\n  test();\n  console.log('doing stuff..');\n  //..other stuff..\n  if (name === 'test') {\n    return false;\n  }\n  return name;\n}\n// bad - 不必要的函数调用\nfunction () {\n  var name = getName();\n  if (!arguments.length) {\n    return false;\n  }\n  this.setFirstName(name);\n  return true;\n}\n// good\nfunction () {\n  var name;\n  if (!arguments.length) {\n    return false;\n  }\n  name = getName();\n  this.setFirstName(name);\n  return true;\n}\n```\n\n### 比较运算符 & 等号\n1、优先使用 === 和 !== 而不是 == 和 !=.\n2、条件表达式例如 if 语句通过抽象方法 ToBoolean 强制计算它们的表达式并且总是遵守下面的规则：\n对象 被计算为 true\nUndefined 被计算为 false\nNull 被计算为 false\n布尔值 被计算为 布尔的值\n数字 如果是 +0、-0 或 NaN 被计算为 false，否则为 true\n字符串 如果是空字符串 '' 被计算为 false，否则为 true\n\n```\nif ([0]) {\n  // true\n  // 一个数组就是一个对象，对象被计算为 true\n}\n```\n3、使用快捷方式。\n\n```\n// bad\nif (name !== '') {\n  // ...stuff...\n}\n// good\nif (name) {\n  // ...stuff...\n}\n// bad\nif (collection.length > 0) {\n  // ...stuff...\n}\n// good\nif (collection.length) {\n  // ...stuff...\n}\n```\n### 块\n1、使用大括号包裹所有的多行代码块。\n\n```\n// bad\nif (test)\n  return false;\n// good\nif (test) return false;\n// good\nif (test) {\n  return false;\n}\n// bad\nfunction () { return false; }\n// good\nfunction () {\n  return false;\n}\n```\n### 注释\n1、使用 /** ... */ 作为多行注释。包含描述、指定所有参数和返回值的类型和值。\n\n```\n// bad\n// make() returns a new element\n// based on the passed in tag name\n//\n// @param {String} tag\n// @return {Element} element\nfunction make(tag) {\n  // ...stuff...\n  return element;\n}\n// good\n/**\n * make() returns a new element\n * based on the passed in tag name\n *\n * @param {String} tag\n * @return {Element} element\n */\nfunction make(tag) {\n  // ...stuff...\n  return element;\n}\n```\n2、使用 // 作为单行注释。在评论对象上面另起一行使用单行注释。在注释前插入空行。\n\n```\n// bad\nvar active = true;  // is current tab\n// good\n// is current tab\nvar active = true;\n// bad\nfunction getType() {\n  console.log('fetching type...');\n  // set the default type to 'no type'\n  var type = this.type || 'no type';\n  return type;\n}\n// good\nfunction getType() {\n  console.log('fetching type...');\n  // set the default type to 'no type'\n  var type = this.type || 'no type';\n  return type;\n}\n```\n3、给注释增加 FIXME 或 TODO 的前缀可以帮助其他开发者快速了解这是一个需要复查的问题，或是给需要实现的功能提供一个解决方式。这将有别于常见的注释，因为它们是可操作的。使用 FIXME -- need to figure this out 或者 TODO -- need to implement。\n\n4、使用 // FIXME: 标注问题。\n\n```\nfunction Calculator() {\n  // FIXME: shouldn't use a global here\n  total = 0;\n  return this;\n}\n\n```\n5、使用 // TODO: 标注问题的解决方式。\n\n```\nfunction Calculator() {\n  // TODO: total should be configurable by an options param\n  this.total = 0;\n  return this;\n}\n```\n### 空白\n1、使用 2 个空格作为缩进。\n\n```\n// bad\nfunction () {\n∙∙∙∙var name;\n}\n// bad\nfunction () {\n∙var name;\n}\n// good\nfunction () {\n∙∙var name;\n}\n```\n2、在大括号前放一个空格。\n\n```\n// bad\nfunction test(){\n  console.log('test');\n}\n// good\nfunction test() {\n  console.log('test');\n}\n// bad\ndog.set('attr',{\n  age: '1 year',\n  breed: 'Bernese Mountain Dog'\n});\n// good\ndog.set('attr', {\n  age: '1 year',\n  breed: 'Bernese Mountain Dog'\n});\n```\n3、在控制语句（if、while 等）的小括号前放一个空格。在函数调用及声明中，不在函数的参数列表前加空格。\n\n```\n// bad\nif(isJedi) {\n  fight ();\n}\n// good\nif (isJedi) {\n  fight();\n}\n// bad\nfunction fight () {\n  console.log ('Swooosh!');\n}\n// good\nfunction fight() {\n  console.log('Swooosh!');\n}\n```\n4、使用空格把运算符隔开。\n\n```\n// bad\nvar x=y+5;\n// good\nvar x = y + 5;\n```\n5、在文件末尾插入一个空行。\n\n```\n// bad\n(function (global) {\n  // ...stuff...\n})(this);\n```\n```\n// bad\n(function (global) {\n  // ...stuff...\n})(this);↵\n↵\n```\n```\n// good\n(function (global) {\n  // ...stuff...\n})(this);↵\n```\n6、在使用长方法链时进行缩进。使用前面的点 . 强调这是方法调用而不是新语句。\n\n```\n// bad\n$('#items').find('.selected').highlight().end().find('.open').updateCount();\n// bad\n$('#items').\n  find('.selected').\n    highlight().\n    end().\n  find('.open').\n    updateCount();\n// good\n$('#items')\n  .find('.selected')\n    .highlight()\n    .end()\n  .find('.open')\n    .updateCount();\n// bad\nvar leds = stage.selectAll('.led').data(data).enter().append('svg:svg').classed('led', true)\n    .attr('width', (radius + margin) * 2).append('svg:g')\n    .attr('transform', 'translate(' + (radius + margin) + ',' + (radius + margin) + ')')\n    .call(tron.led);\n// good\nvar leds = stage.selectAll('.led')\n    .data(data)\n  .enter().append('svg:svg')\n    .classed('led', true)\n    .attr('width', (radius + margin) * 2)\n  .append('svg:g')\n    .attr('transform', 'translate(' + (radius + margin) + ',' + (radius + margin) + ')')\n    .call(tron.led);\n```\n7、在块末和新语句前插入空行。\n\n```\n// bad\nif (foo) {\n  return bar;\n}\nreturn baz;\n// good\nif (foo) {\n  return bar;\n}\nreturn baz;\n// bad\nvar obj = {\n  foo: function () {\n  },\n  bar: function () {\n  }\n};\nreturn obj;\n// good\nvar obj = {\n  foo: function () {\n  },\n  bar: function () {\n  }\n};\nreturn obj;\n```\n### 分号\n1、使用分号。\n\n```\n// bad\n(function () {\n  var name = 'Skywalker'\n  return name\n})()\n// good\n(function () {\n  var name = 'Skywalker';\n  return name;\n})();\n// good (防止函数在两个 IIFE 合并时被当成一个参数\n;(function () {\n  var name = 'Skywalker';\n  return name;\n})();\n```\n### 类型转换\n1、在语句开始时执行类型转换。\n2、字符串：\n\n```\n//  => this.reviewScore = 9;\n// bad\nvar totalScore = this.reviewScore + '';\n// good\nvar totalScore = '' + this.reviewScore;\n// bad\nvar totalScore = '' + this.reviewScore + ' total score';\n// good\nvar totalScore = this.reviewScore + ' total score';\n```\n3、使用 parseInt 转换数字时总是带上类型转换的基数。\n\n```\nvar inputValue = '4';\n// bad\nvar val = new Number(inputValue);\n// bad\nvar val = +inputValue;\n// bad\nvar val = inputValue >> 0;\n// bad\nvar val = parseInt(inputValue);\n// good\nvar val = Number(inputValue);\n// good\nvar val = parseInt(inputValue, 10);\n```\n4、如果因为某些原因 parseInt 成为你所做的事的瓶颈而需要使用位操作解决性能问题时，留个注释说清楚原因和你的目的。\n\n```\n// good\n/**\n * parseInt was the reason my code was slow.\n * Bitshifting the String to coerce it to a\n * Number made it a lot faster.\n */\nvar val = inputValue >> 0;\n```\n5、布尔:\n\n```\nvar age = 0;\n// bad\nvar hasAge = new Boolean(age);\n// good\nvar hasAge = Boolean(age);\n// good\nvar hasAge = !!age;\n```\n### 命名规则\n1、避免单字母命名。命名应具备描述性。\n\n```\n// bad\nfunction q() {\n  // ...stuff...\n}\n// good\nfunction query() {\n  // ..stuff..\n```\n2、使用驼峰式命名对象、函数和实例。\n\n```\n// bad\nvar OBJEcttsssss = {};\nvar this_is_my_object = {};\nvar o = {};\nfunction c() {}\n// good\nvar thisIsMyObject = {};\nfunction thisIsMyFunction() {}\n```\n3、使用帕斯卡式命名构造函数或类。\n\n```\n// bad\nfunction user(options) {\n  this.name = options.name;\n}\nvar bad = new user({\n  name: 'nope'\n});\n// good\nfunction User(options) {\n  this.name = options.name;\n}\nvar good = new User({\n  name: 'yup'\n});\n```\n4、不要使用下划线前/后缀。\n为什么？JavaScript 并没有私有属性或私有方法的概念。虽然使用下划线是表示「私有」的一种共识，但实际上这些属性是完全公开的，它本身就是你公共接口的一部分。这种习惯或许会导致开发者错误的认为改动它不会造成破坏或者不需要去测试。长话短说：如果你想要某处为「私有」，它必须不能是显式提出的。\n\n```\n// bad\nthis.__firstName__ = 'Panda';\nthis.firstName_ = 'Panda';\nthis._firstName = 'Panda';\n// good\nthis.firstName = 'Panda';\n```\n5、不要保存 this 的引用。使用 Function#bind。\n\n```\n// bad\nfunction () {\n  var self = this;\n  return function () {\n    console.log(self);\n  };\n}\n// bad\nfunction () {\n  var that = this;\n  return function () {\n    console.log(that);\n  };\n}\n// bad\nfunction () {\n  var _this = this;\n  return function () {\n    console.log(_this);\n  };\n}\n// good\nfunction () {\n  return function () {\n    console.log(this);\n  }.bind(this);\n}\n```\n6、如果你的文件导出一个类，你的文件名应该与类名完全相同。\n\n```\n// file contents\nclass CheckBox {\n  // ...\n}\nmodule.exports = CheckBox;\n// in some other file\n// bad\nvar CheckBox = require('./checkBox');\n// bad\nvar CheckBox = require('./check_box');\n// good\nvar CheckBox = require('./CheckBox');\n```\n### 模块\n1、模块应该以 ! 开始。这样确保了当一个不好的模块忘记包含最后的分号时，在合并代码到生产环境后不会产生错误\n2、文件应该以驼峰式命名，并放在同名的文件夹里，且与导出的名字一致。\n3、增加一个名为 noConflict() 的方法来设置导出的模块为前一个版本并返回它。\n4、永远在模块顶部声明 'use strict';。\n\n```\n// fancyInput/fancyInput.js\n!function (global) {\n  'use strict';\n  var previousFancyInput = global.FancyInput;\n  function FancyInput(options) {\n    this.options = options || {};\n  }\n  FancyInput.noConflict = function noConflict() {\n    global.FancyInput = previousFancyInput;\n    return FancyInput;\n  };\n  global.FancyInput = FancyInput;\n}(this);\n```\n参考链接：https://github.com/sivan/javascript-style-guide/blob/master/es5/README.md\n\n\n","source":"_posts/guide.md","raw":"---\ntitle: JavaScript guide\ndate: 2017-12-28\nphoto: https://shuangmuyingzi.github.io/img/npm.jpg\n---\n\n本文主要记录一些javascript优秀的写法，自己又老是不习惯使用的，方便日后养成习惯。\n\n<!--more-->\n\n## JavaScript guide es5\n\n### 数组\n1、当你需要拷贝数组时，使用 Array#slice。\n\n```\nvar len = items.length;\nvar itemsCopy = [];\nvar i;\n// bad\nfor (i = 0; i < len; i++) {\n  itemsCopy[i] = items[i];\n}\n// good\nitemsCopy = items.slice();\n```\n2、使用 Array#slice 将类数组对象转换成数组。\n\n```\nfunction trigger() {\n  var args = Array.prototype.slice.call(arguments);\n  ...\n}\n```\n### 字符串\n1、使用单引号 `''` 包裹字符串。\n\n```\n// bad\nvar name = \"Bob Parr\";\n// good\nvar name = 'Bob Parr';\n// bad\nvar fullName = \"Bob \" + this.lastName;\n// good\nvar fullName = 'Bob ' + this.lastName;\n```\n2、超过 100 个字符的字符串应该使用连接符写成多行。\n3、注：若过度使用，通过连接符连接的长字符串可能会影响性能。\n\n```\n// bad\nvar errorMessage = 'This is a super long error that was thrown because of Batman. When you stop to think about how Batman had anything to do with this, you would get nowhere fast.';\n// bad\nvar errorMessage = 'This is a super long error that was thrown because \\\nof Batman. When you stop to think about how Batman had anything to do \\\nwith this, you would get nowhere \\\nfast.';\n// good\nvar errorMessage = 'This is a super long error that was thrown because ' +\n  'of Batman. When you stop to think about how Batman had anything to do ' +\n  'with this, you would get nowhere fast.';\n```\n4、程序化生成的字符串使用 Array#join 连接而不是使用连接符。尤其是 IE 下：\n\n```\nvar items;\nvar messages;\nvar length;\nvar i;\nmessages = [{\n  state: 'success',\n  message: 'This one worked.'\n}, {\n  state: 'success',\n  message: 'This one worked as well.'\n}, {\n  state: 'error',\n  message: 'This one did not work.'\n}];\nlength = messages.length;\n// bad\nfunction inbox(messages) {\n  items = '<ul>';\n  for (i = 0; i < length; i++) {\n    items += '<li>' + messages[i].message + '</li>';\n  }\n  return items + '</ul>';\n}\n// good\nfunction inbox(messages) {\n  items = [];\n  for (i = 0; i < length; i++) {\n    // use direct assignment in this case because we're micro-optimizing.\n    items[i] = '<li>' + messages[i].message + '</li>';\n  }\n  return '<ul>' + items.join('') + '</ul>';\n}\n```\n### 函数\n1、函数表达式：\n\n```\n// 匿名函数表达式\nvar anonymous = function() {\n  return true;\n};\n// 命名函数表达式\nvar named = function named() {\n  return true;\n};\n// 立即调用的函数表达式（IIFE）\n(function () {\n  console.log('Welcome to the Internet. Please follow me.');\n}());\n```\n2、永远不要在一个非函数代码块（if、while 等）中声明一个函数，浏览器允许你这么做，但它们的解析表现不一致，正确的做法是：在块外定义一个变量，然后将函数赋值给它。\n\n3、注： ECMA-262 把 块 定义为一组语句。函数声明不是语句。\n\n```\n// bad\nif (currentUser) {\n  function test() {\n    console.log('Nope.');\n  }\n}\n// good\nvar test;\nif (currentUser) {\n  test = function test() {\n    console.log('Yup.');\n  };\n}\n```\n4、永远不要把参数命名为 arguments。这将取代函数作用域内的 arguments 对象。\n\n```\n// bad\nfunction nope(name, options, arguments) {\n  // ...stuff...\n}\n// good\nfunction yup(name, options, args) {\n  // ...stuff...\n}\n```\n### 变量\n1、使用 var 声明每一个变量。\n这样做的好处是增加新变量将变的更加容易，而且你永远不用再担心调换错 ; 跟 ,。\n\n```\n// bad\nvar items = getItems(),\n    goSportsTeam = true,\n    dragonball = 'z';\n// bad\n// （跟上面的代码比较一下，看看哪里错了）\nvar items = getItems(),\n    goSportsTeam = true;\n    dragonball = 'z';\n// good\nvar items = getItems();\nvar goSportsTeam = true;\nvar dragonball = 'z';\n```\n2、最后再声明未赋值的变量。当你需要引用前面的变量赋值时这将变的很有用。\n\n```\n// bad\nvar i, len, dragonball,\n    items = getItems(),\n    goSportsTeam = true;\n// bad\nvar i;\nvar items = getItems();\nvar dragonball;\nvar goSportsTeam = true;\nvar len;\n// good\nvar items = getItems();\nvar goSportsTeam = true;\nvar dragonball;\nvar length;\nvar i;\n```\n3、在作用域顶部声明变量。这将帮你避免变量声明提升相关的问题。\n\n```\n// bad\nfunction () {\n  test();\n  console.log('doing stuff..');\n  //..other stuff..\n  var name = getName();\n  if (name === 'test') {\n    return false;\n  }\n  return name;\n}\n// good\nfunction () {\n  var name = getName();\n  test();\n  console.log('doing stuff..');\n  //..other stuff..\n  if (name === 'test') {\n    return false;\n  }\n  return name;\n}\n// bad - 不必要的函数调用\nfunction () {\n  var name = getName();\n  if (!arguments.length) {\n    return false;\n  }\n  this.setFirstName(name);\n  return true;\n}\n// good\nfunction () {\n  var name;\n  if (!arguments.length) {\n    return false;\n  }\n  name = getName();\n  this.setFirstName(name);\n  return true;\n}\n```\n\n### 比较运算符 & 等号\n1、优先使用 === 和 !== 而不是 == 和 !=.\n2、条件表达式例如 if 语句通过抽象方法 ToBoolean 强制计算它们的表达式并且总是遵守下面的规则：\n对象 被计算为 true\nUndefined 被计算为 false\nNull 被计算为 false\n布尔值 被计算为 布尔的值\n数字 如果是 +0、-0 或 NaN 被计算为 false，否则为 true\n字符串 如果是空字符串 '' 被计算为 false，否则为 true\n\n```\nif ([0]) {\n  // true\n  // 一个数组就是一个对象，对象被计算为 true\n}\n```\n3、使用快捷方式。\n\n```\n// bad\nif (name !== '') {\n  // ...stuff...\n}\n// good\nif (name) {\n  // ...stuff...\n}\n// bad\nif (collection.length > 0) {\n  // ...stuff...\n}\n// good\nif (collection.length) {\n  // ...stuff...\n}\n```\n### 块\n1、使用大括号包裹所有的多行代码块。\n\n```\n// bad\nif (test)\n  return false;\n// good\nif (test) return false;\n// good\nif (test) {\n  return false;\n}\n// bad\nfunction () { return false; }\n// good\nfunction () {\n  return false;\n}\n```\n### 注释\n1、使用 /** ... */ 作为多行注释。包含描述、指定所有参数和返回值的类型和值。\n\n```\n// bad\n// make() returns a new element\n// based on the passed in tag name\n//\n// @param {String} tag\n// @return {Element} element\nfunction make(tag) {\n  // ...stuff...\n  return element;\n}\n// good\n/**\n * make() returns a new element\n * based on the passed in tag name\n *\n * @param {String} tag\n * @return {Element} element\n */\nfunction make(tag) {\n  // ...stuff...\n  return element;\n}\n```\n2、使用 // 作为单行注释。在评论对象上面另起一行使用单行注释。在注释前插入空行。\n\n```\n// bad\nvar active = true;  // is current tab\n// good\n// is current tab\nvar active = true;\n// bad\nfunction getType() {\n  console.log('fetching type...');\n  // set the default type to 'no type'\n  var type = this.type || 'no type';\n  return type;\n}\n// good\nfunction getType() {\n  console.log('fetching type...');\n  // set the default type to 'no type'\n  var type = this.type || 'no type';\n  return type;\n}\n```\n3、给注释增加 FIXME 或 TODO 的前缀可以帮助其他开发者快速了解这是一个需要复查的问题，或是给需要实现的功能提供一个解决方式。这将有别于常见的注释，因为它们是可操作的。使用 FIXME -- need to figure this out 或者 TODO -- need to implement。\n\n4、使用 // FIXME: 标注问题。\n\n```\nfunction Calculator() {\n  // FIXME: shouldn't use a global here\n  total = 0;\n  return this;\n}\n\n```\n5、使用 // TODO: 标注问题的解决方式。\n\n```\nfunction Calculator() {\n  // TODO: total should be configurable by an options param\n  this.total = 0;\n  return this;\n}\n```\n### 空白\n1、使用 2 个空格作为缩进。\n\n```\n// bad\nfunction () {\n∙∙∙∙var name;\n}\n// bad\nfunction () {\n∙var name;\n}\n// good\nfunction () {\n∙∙var name;\n}\n```\n2、在大括号前放一个空格。\n\n```\n// bad\nfunction test(){\n  console.log('test');\n}\n// good\nfunction test() {\n  console.log('test');\n}\n// bad\ndog.set('attr',{\n  age: '1 year',\n  breed: 'Bernese Mountain Dog'\n});\n// good\ndog.set('attr', {\n  age: '1 year',\n  breed: 'Bernese Mountain Dog'\n});\n```\n3、在控制语句（if、while 等）的小括号前放一个空格。在函数调用及声明中，不在函数的参数列表前加空格。\n\n```\n// bad\nif(isJedi) {\n  fight ();\n}\n// good\nif (isJedi) {\n  fight();\n}\n// bad\nfunction fight () {\n  console.log ('Swooosh!');\n}\n// good\nfunction fight() {\n  console.log('Swooosh!');\n}\n```\n4、使用空格把运算符隔开。\n\n```\n// bad\nvar x=y+5;\n// good\nvar x = y + 5;\n```\n5、在文件末尾插入一个空行。\n\n```\n// bad\n(function (global) {\n  // ...stuff...\n})(this);\n```\n```\n// bad\n(function (global) {\n  // ...stuff...\n})(this);↵\n↵\n```\n```\n// good\n(function (global) {\n  // ...stuff...\n})(this);↵\n```\n6、在使用长方法链时进行缩进。使用前面的点 . 强调这是方法调用而不是新语句。\n\n```\n// bad\n$('#items').find('.selected').highlight().end().find('.open').updateCount();\n// bad\n$('#items').\n  find('.selected').\n    highlight().\n    end().\n  find('.open').\n    updateCount();\n// good\n$('#items')\n  .find('.selected')\n    .highlight()\n    .end()\n  .find('.open')\n    .updateCount();\n// bad\nvar leds = stage.selectAll('.led').data(data).enter().append('svg:svg').classed('led', true)\n    .attr('width', (radius + margin) * 2).append('svg:g')\n    .attr('transform', 'translate(' + (radius + margin) + ',' + (radius + margin) + ')')\n    .call(tron.led);\n// good\nvar leds = stage.selectAll('.led')\n    .data(data)\n  .enter().append('svg:svg')\n    .classed('led', true)\n    .attr('width', (radius + margin) * 2)\n  .append('svg:g')\n    .attr('transform', 'translate(' + (radius + margin) + ',' + (radius + margin) + ')')\n    .call(tron.led);\n```\n7、在块末和新语句前插入空行。\n\n```\n// bad\nif (foo) {\n  return bar;\n}\nreturn baz;\n// good\nif (foo) {\n  return bar;\n}\nreturn baz;\n// bad\nvar obj = {\n  foo: function () {\n  },\n  bar: function () {\n  }\n};\nreturn obj;\n// good\nvar obj = {\n  foo: function () {\n  },\n  bar: function () {\n  }\n};\nreturn obj;\n```\n### 分号\n1、使用分号。\n\n```\n// bad\n(function () {\n  var name = 'Skywalker'\n  return name\n})()\n// good\n(function () {\n  var name = 'Skywalker';\n  return name;\n})();\n// good (防止函数在两个 IIFE 合并时被当成一个参数\n;(function () {\n  var name = 'Skywalker';\n  return name;\n})();\n```\n### 类型转换\n1、在语句开始时执行类型转换。\n2、字符串：\n\n```\n//  => this.reviewScore = 9;\n// bad\nvar totalScore = this.reviewScore + '';\n// good\nvar totalScore = '' + this.reviewScore;\n// bad\nvar totalScore = '' + this.reviewScore + ' total score';\n// good\nvar totalScore = this.reviewScore + ' total score';\n```\n3、使用 parseInt 转换数字时总是带上类型转换的基数。\n\n```\nvar inputValue = '4';\n// bad\nvar val = new Number(inputValue);\n// bad\nvar val = +inputValue;\n// bad\nvar val = inputValue >> 0;\n// bad\nvar val = parseInt(inputValue);\n// good\nvar val = Number(inputValue);\n// good\nvar val = parseInt(inputValue, 10);\n```\n4、如果因为某些原因 parseInt 成为你所做的事的瓶颈而需要使用位操作解决性能问题时，留个注释说清楚原因和你的目的。\n\n```\n// good\n/**\n * parseInt was the reason my code was slow.\n * Bitshifting the String to coerce it to a\n * Number made it a lot faster.\n */\nvar val = inputValue >> 0;\n```\n5、布尔:\n\n```\nvar age = 0;\n// bad\nvar hasAge = new Boolean(age);\n// good\nvar hasAge = Boolean(age);\n// good\nvar hasAge = !!age;\n```\n### 命名规则\n1、避免单字母命名。命名应具备描述性。\n\n```\n// bad\nfunction q() {\n  // ...stuff...\n}\n// good\nfunction query() {\n  // ..stuff..\n```\n2、使用驼峰式命名对象、函数和实例。\n\n```\n// bad\nvar OBJEcttsssss = {};\nvar this_is_my_object = {};\nvar o = {};\nfunction c() {}\n// good\nvar thisIsMyObject = {};\nfunction thisIsMyFunction() {}\n```\n3、使用帕斯卡式命名构造函数或类。\n\n```\n// bad\nfunction user(options) {\n  this.name = options.name;\n}\nvar bad = new user({\n  name: 'nope'\n});\n// good\nfunction User(options) {\n  this.name = options.name;\n}\nvar good = new User({\n  name: 'yup'\n});\n```\n4、不要使用下划线前/后缀。\n为什么？JavaScript 并没有私有属性或私有方法的概念。虽然使用下划线是表示「私有」的一种共识，但实际上这些属性是完全公开的，它本身就是你公共接口的一部分。这种习惯或许会导致开发者错误的认为改动它不会造成破坏或者不需要去测试。长话短说：如果你想要某处为「私有」，它必须不能是显式提出的。\n\n```\n// bad\nthis.__firstName__ = 'Panda';\nthis.firstName_ = 'Panda';\nthis._firstName = 'Panda';\n// good\nthis.firstName = 'Panda';\n```\n5、不要保存 this 的引用。使用 Function#bind。\n\n```\n// bad\nfunction () {\n  var self = this;\n  return function () {\n    console.log(self);\n  };\n}\n// bad\nfunction () {\n  var that = this;\n  return function () {\n    console.log(that);\n  };\n}\n// bad\nfunction () {\n  var _this = this;\n  return function () {\n    console.log(_this);\n  };\n}\n// good\nfunction () {\n  return function () {\n    console.log(this);\n  }.bind(this);\n}\n```\n6、如果你的文件导出一个类，你的文件名应该与类名完全相同。\n\n```\n// file contents\nclass CheckBox {\n  // ...\n}\nmodule.exports = CheckBox;\n// in some other file\n// bad\nvar CheckBox = require('./checkBox');\n// bad\nvar CheckBox = require('./check_box');\n// good\nvar CheckBox = require('./CheckBox');\n```\n### 模块\n1、模块应该以 ! 开始。这样确保了当一个不好的模块忘记包含最后的分号时，在合并代码到生产环境后不会产生错误\n2、文件应该以驼峰式命名，并放在同名的文件夹里，且与导出的名字一致。\n3、增加一个名为 noConflict() 的方法来设置导出的模块为前一个版本并返回它。\n4、永远在模块顶部声明 'use strict';。\n\n```\n// fancyInput/fancyInput.js\n!function (global) {\n  'use strict';\n  var previousFancyInput = global.FancyInput;\n  function FancyInput(options) {\n    this.options = options || {};\n  }\n  FancyInput.noConflict = function noConflict() {\n    global.FancyInput = previousFancyInput;\n    return FancyInput;\n  };\n  global.FancyInput = FancyInput;\n}(this);\n```\n参考链接：https://github.com/sivan/javascript-style-guide/blob/master/es5/README.md\n\n\n","slug":"guide","published":1,"updated":"2018-05-01T06:18:56.270Z","photos":["https://shuangmuyingzi.github.io/img/npm.jpg"],"comments":1,"layout":"post","link":"","_id":"cjgnpte6d0004u06x5gzli23y","content":"<p>本文主要记录一些javascript优秀的写法，自己又老是不习惯使用的，方便日后养成习惯。</p>\n<a id=\"more\"></a>\n<h2 id=\"JavaScript-guide-es5\"><a href=\"#JavaScript-guide-es5\" class=\"headerlink\" title=\"JavaScript guide es5\"></a>JavaScript guide es5</h2><h3 id=\"数组\"><a href=\"#数组\" class=\"headerlink\" title=\"数组\"></a>数组</h3><p>1、当你需要拷贝数组时，使用 Array#slice。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"built_in\">len</span> = items.length;</div><div class=\"line\"><span class=\"keyword\">var</span> itemsCopy = [];</div><div class=\"line\"><span class=\"keyword\">var</span> i;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">for</span> (i = <span class=\"number\">0</span>; i &lt; <span class=\"built_in\">len</span>; i++) &#123;</div><div class=\"line\">  itemsCopy[i] = items[i];</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\">itemsCopy = items.slice();</div></pre></td></tr></table></figure>\n<p>2、使用 Array#slice 将类数组对象转换成数组。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">trigger</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> args = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>);</div><div class=\"line\">  ...</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"字符串\"><a href=\"#字符串\" class=\"headerlink\" title=\"字符串\"></a>字符串</h3><p>1、使用单引号 <code>&#39;&#39;</code> 包裹字符串。</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">\"Bob Parr\"</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'Bob Parr'</span>;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> fullName = <span class=\"string\">\"Bob \"</span> + <span class=\"keyword\">this</span>.lastName;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> fullName = <span class=\"string\">'Bob '</span> + <span class=\"keyword\">this</span>.lastName;</div></pre></td></tr></table></figure>\n<p>2、超过 100 个字符的字符串应该使用连接符写成多行。<br>3、注：若过度使用，通过连接符连接的长字符串可能会影响性能。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><div class=\"line\">// bad</div><div class=\"line\">var errorMessage = 'This is a super long error that was thrown because of Batman. When you <span class=\"keyword\">stop</span> <span class=\"keyword\">to</span> think about how Batman had anything <span class=\"keyword\">to</span> <span class=\"keyword\">do</span> <span class=\"keyword\">with</span> this, you would <span class=\"keyword\">get</span> nowhere fast.<span class=\"string\">';</span></div><div class=\"line\"><span class=\"string\">// bad</span></div><div class=\"line\"><span class=\"string\">var errorMessage = '</span>This <span class=\"keyword\">is</span> a super <span class=\"keyword\">long</span> <span class=\"keyword\">error</span> that was thrown because \\</div><div class=\"line\"><span class=\"keyword\">of</span> Batman. <span class=\"keyword\">When</span> you <span class=\"keyword\">stop</span> <span class=\"keyword\">to</span> think about how Batman had anything <span class=\"keyword\">to</span> <span class=\"keyword\">do</span> \\</div><div class=\"line\"><span class=\"keyword\">with</span> this, you would <span class=\"keyword\">get</span> nowhere \\</div><div class=\"line\">fast.<span class=\"string\">';</span></div><div class=\"line\"><span class=\"string\">// good</span></div><div class=\"line\"><span class=\"string\">var errorMessage = '</span>This <span class=\"keyword\">is</span> a super <span class=\"keyword\">long</span> <span class=\"keyword\">error</span> that was thrown because <span class=\"string\">' +</span></div><div class=\"line\"><span class=\"string\">  '</span><span class=\"keyword\">of</span> Batman. <span class=\"keyword\">When</span> you <span class=\"keyword\">stop</span> <span class=\"keyword\">to</span> think about how Batman had anything <span class=\"keyword\">to</span> <span class=\"keyword\">do</span> <span class=\"string\">' +</span></div><div class=\"line\"><span class=\"string\">  '</span><span class=\"keyword\">with</span> this, you would <span class=\"keyword\">get</span> nowhere fast.<span class=\"string\">';</span></div></pre></td></tr></table></figure>\n<p>4、程序化生成的字符串使用 Array#join 连接而不是使用连接符。尤其是 IE 下：</p>\n<figure class=\"highlight scilab\"><table><tr><td class=\"code\"><pre><div class=\"line\">var items;</div><div class=\"line\">var messages;</div><div class=\"line\">var <span class=\"built_in\">length</span>;</div><div class=\"line\">var i;</div><div class=\"line\">messages = [&#123;</div><div class=\"line\">  state: <span class=\"string\">'success'</span>,</div><div class=\"line\">  message: <span class=\"string\">'This one worked.'</span></div><div class=\"line\">&#125;, &#123;</div><div class=\"line\">  state: <span class=\"string\">'success'</span>,</div><div class=\"line\">  message: <span class=\"string\">'This one worked as well.'</span></div><div class=\"line\">&#125;, &#123;</div><div class=\"line\">  state: <span class=\"string\">'error'</span>,</div><div class=\"line\">  message: <span class=\"string\">'This one did not work.'</span></div><div class=\"line\">&#125;];</div><div class=\"line\"><span class=\"built_in\">length</span> = messages.<span class=\"built_in\">length</span>;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">inbox</span><span class=\"params\">(messages)</span> &#123;</span></div><div class=\"line\">  items = <span class=\"string\">'&lt;ul&gt;'</span>;</div><div class=\"line\">  <span class=\"keyword\">for</span> (i = <span class=\"number\">0</span>; i &lt; <span class=\"built_in\">length</span>; i++) &#123;</div><div class=\"line\">    items += <span class=\"string\">'&lt;li&gt;'</span> + messages[i].message + <span class=\"string\">'&lt;/li&gt;'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> items + <span class=\"string\">'&lt;/ul&gt;'</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">inbox</span><span class=\"params\">(messages)</span> &#123;</span></div><div class=\"line\">  items = [];</div><div class=\"line\">  <span class=\"keyword\">for</span> (i = <span class=\"number\">0</span>; i &lt; <span class=\"built_in\">length</span>; i++) &#123;</div><div class=\"line\">    <span class=\"comment\">// use direct assignment in this case because we're micro-optimizing.</span></div><div class=\"line\">    items[i] = <span class=\"string\">'&lt;li&gt;'</span> + messages[i].message + <span class=\"string\">'&lt;/li&gt;'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'&lt;ul&gt;'</span> + items.join(<span class=\"string\">''</span>) + <span class=\"string\">'&lt;/ul&gt;'</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"函数\"><a href=\"#函数\" class=\"headerlink\" title=\"函数\"></a>函数</h3><p>1、函数表达式：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 匿名函数表达式</span></div><div class=\"line\"><span class=\"keyword\">var</span> anonymous = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"comment\">// 命名函数表达式</span></div><div class=\"line\"><span class=\"keyword\">var</span> named = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">named</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"comment\">// 立即调用的函数表达式（IIFE）</span></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Welcome to the Internet. Please follow me.'</span>);</div><div class=\"line\">&#125;());</div></pre></td></tr></table></figure>\n<p>2、永远不要在一个非函数代码块（if、while 等）中声明一个函数，浏览器允许你这么做，但它们的解析表现不一致，正确的做法是：在块外定义一个变量，然后将函数赋值给它。</p>\n<p>3、注： ECMA-262 把 块 定义为一组语句。函数声明不是语句。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">if</span> (currentUser) &#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Nope.'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> test;</div><div class=\"line\"><span class=\"keyword\">if</span> (currentUser) &#123;</div><div class=\"line\">  test = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Yup.'</span>);</div><div class=\"line\">  &#125;;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>4、永远不要把参数命名为 arguments。这将取代函数作用域内的 arguments 对象。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">nope</span><span class=\"params\">(name, options, arguments)</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">yup</span><span class=\"params\">(name, options, args)</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"变量\"><a href=\"#变量\" class=\"headerlink\" title=\"变量\"></a>变量</h3><p>1、使用 var 声明每一个变量。<br>这样做的好处是增加新变量将变的更加容易，而且你永远不用再担心调换错 ; 跟 ,。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> items = getItems(),</div><div class=\"line\">    goSportsTeam = <span class=\"literal\">true</span>,</div><div class=\"line\">    dragonball = <span class=\"string\">'z'</span>;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"comment\">// （跟上面的代码比较一下，看看哪里错了）</span></div><div class=\"line\"><span class=\"keyword\">var</span> items = getItems(),</div><div class=\"line\">    goSportsTeam = <span class=\"literal\">true</span>;</div><div class=\"line\">    dragonball = <span class=\"string\">'z'</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> items = getItems();</div><div class=\"line\"><span class=\"keyword\">var</span> goSportsTeam = <span class=\"literal\">true</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> dragonball = <span class=\"string\">'z'</span>;</div></pre></td></tr></table></figure>\n<p>2、最后再声明未赋值的变量。当你需要引用前面的变量赋值时这将变的很有用。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> i, <span class=\"built_in\">len</span>, dragonball,</div><div class=\"line\">    items = getItems(),</div><div class=\"line\">    goSportsTeam = <span class=\"literal\">true</span>;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> i;</div><div class=\"line\"><span class=\"keyword\">var</span> items = getItems();</div><div class=\"line\"><span class=\"keyword\">var</span> dragonball;</div><div class=\"line\"><span class=\"keyword\">var</span> goSportsTeam = <span class=\"literal\">true</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"built_in\">len</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> items = getItems();</div><div class=\"line\"><span class=\"keyword\">var</span> goSportsTeam = <span class=\"literal\">true</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> dragonball;</div><div class=\"line\"><span class=\"keyword\">var</span> length;</div><div class=\"line\"><span class=\"keyword\">var</span> i;</div></pre></td></tr></table></figure>\n<p>3、在作用域顶部声明变量。这将帮你避免变量声明提升相关的问题。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  test();</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'doing stuff..'</span>);</div><div class=\"line\">  <span class=\"comment\">//..other stuff..</span></div><div class=\"line\">  <span class=\"keyword\">var</span> name = getName();</div><div class=\"line\">  <span class=\"keyword\">if</span> (name === <span class=\"string\">'test'</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> name;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> name = getName();</div><div class=\"line\">  test();</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'doing stuff..'</span>);</div><div class=\"line\">  <span class=\"comment\">//..other stuff..</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (name === <span class=\"string\">'test'</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> name;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// bad - 不必要的函数调用</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> name = getName();</div><div class=\"line\">  <span class=\"keyword\">if</span> (!<span class=\"built_in\">arguments</span>.length) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">this</span>.setFirstName(name);</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> name;</div><div class=\"line\">  <span class=\"keyword\">if</span> (!<span class=\"built_in\">arguments</span>.length) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  name = getName();</div><div class=\"line\">  <span class=\"keyword\">this</span>.setFirstName(name);</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"比较运算符-amp-等号\"><a href=\"#比较运算符-amp-等号\" class=\"headerlink\" title=\"比较运算符 &amp; 等号\"></a>比较运算符 &amp; 等号</h3><p>1、优先使用 === 和 !== 而不是 == 和 !=.<br>2、条件表达式例如 if 语句通过抽象方法 ToBoolean 强制计算它们的表达式并且总是遵守下面的规则：<br>对象 被计算为 true<br>Undefined 被计算为 false<br>Null 被计算为 false<br>布尔值 被计算为 布尔的值<br>数字 如果是 +0、-0 或 NaN 被计算为 false，否则为 true<br>字符串 如果是空字符串 ‘’ 被计算为 false，否则为 true</p>\n<figure class=\"highlight jboss-cli\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> <span class=\"params\">([0])</span> &#123;</div><div class=\"line\">  <span class=\"string\">//</span> <span class=\"literal\">true</span></div><div class=\"line\">  <span class=\"string\">//</span> 一个数组就是一个对象，对象被计算为 <span class=\"literal\">true</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>3、使用快捷方式。</p>\n<figure class=\"highlight gcode\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">if</span> <span class=\"comment\">(name !== '')</span> &#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">if</span> <span class=\"comment\">(name)</span> &#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">if</span> <span class=\"comment\">(collection.length &gt; 0)</span> &#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">if</span> <span class=\"comment\">(collection.length)</span> &#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"块\"><a href=\"#块\" class=\"headerlink\" title=\"块\"></a>块</h3><p>1、使用大括号包裹所有的多行代码块。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">if</span> (test)</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">if</span> (test) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">if</span> (test) &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"literal\">false</span>; &#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"注释\"><a href=\"#注释\" class=\"headerlink\" title=\"注释\"></a>注释</h3><p>1、使用 /<em>* … </em>/ 作为多行注释。包含描述、指定所有参数和返回值的类型和值。</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"comment\">// make() returns a new element</span></div><div class=\"line\"><span class=\"comment\">// based on the passed in tag name</span></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"comment\">// @param &#123;String&#125; tag</span></div><div class=\"line\"><span class=\"comment\">// @return &#123;Element&#125; element</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">make</span><span class=\"params\">(tag)</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">  <span class=\"keyword\">return</span> element;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * make() returns a new element</span></div><div class=\"line\"><span class=\"comment\"> * based on the passed in tag name</span></div><div class=\"line\"><span class=\"comment\"> *</span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> &#123;String&#125; tag</span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> &#123;Element&#125; element</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">make</span><span class=\"params\">(tag)</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">  <span class=\"keyword\">return</span> element;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>2、使用 // 作为单行注释。在评论对象上面另起一行使用单行注释。在注释前插入空行。</p>\n<figure class=\"highlight scala\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> active = <span class=\"literal\">true</span>;  <span class=\"comment\">// is current tab</span></div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"comment\">// is current tab</span></div><div class=\"line\"><span class=\"keyword\">var</span> active = <span class=\"literal\">true</span>;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\">function getType() &#123;</div><div class=\"line\">  console.log(<span class=\"symbol\">'fetching</span> <span class=\"class\"><span class=\"keyword\">type</span>...')</span>;</div><div class=\"line\">  <span class=\"comment\">// set the default type to 'no type'</span></div><div class=\"line\">  <span class=\"keyword\">var</span> <span class=\"class\"><span class=\"keyword\">type</span> </span>= <span class=\"keyword\">this</span>.<span class=\"keyword\">type</span> || <span class=\"symbol\">'no</span> <span class=\"class\"><span class=\"keyword\">type</span>'</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"class\"><span class=\"keyword\">type</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\">function getType() &#123;</div><div class=\"line\">  console.log(<span class=\"symbol\">'fetching</span> <span class=\"class\"><span class=\"keyword\">type</span>...')</span>;</div><div class=\"line\">  <span class=\"comment\">// set the default type to 'no type'</span></div><div class=\"line\">  <span class=\"keyword\">var</span> <span class=\"class\"><span class=\"keyword\">type</span> </span>= <span class=\"keyword\">this</span>.<span class=\"keyword\">type</span> || <span class=\"symbol\">'no</span> <span class=\"class\"><span class=\"keyword\">type</span>'</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"class\"><span class=\"keyword\">type</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>3、给注释增加 FIXME 或 TODO 的前缀可以帮助其他开发者快速了解这是一个需要复查的问题，或是给需要实现的功能提供一个解决方式。这将有别于常见的注释，因为它们是可操作的。使用 FIXME – need to figure this out 或者 TODO – need to implement。</p>\n<p>4、使用 // FIXME: 标注问题。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Calculator</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// <span class=\"doctag\">FIXME:</span> shouldn't use a global here</span></div><div class=\"line\">  total = <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>5、使用 // TODO: 标注问题的解决方式。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Calculator</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// <span class=\"doctag\">TODO:</span> total should be configurable by an options param</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.total = <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"空白\"><a href=\"#空白\" class=\"headerlink\" title=\"空白\"></a>空白</h3><p>1、使用 2 个空格作为缩进。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">∙∙∙∙<span class=\"keyword\">var</span> name;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">∙<span class=\"keyword\">var</span> name;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">∙∙<span class=\"keyword\">var</span> name;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>2、在大括号前放一个空格。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'test'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'test'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\">dog.set(<span class=\"string\">'attr'</span>,&#123;</div><div class=\"line\">  age: <span class=\"string\">'1 year'</span>,</div><div class=\"line\">  breed: <span class=\"string\">'Bernese Mountain Dog'</span></div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\">dog.set(<span class=\"string\">'attr'</span>, &#123;</div><div class=\"line\">  age: <span class=\"string\">'1 year'</span>,</div><div class=\"line\">  breed: <span class=\"string\">'Bernese Mountain Dog'</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>3、在控制语句（if、while 等）的小括号前放一个空格。在函数调用及声明中，不在函数的参数列表前加空格。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">if</span>(isJedi) &#123;</div><div class=\"line\">  fight ();</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">if</span> (isJedi) &#123;</div><div class=\"line\">  fight();</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fight</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log (<span class=\"string\">'Swooosh!'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fight</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Swooosh!'</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>4、使用空格把运算符隔开。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> x=y+<span class=\"number\">5</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> x = y + <span class=\"number\">5</span>;</div></pre></td></tr></table></figure>\n<p>5、在文件末尾插入一个空行。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(global)</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;)(<span class=\"keyword\">this</span>);</div></pre></td></tr></table></figure>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(global)</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;)(<span class=\"keyword\">this</span>);↵</div><div class=\"line\">↵</div></pre></td></tr></table></figure>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(global)</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;)(<span class=\"keyword\">this</span>);↵</div></pre></td></tr></table></figure>\n<p>6、在使用长方法链时进行缩进。使用前面的点 . 强调这是方法调用而不是新语句。</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\">$(<span class=\"string\">'#items'</span>).<span class=\"keyword\">find</span>(<span class=\"string\">'.selected'</span>).highlight().end().<span class=\"keyword\">find</span>(<span class=\"string\">'.open'</span>).updateCount();</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\">$(<span class=\"string\">'#items'</span>).</div><div class=\"line\">  <span class=\"keyword\">find</span>(<span class=\"string\">'.selected'</span>).</div><div class=\"line\">    highlight().</div><div class=\"line\">    end().</div><div class=\"line\">  <span class=\"keyword\">find</span>(<span class=\"string\">'.open'</span>).</div><div class=\"line\">    updateCount();</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\">$(<span class=\"string\">'#items'</span>)</div><div class=\"line\">  .<span class=\"keyword\">find</span>(<span class=\"string\">'.selected'</span>)</div><div class=\"line\">    .highlight()</div><div class=\"line\">    .end()</div><div class=\"line\">  .<span class=\"keyword\">find</span>(<span class=\"string\">'.open'</span>)</div><div class=\"line\">    .updateCount();</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\">var leds = stage.selectAll(<span class=\"string\">'.led'</span>).data(data).enter().<span class=\"keyword\">append</span>(<span class=\"string\">'svg:svg'</span>).classed(<span class=\"string\">'led'</span>, <span class=\"keyword\">true</span>)</div><div class=\"line\">    .attr(<span class=\"string\">'width'</span>, (radius + margin) * <span class=\"number\">2</span>).<span class=\"keyword\">append</span>(<span class=\"string\">'svg:g'</span>)</div><div class=\"line\">    .attr(<span class=\"string\">'transform'</span>, <span class=\"string\">'translate('</span> + (radius + margin) + <span class=\"string\">','</span> + (radius + margin) + <span class=\"string\">')'</span>)</div><div class=\"line\">    .<span class=\"keyword\">call</span>(tron.led);</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\">var leds = stage.selectAll(<span class=\"string\">'.led'</span>)</div><div class=\"line\">    .data(data)</div><div class=\"line\">  .enter().<span class=\"keyword\">append</span>(<span class=\"string\">'svg:svg'</span>)</div><div class=\"line\">    .classed(<span class=\"string\">'led'</span>, <span class=\"keyword\">true</span>)</div><div class=\"line\">    .attr(<span class=\"string\">'width'</span>, (radius + margin) * <span class=\"number\">2</span>)</div><div class=\"line\">  .<span class=\"keyword\">append</span>(<span class=\"string\">'svg:g'</span>)</div><div class=\"line\">    .attr(<span class=\"string\">'transform'</span>, <span class=\"string\">'translate('</span> + (radius + margin) + <span class=\"string\">','</span> + (radius + margin) + <span class=\"string\">')'</span>)</div><div class=\"line\">    .<span class=\"keyword\">call</span>(tron.led);</div></pre></td></tr></table></figure>\n<p>7、在块末和新语句前插入空行。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">if</span> (foo) &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> bar;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">return</span> baz;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">if</span> (foo) &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> bar;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">return</span> baz;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</div><div class=\"line\">  foo: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  bar: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"keyword\">return</span> obj;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</div><div class=\"line\">  foo: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  bar: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"keyword\">return</span> obj;</div></pre></td></tr></table></figure>\n<h3 id=\"分号\"><a href=\"#分号\" class=\"headerlink\" title=\"分号\"></a>分号</h3><p>1、使用分号。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> name = <span class=\"string\">'Skywalker'</span></div><div class=\"line\">  <span class=\"keyword\">return</span> name</div><div class=\"line\">&#125;)()</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> name = <span class=\"string\">'Skywalker'</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> name;</div><div class=\"line\">&#125;)();</div><div class=\"line\"><span class=\"comment\">// good (防止函数在两个 IIFE 合并时被当成一个参数</span></div><div class=\"line\">;(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> name = <span class=\"string\">'Skywalker'</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> name;</div><div class=\"line\">&#125;)();</div></pre></td></tr></table></figure>\n<h3 id=\"类型转换\"><a href=\"#类型转换\" class=\"headerlink\" title=\"类型转换\"></a>类型转换</h3><p>1、在语句开始时执行类型转换。<br>2、字符串：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//  =&gt; this.reviewScore = 9;</span></div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> totalScore = <span class=\"keyword\">this</span>.reviewScore + <span class=\"string\">''</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> totalScore = <span class=\"string\">''</span> + <span class=\"keyword\">this</span>.reviewScore;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> totalScore = <span class=\"string\">''</span> + <span class=\"keyword\">this</span>.reviewScore + <span class=\"string\">' total score'</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> totalScore = <span class=\"keyword\">this</span>.reviewScore + <span class=\"string\">' total score'</span>;</div></pre></td></tr></table></figure>\n<p>3、使用 parseInt 转换数字时总是带上类型转换的基数。</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> inputValue = <span class=\"string\">'4'</span>;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"keyword\">val</span> = new Number(inputValue);</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"keyword\">val</span> = +inputValue;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"keyword\">val</span> = inputValue &gt;&gt; <span class=\"number\">0</span>;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"keyword\">val</span> = parseInt(inputValue);</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"keyword\">val</span> = Number(inputValue);</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"keyword\">val</span> = parseInt(inputValue, <span class=\"number\">10</span>);</div></pre></td></tr></table></figure>\n<p>4、如果因为某些原因 parseInt 成为你所做的事的瓶颈而需要使用位操作解决性能问题时，留个注释说清楚原因和你的目的。</p>\n<figure class=\"highlight pony\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * parseInt was the reason my code was slow.</span></div><div class=\"line\"><span class=\"comment\"> * Bitshifting the String to coerce it to a</span></div><div class=\"line\"><span class=\"comment\"> * Number made it a lot faster.</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"meta\">val</span> = inputValue &gt;&gt; <span class=\"number\">0</span>;</div></pre></td></tr></table></figure>\n<p>5、布尔:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> age = <span class=\"number\">0</span>;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> hasAge = <span class=\"keyword\">new</span> <span class=\"built_in\">Boolean</span>(age);</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> hasAge = <span class=\"built_in\">Boolean</span>(age);</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> hasAge = !!age;</div></pre></td></tr></table></figure>\n<h3 id=\"命名规则\"><a href=\"#命名规则\" class=\"headerlink\" title=\"命名规则\"></a>命名规则</h3><p>1、避免单字母命名。命名应具备描述性。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">q</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">query</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ..stuff..</span></div></pre></td></tr></table></figure>\n<p>2、使用驼峰式命名对象、函数和实例。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> OBJEcttsssss = &#123;&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> this_is_my_object = &#123;&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> o = &#123;&#125;;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">c</span><span class=\"params\">()</span> </span>&#123;&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> thisIsMyObject = &#123;&#125;;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">thisIsMyFunction</span><span class=\"params\">()</span> </span>&#123;&#125;</div></pre></td></tr></table></figure>\n<p>3、使用帕斯卡式命名构造函数或类。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">user</span><span class=\"params\">(options)</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.name = options.name;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> bad = <span class=\"keyword\">new</span> user(&#123;</div><div class=\"line\">  name: <span class=\"string\">'nope'</span></div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">User</span><span class=\"params\">(options)</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.name = options.name;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> good = <span class=\"keyword\">new</span> User(&#123;</div><div class=\"line\">  name: <span class=\"string\">'yup'</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>4、不要使用下划线前/后缀。<br>为什么？JavaScript 并没有私有属性或私有方法的概念。虽然使用下划线是表示「私有」的一种共识，但实际上这些属性是完全公开的，它本身就是你公共接口的一部分。这种习惯或许会导致开发者错误的认为改动它不会造成破坏或者不需要去测试。长话短说：如果你想要某处为「私有」，它必须不能是显式提出的。</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">this</span>.__firstName__ = <span class=\"string\">'Panda'</span>;</div><div class=\"line\"><span class=\"keyword\">this</span>.firstName_ = <span class=\"string\">'Panda'</span>;</div><div class=\"line\"><span class=\"keyword\">this</span>._firstName = <span class=\"string\">'Panda'</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">this</span>.firstName = <span class=\"string\">'Panda'</span>;</div></pre></td></tr></table></figure>\n<p>5、不要保存 this 的引用。使用 Function#bind。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(self);</div><div class=\"line\">  &#125;;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(that);</div><div class=\"line\">  &#125;;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> _this = <span class=\"keyword\">this</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(_this);</div><div class=\"line\">  &#125;;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>);</div><div class=\"line\">  &#125;.bind(<span class=\"keyword\">this</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>6、如果你的文件导出一个类，你的文件名应该与类名完全相同。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// file contents</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CheckBox</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">module</span>.exports = CheckBox;</div><div class=\"line\"><span class=\"comment\">// in some other file</span></div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> CheckBox = <span class=\"built_in\">require</span>(<span class=\"string\">'./checkBox'</span>);</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> CheckBox = <span class=\"built_in\">require</span>(<span class=\"string\">'./check_box'</span>);</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> CheckBox = <span class=\"built_in\">require</span>(<span class=\"string\">'./CheckBox'</span>);</div></pre></td></tr></table></figure>\n<h3 id=\"模块\"><a href=\"#模块\" class=\"headerlink\" title=\"模块\"></a>模块</h3><p>1、模块应该以 ! 开始。这样确保了当一个不好的模块忘记包含最后的分号时，在合并代码到生产环境后不会产生错误<br>2、文件应该以驼峰式命名，并放在同名的文件夹里，且与导出的名字一致。<br>3、增加一个名为 noConflict() 的方法来设置导出的模块为前一个版本并返回它。<br>4、永远在模块顶部声明 ‘use strict’;。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// fancyInput/fancyInput.js</span></div><div class=\"line\">!<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">global</span>) </span>&#123;</div><div class=\"line\"><span class=\"meta\">  'use strict'</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> previousFancyInput = global.FancyInput;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">FancyInput</span>(<span class=\"params\">options</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.options = options || &#123;&#125;;</div><div class=\"line\">  &#125;</div><div class=\"line\">  FancyInput.noConflict = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">noConflict</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    global.FancyInput = previousFancyInput;</div><div class=\"line\">    <span class=\"keyword\">return</span> FancyInput;</div><div class=\"line\">  &#125;;</div><div class=\"line\">  global.FancyInput = FancyInput;</div><div class=\"line\">&#125;(<span class=\"keyword\">this</span>);</div></pre></td></tr></table></figure>\n<p>参考链接：<a href=\"https://github.com/sivan/javascript-style-guide/blob/master/es5/README.md\" target=\"_blank\" rel=\"external\">https://github.com/sivan/javascript-style-guide/blob/master/es5/README.md</a></p>\n","site":{"data":{}},"excerpt":"<p>本文主要记录一些javascript优秀的写法，自己又老是不习惯使用的，方便日后养成习惯。</p>","more":"<h2 id=\"JavaScript-guide-es5\"><a href=\"#JavaScript-guide-es5\" class=\"headerlink\" title=\"JavaScript guide es5\"></a>JavaScript guide es5</h2><h3 id=\"数组\"><a href=\"#数组\" class=\"headerlink\" title=\"数组\"></a>数组</h3><p>1、当你需要拷贝数组时，使用 Array#slice。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"built_in\">len</span> = items.length;</div><div class=\"line\"><span class=\"keyword\">var</span> itemsCopy = [];</div><div class=\"line\"><span class=\"keyword\">var</span> i;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">for</span> (i = <span class=\"number\">0</span>; i &lt; <span class=\"built_in\">len</span>; i++) &#123;</div><div class=\"line\">  itemsCopy[i] = items[i];</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\">itemsCopy = items.slice();</div></pre></td></tr></table></figure>\n<p>2、使用 Array#slice 将类数组对象转换成数组。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">trigger</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> args = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>);</div><div class=\"line\">  ...</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"字符串\"><a href=\"#字符串\" class=\"headerlink\" title=\"字符串\"></a>字符串</h3><p>1、使用单引号 <code>&#39;&#39;</code> 包裹字符串。</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">\"Bob Parr\"</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'Bob Parr'</span>;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> fullName = <span class=\"string\">\"Bob \"</span> + <span class=\"keyword\">this</span>.lastName;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> fullName = <span class=\"string\">'Bob '</span> + <span class=\"keyword\">this</span>.lastName;</div></pre></td></tr></table></figure>\n<p>2、超过 100 个字符的字符串应该使用连接符写成多行。<br>3、注：若过度使用，通过连接符连接的长字符串可能会影响性能。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><div class=\"line\">// bad</div><div class=\"line\">var errorMessage = 'This is a super long error that was thrown because of Batman. When you <span class=\"keyword\">stop</span> <span class=\"keyword\">to</span> think about how Batman had anything <span class=\"keyword\">to</span> <span class=\"keyword\">do</span> <span class=\"keyword\">with</span> this, you would <span class=\"keyword\">get</span> nowhere fast.<span class=\"string\">';</span></div><div class=\"line\"><span class=\"string\">// bad</span></div><div class=\"line\"><span class=\"string\">var errorMessage = '</span>This <span class=\"keyword\">is</span> a super <span class=\"keyword\">long</span> <span class=\"keyword\">error</span> that was thrown because \\</div><div class=\"line\"><span class=\"keyword\">of</span> Batman. <span class=\"keyword\">When</span> you <span class=\"keyword\">stop</span> <span class=\"keyword\">to</span> think about how Batman had anything <span class=\"keyword\">to</span> <span class=\"keyword\">do</span> \\</div><div class=\"line\"><span class=\"keyword\">with</span> this, you would <span class=\"keyword\">get</span> nowhere \\</div><div class=\"line\">fast.<span class=\"string\">';</span></div><div class=\"line\"><span class=\"string\">// good</span></div><div class=\"line\"><span class=\"string\">var errorMessage = '</span>This <span class=\"keyword\">is</span> a super <span class=\"keyword\">long</span> <span class=\"keyword\">error</span> that was thrown because <span class=\"string\">' +</span></div><div class=\"line\"><span class=\"string\">  '</span><span class=\"keyword\">of</span> Batman. <span class=\"keyword\">When</span> you <span class=\"keyword\">stop</span> <span class=\"keyword\">to</span> think about how Batman had anything <span class=\"keyword\">to</span> <span class=\"keyword\">do</span> <span class=\"string\">' +</span></div><div class=\"line\"><span class=\"string\">  '</span><span class=\"keyword\">with</span> this, you would <span class=\"keyword\">get</span> nowhere fast.<span class=\"string\">';</span></div></pre></td></tr></table></figure>\n<p>4、程序化生成的字符串使用 Array#join 连接而不是使用连接符。尤其是 IE 下：</p>\n<figure class=\"highlight scilab\"><table><tr><td class=\"code\"><pre><div class=\"line\">var items;</div><div class=\"line\">var messages;</div><div class=\"line\">var <span class=\"built_in\">length</span>;</div><div class=\"line\">var i;</div><div class=\"line\">messages = [&#123;</div><div class=\"line\">  state: <span class=\"string\">'success'</span>,</div><div class=\"line\">  message: <span class=\"string\">'This one worked.'</span></div><div class=\"line\">&#125;, &#123;</div><div class=\"line\">  state: <span class=\"string\">'success'</span>,</div><div class=\"line\">  message: <span class=\"string\">'This one worked as well.'</span></div><div class=\"line\">&#125;, &#123;</div><div class=\"line\">  state: <span class=\"string\">'error'</span>,</div><div class=\"line\">  message: <span class=\"string\">'This one did not work.'</span></div><div class=\"line\">&#125;];</div><div class=\"line\"><span class=\"built_in\">length</span> = messages.<span class=\"built_in\">length</span>;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">inbox</span><span class=\"params\">(messages)</span> &#123;</span></div><div class=\"line\">  items = <span class=\"string\">'&lt;ul&gt;'</span>;</div><div class=\"line\">  <span class=\"keyword\">for</span> (i = <span class=\"number\">0</span>; i &lt; <span class=\"built_in\">length</span>; i++) &#123;</div><div class=\"line\">    items += <span class=\"string\">'&lt;li&gt;'</span> + messages[i].message + <span class=\"string\">'&lt;/li&gt;'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> items + <span class=\"string\">'&lt;/ul&gt;'</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">inbox</span><span class=\"params\">(messages)</span> &#123;</span></div><div class=\"line\">  items = [];</div><div class=\"line\">  <span class=\"keyword\">for</span> (i = <span class=\"number\">0</span>; i &lt; <span class=\"built_in\">length</span>; i++) &#123;</div><div class=\"line\">    <span class=\"comment\">// use direct assignment in this case because we're micro-optimizing.</span></div><div class=\"line\">    items[i] = <span class=\"string\">'&lt;li&gt;'</span> + messages[i].message + <span class=\"string\">'&lt;/li&gt;'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'&lt;ul&gt;'</span> + items.join(<span class=\"string\">''</span>) + <span class=\"string\">'&lt;/ul&gt;'</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"函数\"><a href=\"#函数\" class=\"headerlink\" title=\"函数\"></a>函数</h3><p>1、函数表达式：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 匿名函数表达式</span></div><div class=\"line\"><span class=\"keyword\">var</span> anonymous = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"comment\">// 命名函数表达式</span></div><div class=\"line\"><span class=\"keyword\">var</span> named = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">named</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"comment\">// 立即调用的函数表达式（IIFE）</span></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Welcome to the Internet. Please follow me.'</span>);</div><div class=\"line\">&#125;());</div></pre></td></tr></table></figure>\n<p>2、永远不要在一个非函数代码块（if、while 等）中声明一个函数，浏览器允许你这么做，但它们的解析表现不一致，正确的做法是：在块外定义一个变量，然后将函数赋值给它。</p>\n<p>3、注： ECMA-262 把 块 定义为一组语句。函数声明不是语句。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">if</span> (currentUser) &#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Nope.'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> test;</div><div class=\"line\"><span class=\"keyword\">if</span> (currentUser) &#123;</div><div class=\"line\">  test = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Yup.'</span>);</div><div class=\"line\">  &#125;;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>4、永远不要把参数命名为 arguments。这将取代函数作用域内的 arguments 对象。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">nope</span><span class=\"params\">(name, options, arguments)</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">yup</span><span class=\"params\">(name, options, args)</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"变量\"><a href=\"#变量\" class=\"headerlink\" title=\"变量\"></a>变量</h3><p>1、使用 var 声明每一个变量。<br>这样做的好处是增加新变量将变的更加容易，而且你永远不用再担心调换错 ; 跟 ,。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> items = getItems(),</div><div class=\"line\">    goSportsTeam = <span class=\"literal\">true</span>,</div><div class=\"line\">    dragonball = <span class=\"string\">'z'</span>;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"comment\">// （跟上面的代码比较一下，看看哪里错了）</span></div><div class=\"line\"><span class=\"keyword\">var</span> items = getItems(),</div><div class=\"line\">    goSportsTeam = <span class=\"literal\">true</span>;</div><div class=\"line\">    dragonball = <span class=\"string\">'z'</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> items = getItems();</div><div class=\"line\"><span class=\"keyword\">var</span> goSportsTeam = <span class=\"literal\">true</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> dragonball = <span class=\"string\">'z'</span>;</div></pre></td></tr></table></figure>\n<p>2、最后再声明未赋值的变量。当你需要引用前面的变量赋值时这将变的很有用。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> i, <span class=\"built_in\">len</span>, dragonball,</div><div class=\"line\">    items = getItems(),</div><div class=\"line\">    goSportsTeam = <span class=\"literal\">true</span>;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> i;</div><div class=\"line\"><span class=\"keyword\">var</span> items = getItems();</div><div class=\"line\"><span class=\"keyword\">var</span> dragonball;</div><div class=\"line\"><span class=\"keyword\">var</span> goSportsTeam = <span class=\"literal\">true</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"built_in\">len</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> items = getItems();</div><div class=\"line\"><span class=\"keyword\">var</span> goSportsTeam = <span class=\"literal\">true</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> dragonball;</div><div class=\"line\"><span class=\"keyword\">var</span> length;</div><div class=\"line\"><span class=\"keyword\">var</span> i;</div></pre></td></tr></table></figure>\n<p>3、在作用域顶部声明变量。这将帮你避免变量声明提升相关的问题。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  test();</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'doing stuff..'</span>);</div><div class=\"line\">  <span class=\"comment\">//..other stuff..</span></div><div class=\"line\">  <span class=\"keyword\">var</span> name = getName();</div><div class=\"line\">  <span class=\"keyword\">if</span> (name === <span class=\"string\">'test'</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> name;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> name = getName();</div><div class=\"line\">  test();</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'doing stuff..'</span>);</div><div class=\"line\">  <span class=\"comment\">//..other stuff..</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (name === <span class=\"string\">'test'</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> name;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// bad - 不必要的函数调用</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> name = getName();</div><div class=\"line\">  <span class=\"keyword\">if</span> (!<span class=\"built_in\">arguments</span>.length) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">this</span>.setFirstName(name);</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> name;</div><div class=\"line\">  <span class=\"keyword\">if</span> (!<span class=\"built_in\">arguments</span>.length) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  name = getName();</div><div class=\"line\">  <span class=\"keyword\">this</span>.setFirstName(name);</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"比较运算符-amp-等号\"><a href=\"#比较运算符-amp-等号\" class=\"headerlink\" title=\"比较运算符 &amp; 等号\"></a>比较运算符 &amp; 等号</h3><p>1、优先使用 === 和 !== 而不是 == 和 !=.<br>2、条件表达式例如 if 语句通过抽象方法 ToBoolean 强制计算它们的表达式并且总是遵守下面的规则：<br>对象 被计算为 true<br>Undefined 被计算为 false<br>Null 被计算为 false<br>布尔值 被计算为 布尔的值<br>数字 如果是 +0、-0 或 NaN 被计算为 false，否则为 true<br>字符串 如果是空字符串 ‘’ 被计算为 false，否则为 true</p>\n<figure class=\"highlight jboss-cli\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> <span class=\"params\">([0])</span> &#123;</div><div class=\"line\">  <span class=\"string\">//</span> <span class=\"literal\">true</span></div><div class=\"line\">  <span class=\"string\">//</span> 一个数组就是一个对象，对象被计算为 <span class=\"literal\">true</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>3、使用快捷方式。</p>\n<figure class=\"highlight gcode\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">if</span> <span class=\"comment\">(name !== '')</span> &#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">if</span> <span class=\"comment\">(name)</span> &#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">if</span> <span class=\"comment\">(collection.length &gt; 0)</span> &#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">if</span> <span class=\"comment\">(collection.length)</span> &#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"块\"><a href=\"#块\" class=\"headerlink\" title=\"块\"></a>块</h3><p>1、使用大括号包裹所有的多行代码块。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">if</span> (test)</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">if</span> (test) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">if</span> (test) &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"literal\">false</span>; &#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"注释\"><a href=\"#注释\" class=\"headerlink\" title=\"注释\"></a>注释</h3><p>1、使用 /<em>* … </em>/ 作为多行注释。包含描述、指定所有参数和返回值的类型和值。</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"comment\">// make() returns a new element</span></div><div class=\"line\"><span class=\"comment\">// based on the passed in tag name</span></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"comment\">// @param &#123;String&#125; tag</span></div><div class=\"line\"><span class=\"comment\">// @return &#123;Element&#125; element</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">make</span><span class=\"params\">(tag)</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">  <span class=\"keyword\">return</span> element;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * make() returns a new element</span></div><div class=\"line\"><span class=\"comment\"> * based on the passed in tag name</span></div><div class=\"line\"><span class=\"comment\"> *</span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> &#123;String&#125; tag</span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> &#123;Element&#125; element</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">make</span><span class=\"params\">(tag)</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">  <span class=\"keyword\">return</span> element;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>2、使用 // 作为单行注释。在评论对象上面另起一行使用单行注释。在注释前插入空行。</p>\n<figure class=\"highlight scala\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> active = <span class=\"literal\">true</span>;  <span class=\"comment\">// is current tab</span></div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"comment\">// is current tab</span></div><div class=\"line\"><span class=\"keyword\">var</span> active = <span class=\"literal\">true</span>;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\">function getType() &#123;</div><div class=\"line\">  console.log(<span class=\"symbol\">'fetching</span> <span class=\"class\"><span class=\"keyword\">type</span>...')</span>;</div><div class=\"line\">  <span class=\"comment\">// set the default type to 'no type'</span></div><div class=\"line\">  <span class=\"keyword\">var</span> <span class=\"class\"><span class=\"keyword\">type</span> </span>= <span class=\"keyword\">this</span>.<span class=\"keyword\">type</span> || <span class=\"symbol\">'no</span> <span class=\"class\"><span class=\"keyword\">type</span>'</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"class\"><span class=\"keyword\">type</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\">function getType() &#123;</div><div class=\"line\">  console.log(<span class=\"symbol\">'fetching</span> <span class=\"class\"><span class=\"keyword\">type</span>...')</span>;</div><div class=\"line\">  <span class=\"comment\">// set the default type to 'no type'</span></div><div class=\"line\">  <span class=\"keyword\">var</span> <span class=\"class\"><span class=\"keyword\">type</span> </span>= <span class=\"keyword\">this</span>.<span class=\"keyword\">type</span> || <span class=\"symbol\">'no</span> <span class=\"class\"><span class=\"keyword\">type</span>'</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"class\"><span class=\"keyword\">type</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>3、给注释增加 FIXME 或 TODO 的前缀可以帮助其他开发者快速了解这是一个需要复查的问题，或是给需要实现的功能提供一个解决方式。这将有别于常见的注释，因为它们是可操作的。使用 FIXME – need to figure this out 或者 TODO – need to implement。</p>\n<p>4、使用 // FIXME: 标注问题。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Calculator</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// <span class=\"doctag\">FIXME:</span> shouldn't use a global here</span></div><div class=\"line\">  total = <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>5、使用 // TODO: 标注问题的解决方式。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Calculator</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// <span class=\"doctag\">TODO:</span> total should be configurable by an options param</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.total = <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"空白\"><a href=\"#空白\" class=\"headerlink\" title=\"空白\"></a>空白</h3><p>1、使用 2 个空格作为缩进。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">∙∙∙∙<span class=\"keyword\">var</span> name;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">∙<span class=\"keyword\">var</span> name;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">∙∙<span class=\"keyword\">var</span> name;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>2、在大括号前放一个空格。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'test'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'test'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\">dog.set(<span class=\"string\">'attr'</span>,&#123;</div><div class=\"line\">  age: <span class=\"string\">'1 year'</span>,</div><div class=\"line\">  breed: <span class=\"string\">'Bernese Mountain Dog'</span></div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\">dog.set(<span class=\"string\">'attr'</span>, &#123;</div><div class=\"line\">  age: <span class=\"string\">'1 year'</span>,</div><div class=\"line\">  breed: <span class=\"string\">'Bernese Mountain Dog'</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>3、在控制语句（if、while 等）的小括号前放一个空格。在函数调用及声明中，不在函数的参数列表前加空格。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">if</span>(isJedi) &#123;</div><div class=\"line\">  fight ();</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">if</span> (isJedi) &#123;</div><div class=\"line\">  fight();</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fight</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log (<span class=\"string\">'Swooosh!'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fight</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Swooosh!'</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>4、使用空格把运算符隔开。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> x=y+<span class=\"number\">5</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> x = y + <span class=\"number\">5</span>;</div></pre></td></tr></table></figure>\n<p>5、在文件末尾插入一个空行。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(global)</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;)(<span class=\"keyword\">this</span>);</div></pre></td></tr></table></figure>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(global)</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;)(<span class=\"keyword\">this</span>);↵</div><div class=\"line\">↵</div></pre></td></tr></table></figure>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(global)</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;)(<span class=\"keyword\">this</span>);↵</div></pre></td></tr></table></figure>\n<p>6、在使用长方法链时进行缩进。使用前面的点 . 强调这是方法调用而不是新语句。</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\">$(<span class=\"string\">'#items'</span>).<span class=\"keyword\">find</span>(<span class=\"string\">'.selected'</span>).highlight().end().<span class=\"keyword\">find</span>(<span class=\"string\">'.open'</span>).updateCount();</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\">$(<span class=\"string\">'#items'</span>).</div><div class=\"line\">  <span class=\"keyword\">find</span>(<span class=\"string\">'.selected'</span>).</div><div class=\"line\">    highlight().</div><div class=\"line\">    end().</div><div class=\"line\">  <span class=\"keyword\">find</span>(<span class=\"string\">'.open'</span>).</div><div class=\"line\">    updateCount();</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\">$(<span class=\"string\">'#items'</span>)</div><div class=\"line\">  .<span class=\"keyword\">find</span>(<span class=\"string\">'.selected'</span>)</div><div class=\"line\">    .highlight()</div><div class=\"line\">    .end()</div><div class=\"line\">  .<span class=\"keyword\">find</span>(<span class=\"string\">'.open'</span>)</div><div class=\"line\">    .updateCount();</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\">var leds = stage.selectAll(<span class=\"string\">'.led'</span>).data(data).enter().<span class=\"keyword\">append</span>(<span class=\"string\">'svg:svg'</span>).classed(<span class=\"string\">'led'</span>, <span class=\"keyword\">true</span>)</div><div class=\"line\">    .attr(<span class=\"string\">'width'</span>, (radius + margin) * <span class=\"number\">2</span>).<span class=\"keyword\">append</span>(<span class=\"string\">'svg:g'</span>)</div><div class=\"line\">    .attr(<span class=\"string\">'transform'</span>, <span class=\"string\">'translate('</span> + (radius + margin) + <span class=\"string\">','</span> + (radius + margin) + <span class=\"string\">')'</span>)</div><div class=\"line\">    .<span class=\"keyword\">call</span>(tron.led);</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\">var leds = stage.selectAll(<span class=\"string\">'.led'</span>)</div><div class=\"line\">    .data(data)</div><div class=\"line\">  .enter().<span class=\"keyword\">append</span>(<span class=\"string\">'svg:svg'</span>)</div><div class=\"line\">    .classed(<span class=\"string\">'led'</span>, <span class=\"keyword\">true</span>)</div><div class=\"line\">    .attr(<span class=\"string\">'width'</span>, (radius + margin) * <span class=\"number\">2</span>)</div><div class=\"line\">  .<span class=\"keyword\">append</span>(<span class=\"string\">'svg:g'</span>)</div><div class=\"line\">    .attr(<span class=\"string\">'transform'</span>, <span class=\"string\">'translate('</span> + (radius + margin) + <span class=\"string\">','</span> + (radius + margin) + <span class=\"string\">')'</span>)</div><div class=\"line\">    .<span class=\"keyword\">call</span>(tron.led);</div></pre></td></tr></table></figure>\n<p>7、在块末和新语句前插入空行。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">if</span> (foo) &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> bar;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">return</span> baz;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">if</span> (foo) &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> bar;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">return</span> baz;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</div><div class=\"line\">  foo: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  bar: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"keyword\">return</span> obj;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</div><div class=\"line\">  foo: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  bar: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"keyword\">return</span> obj;</div></pre></td></tr></table></figure>\n<h3 id=\"分号\"><a href=\"#分号\" class=\"headerlink\" title=\"分号\"></a>分号</h3><p>1、使用分号。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> name = <span class=\"string\">'Skywalker'</span></div><div class=\"line\">  <span class=\"keyword\">return</span> name</div><div class=\"line\">&#125;)()</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> name = <span class=\"string\">'Skywalker'</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> name;</div><div class=\"line\">&#125;)();</div><div class=\"line\"><span class=\"comment\">// good (防止函数在两个 IIFE 合并时被当成一个参数</span></div><div class=\"line\">;(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> name = <span class=\"string\">'Skywalker'</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> name;</div><div class=\"line\">&#125;)();</div></pre></td></tr></table></figure>\n<h3 id=\"类型转换\"><a href=\"#类型转换\" class=\"headerlink\" title=\"类型转换\"></a>类型转换</h3><p>1、在语句开始时执行类型转换。<br>2、字符串：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//  =&gt; this.reviewScore = 9;</span></div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> totalScore = <span class=\"keyword\">this</span>.reviewScore + <span class=\"string\">''</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> totalScore = <span class=\"string\">''</span> + <span class=\"keyword\">this</span>.reviewScore;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> totalScore = <span class=\"string\">''</span> + <span class=\"keyword\">this</span>.reviewScore + <span class=\"string\">' total score'</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> totalScore = <span class=\"keyword\">this</span>.reviewScore + <span class=\"string\">' total score'</span>;</div></pre></td></tr></table></figure>\n<p>3、使用 parseInt 转换数字时总是带上类型转换的基数。</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> inputValue = <span class=\"string\">'4'</span>;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"keyword\">val</span> = new Number(inputValue);</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"keyword\">val</span> = +inputValue;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"keyword\">val</span> = inputValue &gt;&gt; <span class=\"number\">0</span>;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"keyword\">val</span> = parseInt(inputValue);</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"keyword\">val</span> = Number(inputValue);</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"keyword\">val</span> = parseInt(inputValue, <span class=\"number\">10</span>);</div></pre></td></tr></table></figure>\n<p>4、如果因为某些原因 parseInt 成为你所做的事的瓶颈而需要使用位操作解决性能问题时，留个注释说清楚原因和你的目的。</p>\n<figure class=\"highlight pony\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * parseInt was the reason my code was slow.</span></div><div class=\"line\"><span class=\"comment\"> * Bitshifting the String to coerce it to a</span></div><div class=\"line\"><span class=\"comment\"> * Number made it a lot faster.</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"meta\">val</span> = inputValue &gt;&gt; <span class=\"number\">0</span>;</div></pre></td></tr></table></figure>\n<p>5、布尔:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> age = <span class=\"number\">0</span>;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> hasAge = <span class=\"keyword\">new</span> <span class=\"built_in\">Boolean</span>(age);</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> hasAge = <span class=\"built_in\">Boolean</span>(age);</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> hasAge = !!age;</div></pre></td></tr></table></figure>\n<h3 id=\"命名规则\"><a href=\"#命名规则\" class=\"headerlink\" title=\"命名规则\"></a>命名规则</h3><p>1、避免单字母命名。命名应具备描述性。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">q</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...stuff...</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">query</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ..stuff..</span></div></pre></td></tr></table></figure>\n<p>2、使用驼峰式命名对象、函数和实例。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> OBJEcttsssss = &#123;&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> this_is_my_object = &#123;&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> o = &#123;&#125;;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">c</span><span class=\"params\">()</span> </span>&#123;&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> thisIsMyObject = &#123;&#125;;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">thisIsMyFunction</span><span class=\"params\">()</span> </span>&#123;&#125;</div></pre></td></tr></table></figure>\n<p>3、使用帕斯卡式命名构造函数或类。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">user</span><span class=\"params\">(options)</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.name = options.name;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> bad = <span class=\"keyword\">new</span> user(&#123;</div><div class=\"line\">  name: <span class=\"string\">'nope'</span></div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">User</span><span class=\"params\">(options)</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.name = options.name;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> good = <span class=\"keyword\">new</span> User(&#123;</div><div class=\"line\">  name: <span class=\"string\">'yup'</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>4、不要使用下划线前/后缀。<br>为什么？JavaScript 并没有私有属性或私有方法的概念。虽然使用下划线是表示「私有」的一种共识，但实际上这些属性是完全公开的，它本身就是你公共接口的一部分。这种习惯或许会导致开发者错误的认为改动它不会造成破坏或者不需要去测试。长话短说：如果你想要某处为「私有」，它必须不能是显式提出的。</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">this</span>.__firstName__ = <span class=\"string\">'Panda'</span>;</div><div class=\"line\"><span class=\"keyword\">this</span>.firstName_ = <span class=\"string\">'Panda'</span>;</div><div class=\"line\"><span class=\"keyword\">this</span>._firstName = <span class=\"string\">'Panda'</span>;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">this</span>.firstName = <span class=\"string\">'Panda'</span>;</div></pre></td></tr></table></figure>\n<p>5、不要保存 this 的引用。使用 Function#bind。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(self);</div><div class=\"line\">  &#125;;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(that);</div><div class=\"line\">  &#125;;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> _this = <span class=\"keyword\">this</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(_this);</div><div class=\"line\">  &#125;;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>);</div><div class=\"line\">  &#125;.bind(<span class=\"keyword\">this</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>6、如果你的文件导出一个类，你的文件名应该与类名完全相同。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// file contents</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CheckBox</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">module</span>.exports = CheckBox;</div><div class=\"line\"><span class=\"comment\">// in some other file</span></div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> CheckBox = <span class=\"built_in\">require</span>(<span class=\"string\">'./checkBox'</span>);</div><div class=\"line\"><span class=\"comment\">// bad</span></div><div class=\"line\"><span class=\"keyword\">var</span> CheckBox = <span class=\"built_in\">require</span>(<span class=\"string\">'./check_box'</span>);</div><div class=\"line\"><span class=\"comment\">// good</span></div><div class=\"line\"><span class=\"keyword\">var</span> CheckBox = <span class=\"built_in\">require</span>(<span class=\"string\">'./CheckBox'</span>);</div></pre></td></tr></table></figure>\n<h3 id=\"模块\"><a href=\"#模块\" class=\"headerlink\" title=\"模块\"></a>模块</h3><p>1、模块应该以 ! 开始。这样确保了当一个不好的模块忘记包含最后的分号时，在合并代码到生产环境后不会产生错误<br>2、文件应该以驼峰式命名，并放在同名的文件夹里，且与导出的名字一致。<br>3、增加一个名为 noConflict() 的方法来设置导出的模块为前一个版本并返回它。<br>4、永远在模块顶部声明 ‘use strict’;。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// fancyInput/fancyInput.js</span></div><div class=\"line\">!<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">global</span>) </span>&#123;</div><div class=\"line\"><span class=\"meta\">  'use strict'</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> previousFancyInput = global.FancyInput;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">FancyInput</span>(<span class=\"params\">options</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.options = options || &#123;&#125;;</div><div class=\"line\">  &#125;</div><div class=\"line\">  FancyInput.noConflict = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">noConflict</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    global.FancyInput = previousFancyInput;</div><div class=\"line\">    <span class=\"keyword\">return</span> FancyInput;</div><div class=\"line\">  &#125;;</div><div class=\"line\">  global.FancyInput = FancyInput;</div><div class=\"line\">&#125;(<span class=\"keyword\">this</span>);</div></pre></td></tr></table></figure>\n<p>参考链接：<a href=\"https://github.com/sivan/javascript-style-guide/blob/master/es5/README.md\" target=\"_blank\" rel=\"external\">https://github.com/sivan/javascript-style-guide/blob/master/es5/README.md</a></p>"},{"title":"js递归","date":"2018-02-27T00:00:00.000Z","_content":"\n程序调用自身的编程技巧称为递归。递归思想也是软件开发中非常重要的基本思想之一。当然这种思想是要有，但是确实递归会影响效率。\n\n<!--more-->\n\n### 定义\n我们称自己调用自己就叫做递归。\n### 阶乘\n从小学就接触的阶乘就可以用递归实现。\n示例：\n\n```\nfunction factorial(n) {\n    if (n == 1) return n;\n    return n * factorial(n - 1)\n}\nconsole.log(factorial(4)) // 4 * 3 * 2 * 1 = 24\n```\n### 斐波那契数列\n曾经去面试时，就有这样一道题目，说是写出一个函数实现如下数列：1, 1, 2, 3, 5, 8, 13, 21, 34 … 。当时自以为很机智地一直在找规律，回来后跟别人说起，结果被深深的鄙视.\n\n递归实现斐波那契数列：\n\n```\nfunction fibonacci(n){\n    return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);\n}\nconsole.log(fibonacci(8)) // 1 1 2 3 5 8 13 21\n```\n### 递归条件\n从这两个例子中，我们可以看出：\n\n构成递归需具备边界条件、递归前进段和递归返回段，当边界条件不满足时，递归前进，当边界条件满足时，递归返回。阶乘中的 n == 1 和 斐波那契数列中的 n < 2 都是边界条件。递归不能无限制地调用本身，边界条件就是递归的出口。\n\n### 递归优化\n我们知道当执行一个函数的时候，就会创建一个执行上下文，并且压入执行上下文栈，当函数执行完毕的时候，就会将函数的执行上下文从栈中弹出。我们看上面阶乘的列子会发现JavaScript会不停的创建执行上下文压入执行上下文栈，对于内存而言，维护这么多的执行上下文是一笔不小的开销。\n\n接下来我们试试用尾调用来优化它。\n### 尾调用\n尾调用，是指函数内部的最后一个动作是函数调用。该调用的返回值，直接返回给函数。\n举个例子：\n\n```\n// 尾调用\nfunction a(x){\n    return b(x);\n}\n```\n然而\n\n```\n// 非尾调用\nfunction a(x){\n    return b(x) + 1;\n}\n```\n因为 b(x) 的返回值还需要跟 1 进行计算后，a(x)才会返回值。\n\n也就说尾调用函数执行时，虽然也调用了一个函数，但是因为原来的函数执行完毕，执行上下文会被弹出，执行上下文栈中相当于只多压入了一个执行上下文。然而非尾调用函数，就会创建多个执行上下文压入执行上下文栈。\n\n接下来我们用尾调用来优化递归：\n\n```\nfunction factorial(n, res) {\n    if (n == 1) return res;\n    return factorial(n - 1, n * res)\n}\nconsole.log(factorial(4, 1)) // 24\n```\n参考链接：https://segmentfault.com/a/1190000011142875\n\n\n\n","source":"_posts/recursion.md","raw":"---\ntitle: js递归\ndate: 2018-02-27\nphoto: https://shuangmuyingzi.github.io/img/npm.jpg\n---\n\n程序调用自身的编程技巧称为递归。递归思想也是软件开发中非常重要的基本思想之一。当然这种思想是要有，但是确实递归会影响效率。\n\n<!--more-->\n\n### 定义\n我们称自己调用自己就叫做递归。\n### 阶乘\n从小学就接触的阶乘就可以用递归实现。\n示例：\n\n```\nfunction factorial(n) {\n    if (n == 1) return n;\n    return n * factorial(n - 1)\n}\nconsole.log(factorial(4)) // 4 * 3 * 2 * 1 = 24\n```\n### 斐波那契数列\n曾经去面试时，就有这样一道题目，说是写出一个函数实现如下数列：1, 1, 2, 3, 5, 8, 13, 21, 34 … 。当时自以为很机智地一直在找规律，回来后跟别人说起，结果被深深的鄙视.\n\n递归实现斐波那契数列：\n\n```\nfunction fibonacci(n){\n    return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);\n}\nconsole.log(fibonacci(8)) // 1 1 2 3 5 8 13 21\n```\n### 递归条件\n从这两个例子中，我们可以看出：\n\n构成递归需具备边界条件、递归前进段和递归返回段，当边界条件不满足时，递归前进，当边界条件满足时，递归返回。阶乘中的 n == 1 和 斐波那契数列中的 n < 2 都是边界条件。递归不能无限制地调用本身，边界条件就是递归的出口。\n\n### 递归优化\n我们知道当执行一个函数的时候，就会创建一个执行上下文，并且压入执行上下文栈，当函数执行完毕的时候，就会将函数的执行上下文从栈中弹出。我们看上面阶乘的列子会发现JavaScript会不停的创建执行上下文压入执行上下文栈，对于内存而言，维护这么多的执行上下文是一笔不小的开销。\n\n接下来我们试试用尾调用来优化它。\n### 尾调用\n尾调用，是指函数内部的最后一个动作是函数调用。该调用的返回值，直接返回给函数。\n举个例子：\n\n```\n// 尾调用\nfunction a(x){\n    return b(x);\n}\n```\n然而\n\n```\n// 非尾调用\nfunction a(x){\n    return b(x) + 1;\n}\n```\n因为 b(x) 的返回值还需要跟 1 进行计算后，a(x)才会返回值。\n\n也就说尾调用函数执行时，虽然也调用了一个函数，但是因为原来的函数执行完毕，执行上下文会被弹出，执行上下文栈中相当于只多压入了一个执行上下文。然而非尾调用函数，就会创建多个执行上下文压入执行上下文栈。\n\n接下来我们用尾调用来优化递归：\n\n```\nfunction factorial(n, res) {\n    if (n == 1) return res;\n    return factorial(n - 1, n * res)\n}\nconsole.log(factorial(4, 1)) // 24\n```\n参考链接：https://segmentfault.com/a/1190000011142875\n\n\n\n","slug":"recursion","published":1,"updated":"2018-05-01T08:09:48.977Z","photos":["https://shuangmuyingzi.github.io/img/npm.jpg"],"comments":1,"layout":"post","link":"","_id":"cjgnpte6f0005u06x8gklajrh","content":"<p>程序调用自身的编程技巧称为递归。递归思想也是软件开发中非常重要的基本思想之一。当然这种思想是要有，但是确实递归会影响效率。</p>\n<a id=\"more\"></a>\n<h3 id=\"定义\"><a href=\"#定义\" class=\"headerlink\" title=\"定义\"></a>定义</h3><p>我们称自己调用自己就叫做递归。</p>\n<h3 id=\"阶乘\"><a href=\"#阶乘\" class=\"headerlink\" title=\"阶乘\"></a>阶乘</h3><p>从小学就接触的阶乘就可以用递归实现。<br>示例：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">factorial</span>(<span class=\"params\">n</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (n == <span class=\"number\">1</span>) <span class=\"keyword\">return</span> n;</div><div class=\"line\">    <span class=\"keyword\">return</span> n * factorial(n - <span class=\"number\">1</span>)</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(factorial(<span class=\"number\">4</span>)) <span class=\"comment\">// 4 * 3 * 2 * 1 = 24</span></div></pre></td></tr></table></figure>\n<h3 id=\"斐波那契数列\"><a href=\"#斐波那契数列\" class=\"headerlink\" title=\"斐波那契数列\"></a>斐波那契数列</h3><p>曾经去面试时，就有这样一道题目，说是写出一个函数实现如下数列：1, 1, 2, 3, 5, 8, 13, 21, 34 … 。当时自以为很机智地一直在找规律，回来后跟别人说起，结果被深深的鄙视.</p>\n<p>递归实现斐波那契数列：</p>\n<figure class=\"highlight ada\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">function</span> <span class=\"title\">fibonacci</span>(n)&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"type\">n</span> &lt; <span class=\"number\">2</span> ? n : <span class=\"type\">fibonacci</span>(n - <span class=\"number\">1</span>) + fibonacci(n - <span class=\"number\">2</span>);</div><div class=\"line\">&#125;</div><div class=\"line\">console.log(fibonacci(<span class=\"number\">8</span>)) // <span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">5</span> <span class=\"number\">8</span> <span class=\"number\">13</span> <span class=\"number\">21</span></div></pre></td></tr></table></figure>\n<h3 id=\"递归条件\"><a href=\"#递归条件\" class=\"headerlink\" title=\"递归条件\"></a>递归条件</h3><p>从这两个例子中，我们可以看出：</p>\n<p>构成递归需具备边界条件、递归前进段和递归返回段，当边界条件不满足时，递归前进，当边界条件满足时，递归返回。阶乘中的 n == 1 和 斐波那契数列中的 n &lt; 2 都是边界条件。递归不能无限制地调用本身，边界条件就是递归的出口。</p>\n<h3 id=\"递归优化\"><a href=\"#递归优化\" class=\"headerlink\" title=\"递归优化\"></a>递归优化</h3><p>我们知道当执行一个函数的时候，就会创建一个执行上下文，并且压入执行上下文栈，当函数执行完毕的时候，就会将函数的执行上下文从栈中弹出。我们看上面阶乘的列子会发现JavaScript会不停的创建执行上下文压入执行上下文栈，对于内存而言，维护这么多的执行上下文是一笔不小的开销。</p>\n<p>接下来我们试试用尾调用来优化它。</p>\n<h3 id=\"尾调用\"><a href=\"#尾调用\" class=\"headerlink\" title=\"尾调用\"></a>尾调用</h3><p>尾调用，是指函数内部的最后一个动作是函数调用。该调用的返回值，直接返回给函数。<br>举个例子：</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 尾调用</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span><span class=\"params\">(x)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> b(x);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>然而</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 非尾调用</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span><span class=\"params\">(x)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> b(x) + <span class=\"number\">1</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>因为 b(x) 的返回值还需要跟 1 进行计算后，a(x)才会返回值。</p>\n<p>也就说尾调用函数执行时，虽然也调用了一个函数，但是因为原来的函数执行完毕，执行上下文会被弹出，执行上下文栈中相当于只多压入了一个执行上下文。然而非尾调用函数，就会创建多个执行上下文压入执行上下文栈。</p>\n<p>接下来我们用尾调用来优化递归：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">factorial</span>(<span class=\"params\">n, res</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (n == <span class=\"number\">1</span>) <span class=\"keyword\">return</span> res;</div><div class=\"line\">    <span class=\"keyword\">return</span> factorial(n - <span class=\"number\">1</span>, n * res)</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(factorial(<span class=\"number\">4</span>, <span class=\"number\">1</span>)) <span class=\"comment\">// 24</span></div></pre></td></tr></table></figure>\n<p>参考链接：<a href=\"https://segmentfault.com/a/1190000011142875\" target=\"_blank\" rel=\"external\">https://segmentfault.com/a/1190000011142875</a></p>\n","site":{"data":{}},"excerpt":"<p>程序调用自身的编程技巧称为递归。递归思想也是软件开发中非常重要的基本思想之一。当然这种思想是要有，但是确实递归会影响效率。</p>","more":"<h3 id=\"定义\"><a href=\"#定义\" class=\"headerlink\" title=\"定义\"></a>定义</h3><p>我们称自己调用自己就叫做递归。</p>\n<h3 id=\"阶乘\"><a href=\"#阶乘\" class=\"headerlink\" title=\"阶乘\"></a>阶乘</h3><p>从小学就接触的阶乘就可以用递归实现。<br>示例：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">factorial</span>(<span class=\"params\">n</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (n == <span class=\"number\">1</span>) <span class=\"keyword\">return</span> n;</div><div class=\"line\">    <span class=\"keyword\">return</span> n * factorial(n - <span class=\"number\">1</span>)</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(factorial(<span class=\"number\">4</span>)) <span class=\"comment\">// 4 * 3 * 2 * 1 = 24</span></div></pre></td></tr></table></figure>\n<h3 id=\"斐波那契数列\"><a href=\"#斐波那契数列\" class=\"headerlink\" title=\"斐波那契数列\"></a>斐波那契数列</h3><p>曾经去面试时，就有这样一道题目，说是写出一个函数实现如下数列：1, 1, 2, 3, 5, 8, 13, 21, 34 … 。当时自以为很机智地一直在找规律，回来后跟别人说起，结果被深深的鄙视.</p>\n<p>递归实现斐波那契数列：</p>\n<figure class=\"highlight ada\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">function</span> <span class=\"title\">fibonacci</span>(n)&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"type\">n</span> &lt; <span class=\"number\">2</span> ? n : <span class=\"type\">fibonacci</span>(n - <span class=\"number\">1</span>) + fibonacci(n - <span class=\"number\">2</span>);</div><div class=\"line\">&#125;</div><div class=\"line\">console.log(fibonacci(<span class=\"number\">8</span>)) // <span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">5</span> <span class=\"number\">8</span> <span class=\"number\">13</span> <span class=\"number\">21</span></div></pre></td></tr></table></figure>\n<h3 id=\"递归条件\"><a href=\"#递归条件\" class=\"headerlink\" title=\"递归条件\"></a>递归条件</h3><p>从这两个例子中，我们可以看出：</p>\n<p>构成递归需具备边界条件、递归前进段和递归返回段，当边界条件不满足时，递归前进，当边界条件满足时，递归返回。阶乘中的 n == 1 和 斐波那契数列中的 n &lt; 2 都是边界条件。递归不能无限制地调用本身，边界条件就是递归的出口。</p>\n<h3 id=\"递归优化\"><a href=\"#递归优化\" class=\"headerlink\" title=\"递归优化\"></a>递归优化</h3><p>我们知道当执行一个函数的时候，就会创建一个执行上下文，并且压入执行上下文栈，当函数执行完毕的时候，就会将函数的执行上下文从栈中弹出。我们看上面阶乘的列子会发现JavaScript会不停的创建执行上下文压入执行上下文栈，对于内存而言，维护这么多的执行上下文是一笔不小的开销。</p>\n<p>接下来我们试试用尾调用来优化它。</p>\n<h3 id=\"尾调用\"><a href=\"#尾调用\" class=\"headerlink\" title=\"尾调用\"></a>尾调用</h3><p>尾调用，是指函数内部的最后一个动作是函数调用。该调用的返回值，直接返回给函数。<br>举个例子：</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 尾调用</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span><span class=\"params\">(x)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> b(x);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>然而</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 非尾调用</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span><span class=\"params\">(x)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> b(x) + <span class=\"number\">1</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>因为 b(x) 的返回值还需要跟 1 进行计算后，a(x)才会返回值。</p>\n<p>也就说尾调用函数执行时，虽然也调用了一个函数，但是因为原来的函数执行完毕，执行上下文会被弹出，执行上下文栈中相当于只多压入了一个执行上下文。然而非尾调用函数，就会创建多个执行上下文压入执行上下文栈。</p>\n<p>接下来我们用尾调用来优化递归：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">factorial</span>(<span class=\"params\">n, res</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (n == <span class=\"number\">1</span>) <span class=\"keyword\">return</span> res;</div><div class=\"line\">    <span class=\"keyword\">return</span> factorial(n - <span class=\"number\">1</span>, n * res)</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(factorial(<span class=\"number\">4</span>, <span class=\"number\">1</span>)) <span class=\"comment\">// 24</span></div></pre></td></tr></table></figure>\n<p>参考链接：<a href=\"https://segmentfault.com/a/1190000011142875\" target=\"_blank\" rel=\"external\">https://segmentfault.com/a/1190000011142875</a></p>"},{"title":"简单的 Web Socket 客户端","date":"2017-10-31T00:00:00.000Z","_content":"\nHTML5之webSocket的客户端实现，建立webSocket连接、交换信息及最终关闭webSocket连接过程。\n\n<!--more-->\n\n为了使用Web Socket,需要在Web服务器上运行一个Web Socket服务器。这个程序负责协调各方通信，而且启动后就会不间断的运行下去。本厂后端开发语言为php(毕竟是世界上最好的语言)，有兴趣的可以在github上找相关服务端代码阅读。本文只介绍Web Socket客户端的实现。\n\n## 一个聊天室的Web Socket简单客户端\n\n### 创建Web Socket对象\n\n```\nvar ws = new WebSocket('ws://127.0.0.1:8000'); //填写具体服务端地址\n```\nws对象值如下：\n\n```\nbinaryType:\"blob\",\nbufferedAmount:0,\nextensions:\"\",\nonclose:null,\nonerror:null,\nonmessage:null,\nonopen:null,\nprotocol:\"\",\nreadyState:1,\nurl:\"\",\n__proto__:\n```\n创建WebSocket对象后，页面就会尝试连接服务器。接下来，就是使用WebSocket对象的四个事件一个方法以及一个属性：onOpen、onError、onClose和onMessage还有send以及readyState。利用这些事件、方法、属性就可以实现与服务端的简单通信。\n### ws.onopen\n```\nws.onopen = function () {\n        var bindData = {\n                \"type\": \"bind\",\n                \"from_uid\": '',\n                \"to_uid\": '',\n                \"room_id\":'',\n                \"time\": ''\n        }\n        ws.send( JSON.stringify( bindData ) );\n    };\n```\nonOpen是在建立连接后触发,代表连接成功。send()方法发送连接的相关信息给服务器端。\n### ws.onmessage\n```\nws.onmessage = function (e) {\n        var result = JSON.parse( e.data );\n        switch(result.type){\n            case 'speak':\n                handleSpeak(result.data);\n                break;\n            case 'sendMsg':\n                break;     \n            default:\n                break;\n        }        \n };\n```\nonmessage是在页面从服务器接收到消息时触发。type区分服务器端返回消息的类型，可跟后端约定好，根据type的不同去执行不同的业务。\n### ws.onclose\n```\nws.onclose = function (error) {\n        console.log('关闭连接');\n    };\n```\nonclose是在连接关闭时触发,连接关闭考虑是否需要做相应的提示或者重连。\n### ws.onerror\n```\nws.onerror = function (error) {\n        console.log('连接出错');\n    };\n```\nonerror是在连接出现问题时触发，连接出错考虑是否需要做相应的提示或者重连。\n### ws.send()\n```\n<input type=\"button\" id=\"btn\" value=\"发送\" onclick=\"sendMsg()\" >\n```\n\n```\n//发送信息到服务端\n    function sendMsg(){\n        var inputText = document.querySelector('#inputText');\n        var data = {\n                \"type\": \"sendMsg\",\n                \"from_uid\": '',\n                \"to_uid\": '',\n                \"room_id\":'',\n                \"time\": ''\n                \"data\": {\n                    'text': inputText.value\n                },\n            }\n        ws.send( JSON.stringify( data ) );\n    }\n```\nsend方法用于向服务器发送数据。假设type为’sendMsg’,在onmessage事件里面监听该type对应值的服务端返回，进而做相应的处理。\n\n### ws.readyState\nreadyState返回对象的当前状态，一共有四种。可在需要做处理的地方判断状态值进而做相应的提示，一般判断状态值是否为’3’。\n\n```\n* CONNECTING：值为0，表示正在连接。\n* OPEN：值为1，表示连接成功，可以通信了。\n* CLOSING：值为2，表示连接正在关闭。\n* CLOSED：值为3，表示连接已经关闭，或者打开连接失败。\n```\n\n\n\n","source":"_posts/websocket.md","raw":"---\ntitle: 简单的 Web Socket 客户端\ndate: 2017-10-31\nphoto: https://shuangmuyingzi.github.io/img/npm.jpg\n---\n\nHTML5之webSocket的客户端实现，建立webSocket连接、交换信息及最终关闭webSocket连接过程。\n\n<!--more-->\n\n为了使用Web Socket,需要在Web服务器上运行一个Web Socket服务器。这个程序负责协调各方通信，而且启动后就会不间断的运行下去。本厂后端开发语言为php(毕竟是世界上最好的语言)，有兴趣的可以在github上找相关服务端代码阅读。本文只介绍Web Socket客户端的实现。\n\n## 一个聊天室的Web Socket简单客户端\n\n### 创建Web Socket对象\n\n```\nvar ws = new WebSocket('ws://127.0.0.1:8000'); //填写具体服务端地址\n```\nws对象值如下：\n\n```\nbinaryType:\"blob\",\nbufferedAmount:0,\nextensions:\"\",\nonclose:null,\nonerror:null,\nonmessage:null,\nonopen:null,\nprotocol:\"\",\nreadyState:1,\nurl:\"\",\n__proto__:\n```\n创建WebSocket对象后，页面就会尝试连接服务器。接下来，就是使用WebSocket对象的四个事件一个方法以及一个属性：onOpen、onError、onClose和onMessage还有send以及readyState。利用这些事件、方法、属性就可以实现与服务端的简单通信。\n### ws.onopen\n```\nws.onopen = function () {\n        var bindData = {\n                \"type\": \"bind\",\n                \"from_uid\": '',\n                \"to_uid\": '',\n                \"room_id\":'',\n                \"time\": ''\n        }\n        ws.send( JSON.stringify( bindData ) );\n    };\n```\nonOpen是在建立连接后触发,代表连接成功。send()方法发送连接的相关信息给服务器端。\n### ws.onmessage\n```\nws.onmessage = function (e) {\n        var result = JSON.parse( e.data );\n        switch(result.type){\n            case 'speak':\n                handleSpeak(result.data);\n                break;\n            case 'sendMsg':\n                break;     \n            default:\n                break;\n        }        \n };\n```\nonmessage是在页面从服务器接收到消息时触发。type区分服务器端返回消息的类型，可跟后端约定好，根据type的不同去执行不同的业务。\n### ws.onclose\n```\nws.onclose = function (error) {\n        console.log('关闭连接');\n    };\n```\nonclose是在连接关闭时触发,连接关闭考虑是否需要做相应的提示或者重连。\n### ws.onerror\n```\nws.onerror = function (error) {\n        console.log('连接出错');\n    };\n```\nonerror是在连接出现问题时触发，连接出错考虑是否需要做相应的提示或者重连。\n### ws.send()\n```\n<input type=\"button\" id=\"btn\" value=\"发送\" onclick=\"sendMsg()\" >\n```\n\n```\n//发送信息到服务端\n    function sendMsg(){\n        var inputText = document.querySelector('#inputText');\n        var data = {\n                \"type\": \"sendMsg\",\n                \"from_uid\": '',\n                \"to_uid\": '',\n                \"room_id\":'',\n                \"time\": ''\n                \"data\": {\n                    'text': inputText.value\n                },\n            }\n        ws.send( JSON.stringify( data ) );\n    }\n```\nsend方法用于向服务器发送数据。假设type为’sendMsg’,在onmessage事件里面监听该type对应值的服务端返回，进而做相应的处理。\n\n### ws.readyState\nreadyState返回对象的当前状态，一共有四种。可在需要做处理的地方判断状态值进而做相应的提示，一般判断状态值是否为’3’。\n\n```\n* CONNECTING：值为0，表示正在连接。\n* OPEN：值为1，表示连接成功，可以通信了。\n* CLOSING：值为2，表示连接正在关闭。\n* CLOSED：值为3，表示连接已经关闭，或者打开连接失败。\n```\n\n\n\n","slug":"websocket","published":1,"updated":"2018-05-01T03:50:30.726Z","photos":["https://shuangmuyingzi.github.io/img/npm.jpg"],"comments":1,"layout":"post","link":"","_id":"cjgnpte6h0006u06xnhxhww7u","content":"<p>HTML5之webSocket的客户端实现，建立webSocket连接、交换信息及最终关闭webSocket连接过程。</p>\n<a id=\"more\"></a>\n<p>为了使用Web Socket,需要在Web服务器上运行一个Web Socket服务器。这个程序负责协调各方通信，而且启动后就会不间断的运行下去。本厂后端开发语言为php(毕竟是世界上最好的语言)，有兴趣的可以在github上找相关服务端代码阅读。本文只介绍Web Socket客户端的实现。</p>\n<h2 id=\"一个聊天室的Web-Socket简单客户端\"><a href=\"#一个聊天室的Web-Socket简单客户端\" class=\"headerlink\" title=\"一个聊天室的Web Socket简单客户端\"></a>一个聊天室的Web Socket简单客户端</h2><h3 id=\"创建Web-Socket对象\"><a href=\"#创建Web-Socket对象\" class=\"headerlink\" title=\"创建Web Socket对象\"></a>创建Web Socket对象</h3><figure class=\"highlight haxe\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> ws = <span class=\"keyword\">new</span> <span class=\"type\">WebSocket</span>(<span class=\"string\">'ws://127.0.0.1:8000'</span>); <span class=\"comment\">//填写具体服务端地址</span></div></pre></td></tr></table></figure>\n<p>ws对象值如下：</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">binaryType:</span><span class=\"string\">\"blob\"</span>,</div><div class=\"line\"><span class=\"string\">bufferedAmount:</span><span class=\"number\">0</span>,</div><div class=\"line\"><span class=\"string\">extensions:</span><span class=\"string\">\"\"</span>,</div><div class=\"line\"><span class=\"string\">onclose:</span><span class=\"literal\">null</span>,</div><div class=\"line\"><span class=\"string\">onerror:</span><span class=\"literal\">null</span>,</div><div class=\"line\"><span class=\"string\">onmessage:</span><span class=\"literal\">null</span>,</div><div class=\"line\"><span class=\"string\">onopen:</span><span class=\"literal\">null</span>,</div><div class=\"line\"><span class=\"string\">protocol:</span><span class=\"string\">\"\"</span>,</div><div class=\"line\"><span class=\"string\">readyState:</span><span class=\"number\">1</span>,</div><div class=\"line\"><span class=\"string\">url:</span><span class=\"string\">\"\"</span>,</div><div class=\"line\"><span class=\"string\">__proto__:</span></div></pre></td></tr></table></figure>\n<p>创建WebSocket对象后，页面就会尝试连接服务器。接下来，就是使用WebSocket对象的四个事件一个方法以及一个属性：onOpen、onError、onClose和onMessage还有send以及readyState。利用这些事件、方法、属性就可以实现与服务端的简单通信。</p>\n<h3 id=\"ws-onopen\"><a href=\"#ws-onopen\" class=\"headerlink\" title=\"ws.onopen\"></a>ws.onopen</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">ws.onopen = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> bindData = &#123;</div><div class=\"line\">                <span class=\"string\">\"type\"</span>: <span class=\"string\">\"bind\"</span>,</div><div class=\"line\">                <span class=\"string\">\"from_uid\"</span>: <span class=\"string\">''</span>,</div><div class=\"line\">                <span class=\"string\">\"to_uid\"</span>: <span class=\"string\">''</span>,</div><div class=\"line\">                <span class=\"string\">\"room_id\"</span>:<span class=\"string\">''</span>,</div><div class=\"line\">                <span class=\"string\">\"time\"</span>: <span class=\"string\">''</span></div><div class=\"line\">        &#125;</div><div class=\"line\">        ws.send( <span class=\"built_in\">JSON</span>.stringify( bindData ) );</div><div class=\"line\">    &#125;;</div></pre></td></tr></table></figure>\n<p>onOpen是在建立连接后触发,代表连接成功。send()方法发送连接的相关信息给服务器端。</p>\n<h3 id=\"ws-onmessage\"><a href=\"#ws-onmessage\" class=\"headerlink\" title=\"ws.onmessage\"></a>ws.onmessage</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">ws.onmessage = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> result = <span class=\"built_in\">JSON</span>.parse( e.data );</div><div class=\"line\">        <span class=\"keyword\">switch</span>(result.type)&#123;</div><div class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">'speak'</span>:</div><div class=\"line\">                handleSpeak(result.data);</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">'sendMsg'</span>:</div><div class=\"line\">                <span class=\"keyword\">break</span>;     </div><div class=\"line\">            <span class=\"keyword\">default</span>:</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">        &#125;        </div><div class=\"line\"> &#125;;</div></pre></td></tr></table></figure>\n<p>onmessage是在页面从服务器接收到消息时触发。type区分服务器端返回消息的类型，可跟后端约定好，根据type的不同去执行不同的业务。</p>\n<h3 id=\"ws-onclose\"><a href=\"#ws-onclose\" class=\"headerlink\" title=\"ws.onclose\"></a>ws.onclose</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">ws.onclose = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error</span>) </span>&#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'关闭连接'</span>);</div><div class=\"line\">    &#125;;</div></pre></td></tr></table></figure>\n<p>onclose是在连接关闭时触发,连接关闭考虑是否需要做相应的提示或者重连。</p>\n<h3 id=\"ws-onerror\"><a href=\"#ws-onerror\" class=\"headerlink\" title=\"ws.onerror\"></a>ws.onerror</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">ws.onerror = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error</span>) </span>&#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'连接出错'</span>);</div><div class=\"line\">    &#125;;</div></pre></td></tr></table></figure>\n<p>onerror是在连接出现问题时触发，连接出错考虑是否需要做相应的提示或者重连。</p>\n<h3 id=\"ws-send\"><a href=\"#ws-send\" class=\"headerlink\" title=\"ws.send()\"></a>ws.send()</h3><figure class=\"highlight routeros\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;input <span class=\"attribute\">type</span>=<span class=\"string\">\"button\"</span> <span class=\"attribute\">id</span>=<span class=\"string\">\"btn\"</span> <span class=\"attribute\">value</span>=<span class=\"string\">\"发送\"</span> <span class=\"attribute\">onclick</span>=<span class=\"string\">\"sendMsg()\"</span> &gt;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//发送信息到服务端</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sendMsg</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> inputText = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#inputText'</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> data = &#123;</div><div class=\"line\">                <span class=\"string\">\"type\"</span>: <span class=\"string\">\"sendMsg\"</span>,</div><div class=\"line\">                <span class=\"string\">\"from_uid\"</span>: <span class=\"string\">''</span>,</div><div class=\"line\">                <span class=\"string\">\"to_uid\"</span>: <span class=\"string\">''</span>,</div><div class=\"line\">                <span class=\"string\">\"room_id\"</span>:<span class=\"string\">''</span>,</div><div class=\"line\">                <span class=\"string\">\"time\"</span>: <span class=\"string\">''</span></div><div class=\"line\">                <span class=\"string\">\"data\"</span>: &#123;</div><div class=\"line\">                    <span class=\"string\">'text'</span>: inputText.value</div><div class=\"line\">                &#125;,</div><div class=\"line\">            &#125;</div><div class=\"line\">        ws.send( <span class=\"built_in\">JSON</span>.stringify( data ) );</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p>send方法用于向服务器发送数据。假设type为’sendMsg’,在onmessage事件里面监听该type对应值的服务端返回，进而做相应的处理。</p>\n<h3 id=\"ws-readyState\"><a href=\"#ws-readyState\" class=\"headerlink\" title=\"ws.readyState\"></a>ws.readyState</h3><p>readyState返回对象的当前状态，一共有四种。可在需要做处理的地方判断状态值进而做相应的提示，一般判断状态值是否为’3’。</p>\n<figure class=\"highlight asciidoc\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"bullet\">* </span>CONNECTING：值为0，表示正在连接。</div><div class=\"line\"><span class=\"bullet\">* </span>OPEN：值为1，表示连接成功，可以通信了。</div><div class=\"line\"><span class=\"bullet\">* </span>CLOSING：值为2，表示连接正在关闭。</div><div class=\"line\"><span class=\"bullet\">* </span>CLOSED：值为3，表示连接已经关闭，或者打开连接失败。</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p>HTML5之webSocket的客户端实现，建立webSocket连接、交换信息及最终关闭webSocket连接过程。</p>","more":"<p>为了使用Web Socket,需要在Web服务器上运行一个Web Socket服务器。这个程序负责协调各方通信，而且启动后就会不间断的运行下去。本厂后端开发语言为php(毕竟是世界上最好的语言)，有兴趣的可以在github上找相关服务端代码阅读。本文只介绍Web Socket客户端的实现。</p>\n<h2 id=\"一个聊天室的Web-Socket简单客户端\"><a href=\"#一个聊天室的Web-Socket简单客户端\" class=\"headerlink\" title=\"一个聊天室的Web Socket简单客户端\"></a>一个聊天室的Web Socket简单客户端</h2><h3 id=\"创建Web-Socket对象\"><a href=\"#创建Web-Socket对象\" class=\"headerlink\" title=\"创建Web Socket对象\"></a>创建Web Socket对象</h3><figure class=\"highlight haxe\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> ws = <span class=\"keyword\">new</span> <span class=\"type\">WebSocket</span>(<span class=\"string\">'ws://127.0.0.1:8000'</span>); <span class=\"comment\">//填写具体服务端地址</span></div></pre></td></tr></table></figure>\n<p>ws对象值如下：</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">binaryType:</span><span class=\"string\">\"blob\"</span>,</div><div class=\"line\"><span class=\"string\">bufferedAmount:</span><span class=\"number\">0</span>,</div><div class=\"line\"><span class=\"string\">extensions:</span><span class=\"string\">\"\"</span>,</div><div class=\"line\"><span class=\"string\">onclose:</span><span class=\"literal\">null</span>,</div><div class=\"line\"><span class=\"string\">onerror:</span><span class=\"literal\">null</span>,</div><div class=\"line\"><span class=\"string\">onmessage:</span><span class=\"literal\">null</span>,</div><div class=\"line\"><span class=\"string\">onopen:</span><span class=\"literal\">null</span>,</div><div class=\"line\"><span class=\"string\">protocol:</span><span class=\"string\">\"\"</span>,</div><div class=\"line\"><span class=\"string\">readyState:</span><span class=\"number\">1</span>,</div><div class=\"line\"><span class=\"string\">url:</span><span class=\"string\">\"\"</span>,</div><div class=\"line\"><span class=\"string\">__proto__:</span></div></pre></td></tr></table></figure>\n<p>创建WebSocket对象后，页面就会尝试连接服务器。接下来，就是使用WebSocket对象的四个事件一个方法以及一个属性：onOpen、onError、onClose和onMessage还有send以及readyState。利用这些事件、方法、属性就可以实现与服务端的简单通信。</p>\n<h3 id=\"ws-onopen\"><a href=\"#ws-onopen\" class=\"headerlink\" title=\"ws.onopen\"></a>ws.onopen</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">ws.onopen = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> bindData = &#123;</div><div class=\"line\">                <span class=\"string\">\"type\"</span>: <span class=\"string\">\"bind\"</span>,</div><div class=\"line\">                <span class=\"string\">\"from_uid\"</span>: <span class=\"string\">''</span>,</div><div class=\"line\">                <span class=\"string\">\"to_uid\"</span>: <span class=\"string\">''</span>,</div><div class=\"line\">                <span class=\"string\">\"room_id\"</span>:<span class=\"string\">''</span>,</div><div class=\"line\">                <span class=\"string\">\"time\"</span>: <span class=\"string\">''</span></div><div class=\"line\">        &#125;</div><div class=\"line\">        ws.send( <span class=\"built_in\">JSON</span>.stringify( bindData ) );</div><div class=\"line\">    &#125;;</div></pre></td></tr></table></figure>\n<p>onOpen是在建立连接后触发,代表连接成功。send()方法发送连接的相关信息给服务器端。</p>\n<h3 id=\"ws-onmessage\"><a href=\"#ws-onmessage\" class=\"headerlink\" title=\"ws.onmessage\"></a>ws.onmessage</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">ws.onmessage = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> result = <span class=\"built_in\">JSON</span>.parse( e.data );</div><div class=\"line\">        <span class=\"keyword\">switch</span>(result.type)&#123;</div><div class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">'speak'</span>:</div><div class=\"line\">                handleSpeak(result.data);</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">'sendMsg'</span>:</div><div class=\"line\">                <span class=\"keyword\">break</span>;     </div><div class=\"line\">            <span class=\"keyword\">default</span>:</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">        &#125;        </div><div class=\"line\"> &#125;;</div></pre></td></tr></table></figure>\n<p>onmessage是在页面从服务器接收到消息时触发。type区分服务器端返回消息的类型，可跟后端约定好，根据type的不同去执行不同的业务。</p>\n<h3 id=\"ws-onclose\"><a href=\"#ws-onclose\" class=\"headerlink\" title=\"ws.onclose\"></a>ws.onclose</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">ws.onclose = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error</span>) </span>&#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'关闭连接'</span>);</div><div class=\"line\">    &#125;;</div></pre></td></tr></table></figure>\n<p>onclose是在连接关闭时触发,连接关闭考虑是否需要做相应的提示或者重连。</p>\n<h3 id=\"ws-onerror\"><a href=\"#ws-onerror\" class=\"headerlink\" title=\"ws.onerror\"></a>ws.onerror</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">ws.onerror = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error</span>) </span>&#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'连接出错'</span>);</div><div class=\"line\">    &#125;;</div></pre></td></tr></table></figure>\n<p>onerror是在连接出现问题时触发，连接出错考虑是否需要做相应的提示或者重连。</p>\n<h3 id=\"ws-send\"><a href=\"#ws-send\" class=\"headerlink\" title=\"ws.send()\"></a>ws.send()</h3><figure class=\"highlight routeros\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;input <span class=\"attribute\">type</span>=<span class=\"string\">\"button\"</span> <span class=\"attribute\">id</span>=<span class=\"string\">\"btn\"</span> <span class=\"attribute\">value</span>=<span class=\"string\">\"发送\"</span> <span class=\"attribute\">onclick</span>=<span class=\"string\">\"sendMsg()\"</span> &gt;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//发送信息到服务端</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sendMsg</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> inputText = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#inputText'</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> data = &#123;</div><div class=\"line\">                <span class=\"string\">\"type\"</span>: <span class=\"string\">\"sendMsg\"</span>,</div><div class=\"line\">                <span class=\"string\">\"from_uid\"</span>: <span class=\"string\">''</span>,</div><div class=\"line\">                <span class=\"string\">\"to_uid\"</span>: <span class=\"string\">''</span>,</div><div class=\"line\">                <span class=\"string\">\"room_id\"</span>:<span class=\"string\">''</span>,</div><div class=\"line\">                <span class=\"string\">\"time\"</span>: <span class=\"string\">''</span></div><div class=\"line\">                <span class=\"string\">\"data\"</span>: &#123;</div><div class=\"line\">                    <span class=\"string\">'text'</span>: inputText.value</div><div class=\"line\">                &#125;,</div><div class=\"line\">            &#125;</div><div class=\"line\">        ws.send( <span class=\"built_in\">JSON</span>.stringify( data ) );</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p>send方法用于向服务器发送数据。假设type为’sendMsg’,在onmessage事件里面监听该type对应值的服务端返回，进而做相应的处理。</p>\n<h3 id=\"ws-readyState\"><a href=\"#ws-readyState\" class=\"headerlink\" title=\"ws.readyState\"></a>ws.readyState</h3><p>readyState返回对象的当前状态，一共有四种。可在需要做处理的地方判断状态值进而做相应的提示，一般判断状态值是否为’3’。</p>\n<figure class=\"highlight asciidoc\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"bullet\">* </span>CONNECTING：值为0，表示正在连接。</div><div class=\"line\"><span class=\"bullet\">* </span>OPEN：值为1，表示连接成功，可以通信了。</div><div class=\"line\"><span class=\"bullet\">* </span>CLOSING：值为2，表示连接正在关闭。</div><div class=\"line\"><span class=\"bullet\">* </span>CLOSED：值为3，表示连接已经关闭，或者打开连接失败。</div></pre></td></tr></table></figure>"}],"PostAsset":[],"PostCategory":[],"PostTag":[],"Tag":[]}}